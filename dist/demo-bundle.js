/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./demo.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./demo.js":
/*!*****************!*\
  !*** ./demo.js ***!
  \*****************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar demolished_1 = __webpack_require__(/*! ./src/demolished */ \"./src/demolished.js\");\nvar DemolishedSonant_1 = __webpack_require__(/*! ./src/DemolishedSonant */ \"./src/DemolishedSonant.js\");\nvar Demo = (function () {\n    function Demo() {\n        var _this = this;\n        var webGlCanvas = document.querySelector(\"#webgl\");\n        var music = new DemolishedSonant_1.DemolishedSonant(window[\"song\"]);\n        for (var t = 0; t < 8; t++)\n            music.generate(t);\n        ;\n        this.webGlrendering = new demolished_1.Demolished.Rendering(webGlCanvas, document.querySelector(\"#shader-view\"), \"entities/graph.json\", music);\n        this.webGlrendering.onFrame = function (frame) {\n        };\n        this.webGlrendering.onReady = function () {\n            _this.onReady();\n            window.setTimeout(function () {\n                document.querySelector(\".loader\").classList.add(\"hide\");\n                _this.webGlrendering.resizeCanvas(document.querySelector(\"#shader-view\"), 2);\n                _this.webGlrendering.start(0);\n            }, 5000);\n        };\n        this.webGlrendering.onStop = function () {\n        };\n        this.webGlrendering.onStart = function () {\n        };\n        this.webGlrendering.onNext = function (frameInfo) {\n        };\n        window.onerror = function () {\n            _this.webGlrendering.stop();\n        };\n    }\n    Demo.prototype.onReady = function () { };\n    Demo.getIntance = function () {\n        return new this();\n    };\n    return Demo;\n}());\nexports.Demo = Demo;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    Demo.getIntance();\n});\n\n\n//# sourceURL=webpack:///./demo.js?");

/***/ }),

/***/ "./src/DemolishedSonant.js":
/*!*********************************!*\
  !*** ./src/DemolishedSonant.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar demolishedSound_1 = __webpack_require__(/*! ./demolishedSound */ \"./src/demolishedSound.js\");\nvar DemolishedSonant = (function (_super) {\n    __extends(DemolishedSonant, _super);\n    function DemolishedSonant(song) {\n        var _this = _super.call(this) || this;\n        _this.song = song;\n        _this.WAVE_SPS = 44100;\n        _this.WAVE_CHAN = 2;\n        _this.generate = function (track) {\n            var oscillators = [\n                this.osc_sin,\n                this.osc_square,\n                this.osc_saw,\n                this.osc_tri\n            ];\n            var i, j, k, b, p, row, n, currentpos, cp, c1, c2, q, low, band, high, t, lfor, e, x, rsample, f, da, o1t, o2t;\n            var chnBuf = this.chnBufWork, mixBuf = this.mixBufWork, waveSamples = this.WAVE_SIZE, waveBytes = this.WAVE_SIZE * this.WAVE_CHAN * 2, instr = this.song.songData[track], rowLen = this.song.rowLen, osc_lfo = oscillators[instr.lfo_waveform], osc1 = oscillators[instr.osc1_waveform], osc2 = oscillators[instr.osc2_waveform], attack = instr.env_attack, sustain = instr.env_sustain, release = instr.env_release, panFreq = Math.pow(2, instr.fx_pan_freq - 8) / rowLen, lfoFreq = Math.pow(2, instr.lfo_freq - 8) / rowLen;\n            for (b = 0; b < waveBytes; b += 2) {\n                chnBuf[b] = 0;\n                chnBuf[b + 1] = 128;\n            }\n            currentpos = 0;\n            for (p = 0; p < this.song.endPattern - 1; ++p) {\n                cp = instr.p[p];\n                for (row = 0; row < 32; ++row) {\n                    if (cp) {\n                        n = instr.c[cp - 1].n[row];\n                        if (n) {\n                            c1 = c2 = 0;\n                            o1t = this.getnotefreq(n + (instr.osc1_oct - 8) * 12 + instr.osc1_det) * (1 + 0.0008 * instr.osc1_detune);\n                            o2t = this.getnotefreq(n + (instr.osc2_oct - 8) * 12 + instr.osc2_det) * (1 + 0.0008 * instr.osc2_detune);\n                            q = instr.fx_resonance / 255;\n                            low = band = 0;\n                            for (j = attack + sustain + release - 1; j >= 0; --j) {\n                                k = j + currentpos;\n                                lfor = osc_lfo(k * lfoFreq) * instr.lfo_amt / 512 + 0.5;\n                                e = 1;\n                                if (j < attack)\n                                    e = j / attack;\n                                else if (j >= attack + sustain)\n                                    e -= (j - attack - sustain) / release;\n                                t = o1t;\n                                if (instr.lfo_osc1_freq)\n                                    t += lfor;\n                                if (instr.osc1_xenv)\n                                    t *= e * e;\n                                c1 += t;\n                                rsample = osc1(c1) * instr.osc1_vol;\n                                t = o2t;\n                                if (instr.osc2_xenv)\n                                    t *= e * e;\n                                c2 += t;\n                                rsample += osc2(c2) * instr.osc2_vol;\n                                if (instr.noise_fader)\n                                    rsample += (2 * Math.random() - 1) * instr.noise_fader * e;\n                                rsample *= e / 255;\n                                f = instr.fx_freq;\n                                if (instr.lfo_fx_freq)\n                                    f *= lfor;\n                                f = 1.5 * Math.sin(f * 3.141592 / this.WAVE_SPS);\n                                low += f * band;\n                                high = q * (rsample - band) - low;\n                                band += f * high;\n                                switch (instr.fx_filter) {\n                                    case 1:\n                                        rsample = high;\n                                        break;\n                                    case 2:\n                                        rsample = low;\n                                        break;\n                                    case 3:\n                                        rsample = band;\n                                        break;\n                                    case 4:\n                                        rsample = low + high;\n                                    default:\n                                }\n                                t = this.osc_sin(k * panFreq) * instr.fx_pan_amt / 512 + 0.5;\n                                rsample *= 39 * instr.env_master;\n                                k <<= 2;\n                                x = chnBuf[k] + (chnBuf[k + 1] << 8) + rsample * (1 - t);\n                                chnBuf[k] = x & 255;\n                                chnBuf[k + 1] = (x >> 8) & 255;\n                                x = chnBuf[k + 2] + (chnBuf[k + 3] << 8) + rsample * t;\n                                chnBuf[k + 2] = x & 255;\n                                chnBuf[k + 3] = (x >> 8) & 255;\n                            }\n                        }\n                    }\n                    currentpos += rowLen;\n                }\n            }\n            p = (instr.fx_delay_time * rowLen) >> 1;\n            t = instr.fx_delay_amt / 255;\n            for (n = 0; n < waveSamples - p; ++n) {\n                b = 4 * n;\n                k = 4 * (n + p);\n                x = chnBuf[k] + (chnBuf[k + 1] << 8) +\n                    (chnBuf[b + 2] + (chnBuf[b + 3] << 8) - 32768) * t;\n                chnBuf[k] = x & 255;\n                chnBuf[k + 1] = (x >> 8) & 255;\n                x = chnBuf[k + 2] + (chnBuf[k + 3] << 8) +\n                    (chnBuf[b] + (chnBuf[b + 1] << 8) - 32768) * t;\n                chnBuf[k + 2] = x & 255;\n                chnBuf[k + 3] = (x >> 8) & 255;\n            }\n            for (b = 0; b < waveBytes; b += 2) {\n                x = mixBuf[b] + (mixBuf[b + 1] << 8) + chnBuf[b] + (chnBuf[b + 1] << 8) - 32768;\n                mixBuf[b] = x & 255;\n                mixBuf[b + 1] = (x >> 8) & 255;\n            }\n        };\n        _this.WAVE_SIZE = _this.WAVE_SPS * song.songLen;\n        var size = Math.ceil(Math.sqrt(_this.WAVE_SIZE * _this.WAVE_CHAN / 2));\n        var ctx = document.createElement('canvas').getContext('2d');\n        _this.chnBufWork = ctx.createImageData(size, size).data;\n        var b, mixBuf = ctx.createImageData(size, size).data;\n        for (b = size * size * 4 - 2; b >= 0; b -= 2) {\n            mixBuf[b] = 0;\n            mixBuf[b + 1] = 128;\n        }\n        _this.mixBufWork = mixBuf;\n        return _this;\n    }\n    DemolishedSonant.prototype.createAudio = function (settings) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var b, k, x, wave, l1, l2, s, y;\n            var mixBuf = _this.mixBufWork, waveBytes = _this.WAVE_SIZE * _this.WAVE_CHAN * 2;\n            _this.chnBufWork = null;\n            l1 = waveBytes - 8;\n            l2 = l1 - 36;\n            wave = String.fromCharCode(82, 73, 70, 70, l1 & 255, (l1 >> 8) & 255, (l1 >> 16) & 255, (l1 >> 24) & 255, 87, 65, 86, 69, 102, 109, 116, 32, 16, 0, 0, 0, 1, 0, 2, 0, 68, 172, 0, 0, 16, 177, 2, 0, 4, 0, 16, 0, 100, 97, 116, 97, l2 & 255, (l2 >> 8) & 255, (l2 >> 16) & 255, (l2 >> 24) & 255);\n            for (b = 0; b < waveBytes;) {\n                x = \"\";\n                for (k = 0; k < 256 && b < waveBytes; ++k, b += 2) {\n                    y = 4 * (mixBuf[b] + (mixBuf[b + 1] << 8) - 32768);\n                    y = y < -32768 ? -32768 : (y > 32767 ? 32767 : y);\n                    x += String.fromCharCode(y & 255, (y >> 8) & 255);\n                }\n                wave += x;\n            }\n            s = \"data:audio/wav;base64,\" + btoa(wave);\n            wave = null;\n            var audioCtx = new AudioContext();\n            var audioEl = new Audio();\n            audioEl.preload = \"auto\";\n            audioEl.crossOrigin = \"anonymous\";\n            audioEl.src = s;\n            var onLoad = function () {\n                var source = audioCtx.createMediaElementSource(audioEl);\n                var analyser = audioCtx.createAnalyser();\n                analyser.smoothingTimeConstant = 0.85;\n                analyser.fftSize = 8192;\n                _this.audio = audioEl;\n                source.connect(analyser);\n                analyser.connect(audioCtx.destination);\n                _this.audioAnalyser = analyser;\n                resolve(true);\n            };\n            onLoad();\n        });\n    };\n    DemolishedSonant.prototype.play = function () {\n        this.audio.play();\n    };\n    DemolishedSonant.prototype.stop = function () {\n        this.audio.pause();\n    };\n    DemolishedSonant.prototype.mute = function (ismuted) {\n        this.audio.muted = ismuted;\n    };\n    Object.defineProperty(DemolishedSonant.prototype, \"currentTime\", {\n        get: function () {\n            return this.audio.currentTime;\n        },\n        set: function (time) {\n            this.audio.currentTime = time;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DemolishedSonant.prototype.getTracks = function () {\n        throw \"not yet implemented\";\n    };\n    DemolishedSonant.prototype.getFrequenceData = function () {\n        var bufferLength = this.audioAnalyser.frequencyBinCount;\n        var freqArray = new Uint8Array(bufferLength);\n        this.audioAnalyser.getByteFrequencyData(freqArray);\n        return freqArray;\n    };\n    DemolishedSonant.prototype.osc_sin = function (value) {\n        return Math.sin(value * 6.283184);\n    };\n    DemolishedSonant.prototype.osc_square = function (value) {\n        if (this.osc_sin(value) < 0)\n            return -1;\n        return 1;\n    };\n    DemolishedSonant.prototype.osc_saw = function (value) {\n        return (value % 1) - 0.5;\n    };\n    DemolishedSonant.prototype.osc_tri = function (value) {\n        var v2 = (value % 1) * 4;\n        if (v2 < 2)\n            return v2 - 1;\n        return 3 - v2;\n    };\n    DemolishedSonant.prototype.getnotefreq = function (n) {\n        return 0.00390625 * Math.pow(1.059463094, n - 128);\n    };\n    DemolishedSonant.prototype.getData = function (t, n) {\n        for (var i = Math.floor(t * this.WAVE_SPS), j = 0, d = [], b = this.mixBufWork; j < 2 * n; j += 2) {\n            var k = 4 * (i + j) + 1;\n            d.push(t > 0 && k < b.length ? (b[k] + b[k - 1] / 256) / 256 : 0.5);\n        }\n        return d;\n    };\n    ;\n    return DemolishedSonant;\n}(demolishedSound_1.DemolishedSoundBase));\nexports.DemolishedSonant = DemolishedSonant;\nvar DemolishedSoundBox = (function (_super) {\n    __extends(DemolishedSoundBox, _super);\n    function DemolishedSoundBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DemolishedSoundBox.prototype.getTracks = function () {\n        throw \"not yet implemented\";\n    };\n    DemolishedSoundBox.prototype.createAudio = function (settings) {\n        throw new Error(\"Method not implemented.\");\n    };\n    DemolishedSoundBox.prototype.play = function (tm) {\n        throw new Error(\"Method not implemented.\");\n    };\n    DemolishedSoundBox.prototype.stop = function (tm) {\n        throw new Error(\"Method not implemented.\");\n    };\n    DemolishedSoundBox.prototype.mute = function (ismuted) {\n        throw new Error(\"Method not implemented.\");\n    };\n    DemolishedSoundBox.prototype.getFrequenceData = function () {\n        throw new Error(\"Method not implemented.\");\n    };\n    return DemolishedSoundBox;\n}(demolishedSound_1.DemolishedSoundBase));\nexports.DemolishedSoundBox = DemolishedSoundBox;\n\n\n//# sourceURL=webpack:///./src/DemolishedSonant.js?");

/***/ }),

/***/ "./src/demolished.js":
/*!***************************!*\
  !*** ./src/demolished.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar demolishedEntity_1 = __webpack_require__(/*! ./demolishedEntity */ \"./src/demolishedEntity.js\");\nvar demolishedModels_1 = __webpack_require__(/*! ./demolishedModels */ \"./src/demolishedModels.js\");\nvar demolishedLoader_1 = __webpack_require__(/*! ./demolishedLoader */ \"./src/demolishedLoader.js\");\nvar Demolished;\n(function (Demolished) {\n    var Rendering = (function () {\n        function Rendering(canvas, parent, timelineFile, audio, uniforms) {\n            var _this = this;\n            this.canvas = canvas;\n            this.parent = parent;\n            this.timelineFile = timelineFile;\n            this.audio = audio;\n            this.width = 1;\n            this.height = 1;\n            this.centerX = 0;\n            this.centerY = 0;\n            this.resolution = 1;\n            this.gl = this.getRendringContext();\n            if (!uniforms) {\n                this.uniforms = new demolishedModels_1.Uniforms(this.canvas.width, this.canvas.height);\n            }\n            else {\n                this.uniforms = uniforms;\n            }\n            this.entitiesCache = new Array();\n            this.timeFragments = new Array();\n            this.fftTexture = this.gl.createTexture();\n            this.webGLbuffer = this.gl.createBuffer();\n            this.addEventListeners();\n            if (this.timelineFile != \"\") {\n                this.loadGraph(this.timelineFile).then(function (graph) {\n                    var audioSettings = graph.audioSettings;\n                    graph.timeline.forEach(function (tf) {\n                        var _tf = new demolishedModels_1.TimeFragment(tf.entity, tf.start, tf.stop, tf.subeffects);\n                        _this.timeFragments.push(_tf);\n                    });\n                    _this.timeFragments.sort(function (a, b) {\n                        return a.start - b.start;\n                    });\n                    _this.loadShared(graph.shared.glsl).then(function () {\n                        console.log(\"completed\");\n                        _this.audio.createAudio(audioSettings).then(function (state) {\n                            graph.effects.forEach(function (effect) {\n                                var textures = Promise.all(effect.textures.map(function (texture) {\n                                    return new Promise(function (resolve, reject) {\n                                        var image = new Image();\n                                        image.src = texture.src;\n                                        image.onload = function () {\n                                            resolve(image);\n                                        };\n                                        image.onerror = function (err) { return resolve(err); };\n                                    }).then(function (image) {\n                                        return new demolishedEntity_1.EntityTexture(image, texture.uniform, texture.width, texture.height, 0);\n                                    });\n                                })).then(function (textures) {\n                                    _this.addEntity(effect.name, textures);\n                                    if (_this.entitiesCache.length === graph.effects.length) {\n                                        _this.onReady(graph);\n                                    }\n                                });\n                            });\n                            _this.resizeCanvas(_this.parent);\n                        });\n                    });\n                });\n            }\n        }\n        Rendering.prototype.onFrame = function (frame) { };\n        Rendering.prototype.onNext = function (frame) { };\n        Rendering.prototype.onStart = function () { };\n        Rendering.prototype.onStop = function () { };\n        Rendering.prototype.onReady = function (graph) { };\n        Rendering.prototype.getRendringContext = function () {\n            var renderingContext;\n            var contextAttributes = {\n                preserveDrawingBuffer: true\n            };\n            renderingContext =\n                this.canvas.getContext('webgl2', contextAttributes) ||\n                    this.canvas.getContext('webgl', contextAttributes) ||\n                    this.canvas.getContext('experimental-webgl', contextAttributes);\n            renderingContext.getExtension('OES_standard_derivatives');\n            renderingContext.getExtension('OES_texture_float_linear');\n            renderingContext.getExtension('OES_texture_half_float_linear');\n            renderingContext.getExtension('EXT_texture_filter_anisotropic');\n            renderingContext.getExtension('EXT_color_buffer_float');\n            renderingContext.getExtension(\"WEBGL_depth_texture\");\n            renderingContext.getExtension(\"EXT_shader_texture_lod\");\n            this.webGLbuffer = renderingContext.createBuffer();\n            renderingContext.bindBuffer(renderingContext.ARRAY_BUFFER, this.webGLbuffer);\n            renderingContext.bufferData(renderingContext.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0]), renderingContext.STATIC_DRAW);\n            return renderingContext;\n        };\n        Rendering.prototype.loadGraph = function (graphFile) {\n            return demolishedLoader_1.default(graphFile).then(function (response) {\n                return response.json();\n            }).then(function (graph) {\n                return graph;\n            });\n        };\n        Rendering.prototype.loadShared = function (files) {\n            return new Promise(function (resolve, reject) {\n                Promise.all(files.map(function (f) {\n                    demolishedLoader_1.default(f).then(function (resp) { return resp.text(); }).then(function (result) {\n                    });\n                })).then(function () {\n                    console.log(\"complated\");\n                    resolve(true);\n                });\n            });\n        };\n        Rendering.prototype.addEventListeners = function () {\n            var _this = this;\n            document.addEventListener(\"mousemove\", function (evt) {\n                _this.uniforms.mouseX = evt.clientX / window.innerWidth;\n                _this.uniforms.mouseY = 1 - evt.clientY / window.innerHeight;\n            });\n        };\n        Rendering.prototype.getEntity = function (name) {\n            return this.entitiesCache.find(function (p) {\n                return p.name === name;\n            });\n        };\n        Rendering.prototype.addEntity = function (name, textures) {\n            var entity = new demolishedEntity_1.ShaderEntity(this.gl, name, this.canvas.width, this.canvas.height, textures);\n            this.entitiesCache.push(entity);\n            var tf = this.timeFragments.filter(function (pre) {\n                return pre.entity === name;\n            });\n            tf.forEach(function (f) {\n                f.setEntity(entity);\n            });\n        };\n        Rendering.prototype.tryFindTimeFragment = function (time) {\n            var fragment = this.timeFragments.find(function (tf) {\n                return time < tf.stop && time >= tf.start;\n            });\n            if (fragment)\n                fragment.init();\n            return fragment;\n        };\n        Rendering.prototype.resetClock = function (time) {\n            this.currentTimeFragment.reset();\n            this.stop();\n            this.start(time);\n        };\n        Rendering.prototype.start = function (time) {\n            this.uniforms.timeTotal = time;\n            this.animationFrameCount = 0;\n            this.animationOffsetTime = time;\n            this.currentTimeFragment = this.tryFindTimeFragment(time);\n            this.animationStartTime = performance.now();\n            this.animate(time);\n            this.audio.currentTime = (time / 1000) % 60;\n            this.audio.play();\n            if (!this.isPaused)\n                this.onStart();\n        };\n        Rendering.prototype.stop = function () {\n            this.audio.stop();\n            cancelAnimationFrame(this.animationFrameId);\n            ;\n            this.onStop();\n            return this.animationFrameId;\n        };\n        Rendering.prototype.mute = function () {\n            this.isSoundMuted = !this.isSoundMuted;\n            this.audio.mute(this.isSoundMuted);\n        };\n        Rendering.prototype.pause = function () {\n            if (!this.isPaused) {\n                this.isPaused = true;\n                this.stop();\n            }\n            else {\n                this.isPaused = false;\n                this.resume(this.uniforms.time);\n            }\n            return this.uniforms.time;\n        };\n        Rendering.prototype.resume = function (time) {\n            this.start(time);\n        };\n        Rendering.prototype.updateTextureData = function (texture, size, bytes) {\n            var gl = this.gl;\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size, size, 0, gl.RGBA, gl.UNSIGNED_BYTE, bytes);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        };\n        Rendering.prototype.animate = function (time) {\n            var _this = this;\n            var animationTime = time - this.animationStartTime;\n            this.animationFrameId = requestAnimationFrame(function (_time) { return _this.animate(_time); });\n            if (this.audio) {\n                this.updateTextureData(this.fftTexture, this.audio.textureSize, this.audio.getFrequenceData());\n            }\n            else {\n                this.updateTextureData(this.fftTexture, this.audio.textureSize, new Uint8Array(1024));\n            }\n            if (this.currentTimeFragment) {\n                if (animationTime >= this.currentTimeFragment.stop)\n                    this.currentTimeFragment = this.tryFindTimeFragment(time);\n                this.currentTimeFragment ?\n                    this.renderEntities(this.currentTimeFragment.entityShader, animationTime) : this.start(0);\n            }\n            this.onFrame({\n                frame: this.animationFrameCount,\n                ms: animationTime,\n                min: Math.floor(animationTime / 60000) % 60,\n                sec: Math.floor((animationTime / 1000) % 60),\n            });\n        };\n        Rendering.prototype.surfaceCorners = function () {\n            if (this.gl) {\n                this.width = this.height * this.uniforms.screenWidth / this.uniforms.screenHeight;\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.webGLbuffer);\n                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\n                    this.centerX - this.width, this.centerY - this.height,\n                    this.centerX + this.width, this.centerY - this.height,\n                    this.centerX - this.width, this.centerY + this.height,\n                    this.centerX + this.width, this.centerY - this.height,\n                    this.centerX + this.width, this.centerY + this.height,\n                    this.centerX - this.width, this.centerY + this.height\n                ]), this.gl.STATIC_DRAW);\n            }\n        };\n        Rendering.prototype.setViewPort = function (width, height) {\n            this.gl.viewport(0, 0, width, height);\n        };\n        Rendering.prototype.resizeCanvas = function (parent, resolution) {\n            if (resolution)\n                this.resolution = resolution;\n            var width = parent.clientWidth / this.resolution;\n            var height = parent.clientHeight / this.resolution;\n            this.canvas.width = width;\n            this.canvas.height = height;\n            this.canvas.style.width = parent.clientWidth + 'px';\n            this.canvas.style.height = parent.clientHeight + 'px';\n            this.uniforms.screenWidth = width;\n            this.uniforms.screenHeight = height;\n            this.surfaceCorners();\n            this.setViewPort(this.canvas.width, this.canvas.height);\n        };\n        Rendering.prototype.getCurrentUniforms = function () {\n            return this.currentTimeFragment.entityShader.uniformsCache;\n        };\n        Rendering.prototype.updateUniforms = function () {\n            throw \"Not yet implemented\";\n        };\n        Rendering.prototype.renderEntities = function (ent, ts) {\n            this.uniforms.time = ts;\n            this.uniforms.timeTotal = (performance.now() - this.animationStartTime);\n            this.gl.useProgram(ent.glProgram);\n            ent.render(this);\n            this.animationFrameCount++;\n        };\n        Rendering.prototype.addTexture = function (ent, entityTexture) {\n            ent.textures.push(entityTexture);\n        };\n        Rendering.prototype.bindTexture = function (ent, entityTexture, c) {\n            var gl = this.gl;\n            gl.activeTexture(gl.TEXTURE0 + (2 + c));\n            gl.bindTexture(gl.TEXTURE_2D, entityTexture.texture);\n            gl.uniform1i(gl.getUniformLocation(ent.glProgram, entityTexture.name), 2 + c);\n        };\n        return Rendering;\n    }());\n    Demolished.Rendering = Rendering;\n})(Demolished = exports.Demolished || (exports.Demolished = {}));\n\n\n//# sourceURL=webpack:///./src/demolished.js?");

/***/ }),

/***/ "./src/demolishedEntity.js":
/*!*********************************!*\
  !*** ./src/demolishedEntity.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar demolishedModels_1 = __webpack_require__(/*! ./demolishedModels */ \"./src/demolishedModels.js\");\nvar demolishedLoader_1 = __webpack_require__(/*! ./demolishedLoader */ \"./src/demolishedLoader.js\");\nvar DemolishedShaderResource = (function () {\n    function DemolishedShaderResource() {\n        throw \"not yet mimplamented\";\n    }\n    return DemolishedShaderResource;\n}());\nexports.DemolishedShaderResource = DemolishedShaderResource;\nvar EntityTexture = (function () {\n    function EntityTexture(image, name, width, height, assetType) {\n        this.image = image;\n        this.name = name;\n        this.width = width;\n        this.height = height;\n        this.assetType = assetType;\n    }\n    return EntityTexture;\n}());\nexports.EntityTexture = EntityTexture;\nvar EntityBase = (function () {\n    function EntityBase(gl) {\n        this.gl = gl;\n        this.actions = new Map();\n    }\n    EntityBase.prototype.cacheUniformLocation = function (label) {\n        this.uniformsCache.set(label, this.gl.getUniformLocation(this.glProgram, label));\n    };\n    return EntityBase;\n}());\nexports.EntityBase = EntityBase;\nvar ShaderEntity = (function (_super) {\n    __extends(ShaderEntity, _super);\n    function ShaderEntity(gl, name, w, h, textures, shared) {\n        var _this = _super.call(this, gl) || this;\n        _this.gl = gl;\n        _this.name = name;\n        _this.w = w;\n        _this.h = h;\n        _this.textures = textures;\n        _this.shared = shared;\n        _this.uniformsCache = new Map();\n        _this.loadShaders().then(function (numOfShaders) {\n            if (numOfShaders > -1) {\n                _this.initShader();\n                _this.target = _this.createRenderTarget(_this.w, _this.h);\n                _this.backTarget = _this.createRenderTarget(_this.w, _this.h);\n            }\n        });\n        return _this;\n    }\n    ShaderEntity.prototype.addBuffer = function (key) {\n        throw \"Not yet implemented\";\n    };\n    ShaderEntity.prototype.render = function (engine) {\n        var gl = this.gl;\n        var ent = this;\n        gl.uniform1f(ent.uniformsCache.get('time'), engine.uniforms.time / 1000.);\n        gl.uniform1f(ent.uniformsCache.get(\"timetotal\"), engine.uniforms.timeTotal / 1000.);\n        gl.uniform4fv(ent.uniformsCache.get(\"datetime\"), engine.uniforms.datetime);\n        gl.uniform1f(ent.uniformsCache.get(\"playbacktime\"), engine.audio.currentTime);\n        gl.uniform1i(ent.uniformsCache.get(\"frameId\"), engine.animationFrameCount);\n        gl.uniform1i(ent.uniformsCache.get(\"subEffectId\"), ent.subEffectId);\n        gl.uniform2f(ent.uniformsCache.get(\"mouse\"), engine.uniforms.mouseX, engine.uniforms.mouseY);\n        gl.uniform2f(ent.uniformsCache.get(\"resolution\"), engine.uniforms.screenWidth, engine.uniforms.screenHeight);\n        gl.bindBuffer(gl.ARRAY_BUFFER, ent.mainBuffer);\n        gl.vertexAttribPointer(ent.positionAttribute, 2, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, engine.webGLbuffer);\n        gl.vertexAttribPointer(ent.vertexPosition, 2, gl.FLOAT, false, 0, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, ent.backTarget.texture);\n        gl.uniform1i(gl.getUniformLocation(ent.glProgram, \"backbuffer\"), 1);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, engine.fftTexture);\n        gl.uniform1i(gl.getUniformLocation(ent.glProgram, \"fft\"), 0);\n        ent.textures.forEach(function (asset, index) {\n            engine.bindTexture(ent, asset, index);\n        });\n        gl.bindFramebuffer(gl.FRAMEBUFFER, ent.target.frameBuffer);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n        ent.swapBuffers();\n    };\n    ShaderEntity.prototype.addAction = function (key, fn) {\n        this.actions.set(key, fn);\n    };\n    ShaderEntity.prototype.runAction = function (key, tm) {\n        try {\n            this.actions.get(key)(this, tm);\n        }\n        catch (_a) {\n            console.warn(this);\n        }\n    };\n    ShaderEntity.prototype.removeAction = function (key) {\n        return this.actions.delete(key);\n    };\n    Object.defineProperty(ShaderEntity.prototype, \"vertexHeader\", {\n        get: function () {\n            var header = \"\";\n            header += \"#version 300 es\\n\" +\n                \"#ifdef GL_ES\\n\" +\n                \"precision highp float;\\n\" +\n                \"precision highp int;\\n\" +\n                \"precision mediump sampler3D;\\n\" +\n                \"#endif\\n\";\n            return header;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ShaderEntity.prototype, \"fragmentHeader\", {\n        get: function () {\n            var header = \"\";\n            header += \"#version 300 es\\n\" +\n                \"#ifdef GL_ES\\n\" +\n                \"precision highp float;\\n\" +\n                \"precision highp int;\\n\" +\n                \"precision mediump sampler3D;\\n\" +\n                \"#endif\\n\";\n            return header;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShaderEntity.prototype.reset = function () {\n        throw \"not yet implemented\";\n    };\n    ShaderEntity.prototype.createRenderTarget = function (width, height) {\n        var gl = this.gl;\n        var target = new demolishedModels_1.RenderTarget(gl.createFramebuffer(), gl.createRenderbuffer(), gl.createTexture());\n        gl.bindTexture(gl.TEXTURE_2D, target.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, target.frameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target.texture, 0);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, target.renderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target.renderBuffer);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return target;\n    };\n    ShaderEntity.prototype.loadShaders = function () {\n        var _this = this;\n        var urls = new Array();\n        urls.push(\"entities/shaders/\" + this.name + \"/fragment.glsl\");\n        urls.push(\"entities/shaders/\" + this.name + \"/vertex.glsl\");\n        return Promise.all(urls.map(function (url) {\n            return demolishedLoader_1.default(url).then(function (resp) { return resp.text(); });\n        })).then(function (result) {\n            _this.fragmentShader = _this.fragmentHeader + result[0];\n            _this.vertexShader = _this.vertexHeader + result[1];\n            return urls.length;\n        }).catch(function (reason) {\n            _this.onError(reason);\n            return -1;\n        });\n    };\n    ShaderEntity.prototype.compile = function (fs, vs) {\n        if (vs) {\n            this.vertexShader = vs;\n        }\n        this.fragmentShader = fs;\n        this.initShader();\n    };\n    ShaderEntity.prototype.onSuccess = function (shader) {\n    };\n    ShaderEntity.prototype.onError = function (err) {\n    };\n    ShaderEntity.prototype.createTextureFromImage = function (width, height, image) {\n        var gl = this.gl;\n        var texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        return texture;\n    };\n    ShaderEntity.prototype.initShader = function () {\n        var _this = this;\n        var gl = this.gl;\n        this.mainBuffer = gl.createBuffer();\n        this.glProgram = gl.createProgram();\n        var vs = this.createShader(gl, this.vertexShader, gl.VERTEX_SHADER);\n        var fs = this.createShader(gl, this.fragmentShader, gl.FRAGMENT_SHADER);\n        gl.attachShader(this.glProgram, vs);\n        gl.attachShader(this.glProgram, fs);\n        gl.linkProgram(this.glProgram);\n        this.cacheUniformLocation('fft');\n        this.cacheUniformLocation(\"subEffectId\");\n        this.cacheUniformLocation(\"playbacktime\");\n        this.cacheUniformLocation('time');\n        this.cacheUniformLocation(\"datetime\");\n        this.cacheUniformLocation('frameId');\n        this.cacheUniformLocation(\"timetotal\");\n        this.cacheUniformLocation('mouse');\n        this.cacheUniformLocation('resolution');\n        this.cacheUniformLocation(\"backbuffer\");\n        this.subEffectId = 0;\n        this.frameId = 0;\n        this.positionAttribute = 0;\n        gl.enableVertexAttribArray(this.positionAttribute);\n        this.vertexPosition = gl.getAttribLocation(this.glProgram, \"pos\");\n        gl.enableVertexAttribArray(this.vertexPosition);\n        this.textures.forEach(function (asset) {\n            asset.texture = _this.createTextureFromImage(asset.width, asset.height, asset.image);\n        });\n        gl.useProgram(this.glProgram);\n    };\n    ShaderEntity.prototype.swapBuffers = function () {\n        var tmp = this.target;\n        this.target = this.backTarget;\n        this.backTarget = tmp;\n    };\n    ShaderEntity.prototype.createShader = function (gl, src, type) {\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, src);\n        gl.compileShader(shader);\n        var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!success) {\n            this.onError(gl.getShaderInfoLog(shader));\n        }\n        else {\n            this.onSuccess(shader);\n        }\n        return shader;\n    };\n    return ShaderEntity;\n}(EntityBase));\nexports.ShaderEntity = ShaderEntity;\n\n\n//# sourceURL=webpack:///./src/demolishedEntity.js?");

/***/ }),

/***/ "./src/demolishedLoader.js":
/*!*********************************!*\
  !*** ./src/demolishedLoader.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction loadResource(file) {\n    var promise = new Promise(function (resolve, reject) {\n        var wrapper = new XMLHttpRequestWrapper(file, resolve, reject);\n        return wrapper;\n    });\n    return promise;\n}\nexports.default = loadResource;\nvar XMLHttpRequestWrapper = (function () {\n    function XMLHttpRequestWrapper(file, resolve, reject) {\n        this.file = file;\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", file);\n        xhr.responseType = \"blob\";\n        xhr.onloadend = function (evt) {\n            try {\n                if (xhr.status == 404)\n                    throw \"failed to loadResource \" + file;\n                resolve(new ResponseWrapper(xhr.response));\n            }\n            catch (err) {\n                reject(xhr.statusText);\n            }\n        };\n        xhr.onerror = function (err) {\n            reject(err);\n        };\n        xhr.send();\n        this.xhr = xhr;\n    }\n    return XMLHttpRequestWrapper;\n}());\nvar ResponseWrapper = (function () {\n    function ResponseWrapper(blobData) {\n        this.blobData = blobData;\n    }\n    ResponseWrapper.prototype.arrayBuffer = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onload = function () {\n                resolve(reader.result);\n            };\n            reader.readAsArrayBuffer(_this.blobData);\n        });\n    };\n    ResponseWrapper.prototype.blob = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            resolve(_this.blobData);\n        });\n    };\n    ResponseWrapper.prototype.text = function () {\n        var _this = this;\n        var promise = new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onload = function () {\n                resolve(reader.result);\n            };\n            reader.readAsText(_this.blobData);\n        });\n        return promise;\n    };\n    ResponseWrapper.prototype.json = function () {\n        var _this = this;\n        var promise = new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onload = function () {\n                resolve(JSON.parse(reader.result));\n            };\n            reader.readAsText(_this.blobData);\n        });\n        return promise;\n    };\n    return ResponseWrapper;\n}());\nexports.ResponseWrapper = ResponseWrapper;\n\n\n//# sourceURL=webpack:///./src/demolishedLoader.js?");

/***/ }),

/***/ "./src/demolishedModels.js":
/*!*********************************!*\
  !*** ./src/demolishedModels.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\nvar RenderTarget = (function () {\n    function RenderTarget(frameBuffer, renderBuffer, texture) {\n        this.frameBuffer = frameBuffer;\n        this.renderBuffer = renderBuffer;\n        this.texture = texture;\n    }\n    return RenderTarget;\n}());\nexports.RenderTarget = RenderTarget;\nvar Graph = (function () {\n    function Graph() {\n    }\n    return Graph;\n}());\nexports.Graph = Graph;\nvar TimeFragment = (function () {\n    function TimeFragment(entity, start, stop, subeffects) {\n        this.entity = entity;\n        this.start = start;\n        this.stop = stop;\n        subeffects ? this.subeffects = subeffects : this.subeffects = new Array();\n        this._subeffects = this.subeffects.map(function (a) { return a; });\n    }\n    TimeFragment.prototype.reset = function () {\n        this.subeffects = this._subeffects.map(function (a) { return a; });\n    };\n    TimeFragment.prototype.setEntity = function (ent) {\n        this.entityShader = ent;\n    };\n    TimeFragment.prototype.init = function () {\n        var _this = this;\n        try {\n            this.subeffects.forEach(function (interval) {\n                var shader = _this.entityShader;\n                shader.addAction(\"$subeffects\", function (ent, tm) {\n                    if (_this.subeffects.find(function (a) { return a <= tm; })) {\n                        ent.subEffectId++;\n                        _this.subeffects.shift();\n                    }\n                });\n            });\n        }\n        catch (err) {\n            console.warn(err);\n        }\n    };\n    return TimeFragment;\n}());\nexports.TimeFragment = TimeFragment;\nvar Uniforms = (function () {\n    function Uniforms(width, height) {\n        this.screenWidth = width;\n        this.screenHeight = height;\n        this.time = 0;\n        this.timeTotal = 0;\n        this.mouseX = 0.5;\n        this.mouseY = 0.5;\n    }\n    Object.defineProperty(Uniforms.prototype, \"datetime\", {\n        get: function () {\n            var d = new Date();\n            return [d.getFullYear(), d.getMonth(), d.getDate(),\n                d.getHours() * 60.0 * 60 + d.getMinutes() * 60 + d.getSeconds() + d.getMilliseconds() / 1000.0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Uniforms.prototype.setScreen = function (w, h) {\n        this.screenWidth = w;\n        this.screenWidth = h;\n    };\n    return Uniforms;\n}());\nexports.Uniforms = Uniforms;\nvar Effect = (function () {\n    function Effect() {\n        this.textures = new Array();\n        this.type = 0;\n    }\n    return Effect;\n}());\nexports.Effect = Effect;\nvar AudioAnalyzerSettings = (function () {\n    function AudioAnalyzerSettings(fftSize, smoothingTimeConstant, minDecibels, maxDecibels) {\n        this.fftSize = fftSize;\n        this.smoothingTimeConstant = smoothingTimeConstant;\n        this.minDecibels = minDecibels;\n        this.maxDecibels = maxDecibels;\n    }\n    return AudioAnalyzerSettings;\n}());\nexports.AudioAnalyzerSettings = AudioAnalyzerSettings;\nvar AudioSettings = (function () {\n    function AudioSettings(audioFile, audioAnalyzerSettings, duration, bpm) {\n        this.audioAnalyzerSettings = audioAnalyzerSettings;\n        this.bpm = bpm;\n        this.audioFile;\n        this.duration = duration;\n    }\n    return AudioSettings;\n}());\nexports.AudioSettings = AudioSettings;\n\n\n//# sourceURL=webpack:///./src/demolishedModels.js?");

/***/ }),

/***/ "./src/demolishedSound.js":
/*!********************************!*\
  !*** ./src/demolishedSound.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar demolishedLoader_1 = __webpack_require__(/*! ./demolishedLoader */ \"./src/demolishedLoader.js\");\nvar DemolishedSoundPeaks = (function () {\n    function DemolishedSoundPeaks() {\n    }\n    DemolishedSoundPeaks.peaks = function (buffer, size) {\n        var sampleSize = buffer.length / size;\n        var sampleStep = ~~(sampleSize / 10) || 1;\n        var channels = buffer.numberOfChannels;\n        var peaks;\n        for (var c = 0; c < channels; c++) {\n            var chan = buffer.getChannelData(c);\n            for (var i = 0; i < size; i++) {\n                var start = ~~(i * sampleSize);\n                var end = ~~(start + sampleSize);\n                var min = 0;\n                var max = 0;\n                for (var j = start; j < end; j += sampleStep) {\n                    var value = chan[j];\n                    if (value > max) {\n                        max = value;\n                    }\n                    if (value < min) {\n                        min = value;\n                    }\n                }\n                if (c == 0 || max > peaks[2 * i]) {\n                    peaks[2 * i] = max;\n                }\n                if (c == 0 || min < peaks[2 * i + 1]) {\n                    peaks[2 * i + 1] = min;\n                }\n            }\n        }\n        return peaks;\n    };\n    return DemolishedSoundPeaks;\n}());\nexports.DemolishedSoundPeaks = DemolishedSoundPeaks;\nvar DemolishedSoundBase = (function () {\n    function DemolishedSoundBase() {\n    }\n    return DemolishedSoundBase;\n}());\nexports.DemolishedSoundBase = DemolishedSoundBase;\nvar DemolishedSIDMusic = (function (_super) {\n    __extends(DemolishedSIDMusic, _super);\n    function DemolishedSIDMusic() {\n        return _super.call(this) || this;\n    }\n    DemolishedSIDMusic.prototype.getTracks = function () {\n        throw \"not yet implemented\";\n    };\n    Object.defineProperty(DemolishedSIDMusic.prototype, \"textureSize\", {\n        get: function () {\n            return 16;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DemolishedSIDMusic.prototype.play = function () {\n        this.sid.play();\n    };\n    DemolishedSIDMusic.prototype.stop = function () {\n        this.sid.pause();\n    };\n    DemolishedSIDMusic.prototype.mute = function (ismuted) {\n        throw \"not implemented\";\n    };\n    DemolishedSIDMusic.prototype.getFrequenceData = function () {\n        return this.sid.getFreqByteData();\n    };\n    Object.defineProperty(DemolishedSIDMusic.prototype, \"duration\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DemolishedSIDMusic.prototype, \"currentTime\", {\n        get: function () {\n            return this.sid._currentPlaytime;\n        },\n        set: function (n) {\n            return;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DemolishedSIDMusic.prototype.createAudio = function (settings) {\n        var useLess = function () { };\n        var ScriptNodePlayer = window[\"ScriptNodePlayer\"];\n        var self = this;\n        return new Promise(function (resolve, reject) {\n            ScriptNodePlayer.createInstance(new SIDBackendAdapter(), \"\", [], true, useLess, function () {\n                self.sid = this;\n                resolve(true);\n            }, useLess, useLess);\n            ScriptNodePlayer.getInstance().loadMusicFromURL(settings.audioFile, {\n                basePath: \"\"\n            }, useLess, useLess);\n        });\n    };\n    return DemolishedSIDMusic;\n}(DemolishedSoundBase));\nexports.DemolishedSIDMusic = DemolishedSIDMusic;\nvar DemolishedStreamingMusic = (function (_super) {\n    __extends(DemolishedStreamingMusic, _super);\n    function DemolishedStreamingMusic() {\n        return _super.call(this) || this;\n    }\n    DemolishedStreamingMusic.prototype.getTracks = function () {\n        var ms = this.audio.captureStream();\n        return ms.getAudioTracks();\n    };\n    Object.defineProperty(DemolishedStreamingMusic.prototype, \"textureSize\", {\n        get: function () {\n            return 32;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DemolishedStreamingMusic.prototype.getFrequenceData = function () {\n        var bufferLength = this.audioAnalyser.frequencyBinCount;\n        var freqArray = new Uint8Array(bufferLength);\n        this.audioAnalyser.getByteFrequencyData(freqArray);\n        return freqArray;\n    };\n    DemolishedStreamingMusic.prototype.play = function () {\n        this.audio.play();\n    };\n    DemolishedStreamingMusic.prototype.stop = function () {\n        this.audio.pause();\n    };\n    DemolishedStreamingMusic.prototype.mute = function (ismuted) {\n        this.audio.muted = ismuted;\n    };\n    Object.defineProperty(DemolishedStreamingMusic.prototype, \"duration\", {\n        get: function () {\n            return Math.floor(this.audio.duration * 1000.);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DemolishedStreamingMusic.prototype, \"currentTime\", {\n        get: function () {\n            return this.audio.currentTime;\n        },\n        set: function (time) {\n            this.audio.currentTime = time;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DemolishedStreamingMusic.prototype.createAudio = function (audioSettings) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            demolishedLoader_1.default(audioSettings.audioFile).then(function (resp) {\n                return resp.arrayBuffer().then(function (buffer) {\n                    var audioCtx = new AudioContext();\n                    audioCtx.decodeAudioData(buffer, function (audioData) {\n                        var offlineCtx = new OfflineAudioContext(1, audioData.length, audioData.sampleRate);\n                        var filteredSource = offlineCtx.createBufferSource();\n                        filteredSource.buffer = audioData;\n                        filteredSource.connect(offlineCtx.destination);\n                        var filterOffline = offlineCtx.createBiquadFilter();\n                        filterOffline.type = 'highpass';\n                        filterOffline.Q.value = 2;\n                        filterOffline.frequency.value = 2000;\n                        filteredSource.connect(filterOffline);\n                        filterOffline.connect(offlineCtx.destination);\n                        filteredSource.start(0);\n                        var source = audioCtx.createBufferSource();\n                        source.buffer = audioData;\n                        source.connect(audioCtx.destination);\n                        offlineCtx.startRendering().then(function (renderedBuffer) {\n                            var audioCtx = new AudioContext();\n                            var audioEl = new Audio();\n                            audioEl.preload = \"auto\";\n                            audioEl.src = audioSettings.audioFile;\n                            audioEl.crossOrigin = \"anonymous\";\n                            var onLoad = function () {\n                                var source = audioCtx.createMediaElementSource(audioEl);\n                                var analyser = audioCtx.createAnalyser();\n                                analyser.smoothingTimeConstant = audioSettings.audioAnalyzerSettings.smoothingTimeConstant;\n                                analyser.fftSize = audioSettings.audioAnalyzerSettings.fftSize;\n                                _this.audio = audioEl;\n                                source.connect(analyser);\n                                analyser.connect(audioCtx.destination);\n                                _this.audioAnalyser = analyser;\n                                resolve(true);\n                            };\n                            onLoad();\n                            var bufferSource = audioCtx.createBufferSource();\n                            bufferSource.buffer = renderedBuffer;\n                        });\n                    });\n                });\n            });\n        });\n    };\n    return DemolishedStreamingMusic;\n}(DemolishedSoundBase));\nexports.DemolishedStreamingMusic = DemolishedStreamingMusic;\n\n\n//# sourceURL=webpack:///./src/demolishedSound.js?");

/***/ })

/******/ });