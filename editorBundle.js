!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){var r;r=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),x=h&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(h=!1,l=!0);var C=y&&(c||h&&(null==x||x<12.11)),S=n||s&&a>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,L=function(e,t){var n=e.className,r=k(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return M(e).appendChild(t)}function A(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function _(e,t,n,r){var i=A(e,t,n,r);return i.setAttribute("role","presentation"),i}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function P(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function R(e,t){var n=e.className;k(t).test(n)||(e.className+=(n?" ":"")+t)}function D(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!k(n[r]).test(t)&&(t+=" "+n[r]);return t}T=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var F=function(e){e.select()};function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function H(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function W(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,s=i||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}g?F=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(F=function(e){try{e.select()}catch(e){}});var B=function(){this.id=null};function I(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}B.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var z=30,U={toString:function(){return"CodeMirror.Pass"}},X={scroll:!1},j={origin:"*mouse"},G={origin:"+move"};function V(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var K=[""];function Y(e){for(;K.length<=e;)K.push(q(K)+" ");return K[e]}function q(e){return e[e.length-1]}function $(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&H(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function se(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function ae(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function le(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ce(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ue(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function he(e){if(null==e.parent)return null;for(var t=e.parent,n=I(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function fe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function de(e,t){return t>=e.first&&t<e.first+e.size}function pe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function me(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==me(e,t)}function ye(e){return ge(e.line,e.ch)}function be(e,t){return me(e,t)<0?t:e}function we(e,t){return me(e,t)<0?e:t}function xe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ce(e,t){if(t.line<e.first)return ge(e.first,0);var n=e.first+e.size-1;return t.line>n?ge(n,ae(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ge(e.line,t):n<0?ge(e.line,0):e}(t,ae(e,t.line).text.length)}function Se(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Ce(e,t[r]);return n}var ke=!1,Te=!1;function Le(e,t,n){this.marker=e,this.from=t,this.to=n}function Me(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ee(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ae(e,t){if(t.full)return null;var n=de(e,t.from.line)&&ae(e,t.from.line).markedSpans,r=de(e,t.to.line)&&ae(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=0==me(t.from,t.to),a=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Le(s,o.from,a?null:o.to))}}return r}(n,i,s),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Le(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,s),c=1==t.text.length,u=q(t.text).length+(c?i:0);if(a)for(var h=0;h<a.length;++h){var f=a[h];if(null==f.to){var d=Me(l,f.marker);d?c&&(f.to=null==d.to?null:d.to+u):f.to=i}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=u),null==g.from)Me(a,g.marker)||(g.from=u,c&&(a||(a=[])).push(g));else g.from+=u,c&&(a||(a=[])).push(g)}a&&(a=_e(a)),l&&l!=a&&(l=_e(l));var m=[a];if(!c){var v,y=t.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new Le(a[b].marker,null,null));for(var w=0;w<y;++w)m.push(v);m.push(l)}return m}function _e(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Oe(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Pe(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Re(e){return e.inclusiveLeft?-1:0}function De(e){return e.inclusiveRight?1:0}function Fe(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=me(r.from,i.from)||Re(e)-Re(t);if(o)return-o;var s=me(r.to,i.to)||De(e)-De(t);return s||t.id-e.id}function Ne(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Fe(n,i.marker)<0)&&(n=i.marker);return n}function He(e){return Ne(e,!0)}function We(e){return Ne(e,!1)}function Be(e,t,n,r,i){var o=ae(e,t),s=Te&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=me(c.from,n)||Re(l.marker)-Re(i),h=me(c.to,r)||De(l.marker)-De(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?me(c.to,n)>=0:me(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?me(c.from,r)<=0:me(c.from,r)<0)))return!0}}}function Ie(e){for(var t;t=He(e);)e=t.find(-1,!0).line;return e}function ze(e,t){var n=ae(e,t),r=Ie(n);return n==r?t:he(r)}function Ue(e,t){if(t>e.lastLine())return t;var n,r=ae(e,t);if(!Xe(e,r))return t;for(;n=We(r);)r=n.find(1,!0).line;return he(r)+1}function Xe(e,t){var n=Te&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&je(e,t,r))return!0}}function je(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return je(e,r.line,Me(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&je(e,t,i))return!0}function Ge(e){for(var t=0,n=(e=Ie(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function Ve(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=He(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=We(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ke(e){var t=e.display,n=e.doc;t.maxLine=ae(n,n.first),t.maxLineLength=Ve(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ve(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Ye=null;function qe(e,t,n){var r;Ye=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Ye=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Ye=i)}return null!=r?r:Ye}var $e=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(e,t,n){this.level=e,this.from=t,this.to=n}return function(l,c){var u="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!n.test(l))return!1;for(var h,f=l.length,d=[],p=0;p<f;++p)d.push((h=l.charCodeAt(p))<=247?e.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?t.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");for(var g=0,m=u;g<f;++g){var v=d[g];"m"==v?d[g]=m:m=v}for(var y=0,b=u;y<f;++y){var w=d[y];"1"==w&&"r"==b?d[y]="n":i.test(w)&&(b=w,"r"==w&&(d[y]="R"))}for(var x=1,C=d[0];x<f-1;++x){var S=d[x];"+"==S&&"1"==C&&"1"==d[x+1]?d[x]="1":","!=S||C!=d[x+1]||"1"!=C&&"n"!=C||(d[x]=C),C=S}for(var k=0;k<f;++k){var T=d[k];if(","==T)d[k]="N";else if("%"==T){var L=void 0;for(L=k+1;L<f&&"%"==d[L];++L);for(var M=k&&"!"==d[k-1]||L<f&&"1"==d[L]?"1":"N",E=k;E<L;++E)d[E]=M;k=L-1}}for(var A=0,_=u;A<f;++A){var O=d[A];"L"==_&&"1"==O?d[A]="L":i.test(O)&&(_=O)}for(var P=0;P<f;++P)if(r.test(d[P])){var R=void 0;for(R=P+1;R<f&&r.test(d[R]);++R);for(var D="L"==(P?d[P-1]:u),F=D==("L"==(R<f?d[R]:u))?D?"L":"R":u,N=P;N<R;++N)d[N]=F;P=R-1}for(var H,W=[],B=0;B<f;)if(o.test(d[B])){var I=B;for(++B;B<f&&o.test(d[B]);++B);W.push(new a(0,I,B))}else{var z=B,U=W.length;for(++B;B<f&&"L"!=d[B];++B);for(var X=z;X<B;)if(s.test(d[X])){z<X&&W.splice(U,0,new a(1,z,X));var j=X;for(++X;X<B&&s.test(d[X]);++X);W.splice(U,0,new a(2,j,X)),z=X}else++X;z<B&&W.splice(U,0,new a(1,z,B))}return 1==W[0].level&&(H=l.match(/^\s+/))&&(W[0].from=H[0].length,W.unshift(new a(0,0,H[0].length))),1==q(W).level&&(H=l.match(/\s+$/))&&(q(W).to-=H[0].length,W.push(new a(0,f-H[0].length,f))),"rtl"==c?W.reverse():W}}();function Ze(e,t){var n=e.order;return null==n&&(n=e.order=$e(e.text,t)),n}var Qe=[],Je=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Qe).concat(n)}};function et(e,t){return e._handlers&&e._handlers[t]||Qe}function tt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=I(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function nt(e,t){var n=et(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function rt(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),nt(e,n||t.type,e,t),ct(t)||t.codemirrorIgnore}function it(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==I(n,t[r])&&n.push(t[r])}function ot(e,t){return et(e,t).length>0}function st(e){e.prototype.on=function(e,t){Je(this,e,t)},e.prototype.off=function(e,t){tt(this,e,t)}}function at(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function lt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ct(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ut(e){at(e),lt(e)}function ht(e){return e.target||e.srcElement}function ft(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var dt,pt,gt=function(){if(s&&a<9)return!1;var e=A("div");return"draggable"in e||"dragDrop"in e}();function mt(e){if(null==dt){var t=A("span","​");E(e,A("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(dt=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=dt?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function vt(e){if(null!=pt)return pt;var t=E(e,document.createTextNode("AخA")),n=T(t,0,1).getBoundingClientRect(),r=T(t,1,2).getBoundingClientRect();return M(e),!(!n||n.left==n.right)&&(pt=r.right-n.right<3)}var yt,bt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},xt="oncopy"in(yt=A("div"))||(yt.setAttribute("oncopy","return;"),"function"==typeof yt.oncopy),Ct=null;var St={},kt={};function Tt(e){if("string"==typeof e&&kt.hasOwnProperty(e))e=kt[e];else if(e&&"string"==typeof e.name&&kt.hasOwnProperty(e.name)){var t=kt[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Tt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Tt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Lt(e,t){t=Tt(t);var n=St[t.name];if(!n)return Lt(e,"text/plain");var r=n(e,t);if(Mt.hasOwnProperty(t.name)){var i=Mt[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var Mt={};function Et(e,t){H(t,Mt.hasOwnProperty(e)?Mt[e]:Mt[e]={})}function At(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function _t(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ot(e,t,n){return!e.startState||e.startState(t,n)}var Pt=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Pt.prototype.eol=function(){return this.pos>=this.string.length},Pt.prototype.sol=function(){return this.pos==this.lineStart},Pt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Pt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Pt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Pt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Pt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Pt.prototype.skipToEnd=function(){this.pos=this.string.length},Pt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Pt.prototype.backUp=function(e){this.pos-=e},Pt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=W(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},Pt.prototype.indentation=function(){return W(this.string,null,this.tabSize)-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},Pt.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Pt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Pt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Pt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Dt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0};function Ft(e,t,n,r){var i=[e.state.modeGen],o={};jt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var s=n.state,a=function(r){var s=e.state.overlays[r],a=1,l=0;n.state=!0,jt(e,t.text,s.mode,n,function(e,t){for(var n=a;l<e;){var r=i[a];r>e&&i.splice(a,1,e,i[a+1],r),a+=2,l=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,a-n,e,"overlay "+t),a=n+2;else for(;n<a;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o)},l=0;l<e.state.overlays.length;++l)a(l);return n.state=s,{styles:i,classes:o.bgClass||o.textClass?o:null}}function Nt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ht(e,he(t)),i=t.text.length>e.options.maxHighlightLength&&At(e.doc.mode,r.state),o=Ft(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ht(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Dt(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=ae(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof Rt?c.lookAhead:0)<=o.modeFrontier))return a;var u=W(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(e,t,n),s=o>r.first&&ae(r,o-1).stateAfter,a=s?Dt.fromSaved(r,s,o):new Dt(r,Ot(r.mode),o);return r.iter(o,t,function(n){Wt(e,n.text,a);var r=a.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()}),n&&(r.modeFrontier=a.line),a}function Wt(e,t,n,r){var i=e.doc.mode,o=new Pt(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&Bt(i,n.state);!o.eol();)It(i,o,n.state),o.start=o.pos}function Bt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=_t(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function It(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=_t(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Dt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Dt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Dt.fromSaved=function(e,t,n){return t instanceof Rt?new Dt(e,At(e.mode,t.state),n,t.lookAhead):new Dt(e,At(e.mode,t),n)},Dt.prototype.save=function(e){var t=!1!==e?At(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Rt(t,this.maxLookAhead):t};var zt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ut(e,t,n,r){var i,o,s=e.doc,a=s.mode,l=ae(s,(t=Ce(s,t)).line),c=Ht(e,t.line,n),u=new Pt(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=It(a,u,c.state),r&&o.push(new zt(u,i,At(s.mode,c.state)));return r?o:new zt(u,i,c.state)}function Xt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function jt(e,t,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,h=new Pt(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&Xt(Bt(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&Wt(e,t,r,h.pos),h.pos=t.length,l=null):l=Xt(It(n,h,r.state,f),o),f){var d=f[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||u!=l){for(;c<h.start;)i(c=Math.min(h.start,c+5e3),u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);i(p,u),c=p}}var Gt=function(e,t,n){this.text=e,Pe(this,t),this.height=n?n(this):1};function Vt(e){e.parent=null,Oe(e)}Gt.prototype.lineNo=function(){return he(this)},st(Gt);var Kt={},Yt={};function qt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function $t(e,t){var n=_("span",null,null,l?"padding-right: .1px":null),r={pre:_("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(s||l)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Qt,vt(e.display.measure)&&(a=Ze(o,e.doc.direction))&&(r.addToken=Jt(r.addToken,a)),r.map=[],tn(o,r,Nt(e,o,t!=e.display.externalMeasured&&he(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=D(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=D(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(mt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return nt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=D(r.pre.className,r.textClass||"")),r}function Zt(e){var t=A("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,f=!1;if(h.test(t)){c=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var p=h.exec(t),g=p?p.index-d:t.length-d;if(g){var m=document.createTextNode(u.slice(d,d+g));s&&a<9?c.appendChild(A("span",[m])):c.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;d+=g+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=c.appendChild(A("span",Y(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild(A("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?c.appendChild(A("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||f||l){var w=n||"";r&&(w+=r),i&&(w+=i);var x=A("span",[c],w,l);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(c)}}function Jt(e,t){return function(n,r,i,o,s,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,f=0;f<t.length&&!((h=t[f]).to>c&&h.from<=c);f++);if(h.to>=u)return e(n,r,i,o,s,a,l);e(n,r.slice(0,h.to-c),i,o,null,a,l),o=null,r=r.slice(h.to-c),c=h.to}}}function en(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function tn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var s,a,l,c,u,h,f,d=i.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=h=a="",f=null,v=1/0;for(var y=[],b=void 0,w=0;w<r.length;++w){var x=r[w],C=x.marker;"bookmark"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),C.className&&(l+=" "+C.className),C.css&&(a=(a?a+";":"")+C.css),C.startStyle&&x.from==p&&(u+=" "+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!h&&(h=C.title),C.collapsed&&(!f||Fe(f.marker,C)<0)&&(f=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==v&&(c+=" "+b[S]);if(!f||f.from==p)for(var k=0;k<y.length;++k)en(t,0,y[k]);if(f&&(f.from||0)==p){if(en(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var T=Math.min(d,v);;){if(m){var L=p+m.length;if(!f){var M=L>T?m.slice(0,T-p):m;t.addToken(t,M,s?s+l:l,u,p+M.length==v?c:"",h,a)}if(L>=T){m=m.slice(T-p),p=T;break}p=L,u=""}m=i.slice(o,o=n[g++]),s=qt(n[g++],t.cm.options)}}else for(var E=1;E<n.length;E+=2)t.addToken(t,i.slice(o,o=n[E]),qt(n[E+1],t.cm.options))}function nn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=We(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?he(q(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Xe(e,t)}function rn(e,t,n){for(var r,i=[],o=t;o<n;o=r){var s=new nn(e.doc,ae(e.doc,o),o);r=o+s.size,i.push(s)}return i}var on=null;var sn=null;function an(e,t){var n=et(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);on?r=on.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(ln,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},s=0;s<n.length;++s)o(s)}}function ln(){var e=sn;sn=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?pn(e,t,n,r):"class"==o?dn(e,t):"widget"==o&&gn(e,t,r)}t.changes=null}function un(e){return e.node==e.text&&(e.node=A("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function hn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):$t(e,t)}function fn(e,t){var n=t.text.className,r=hn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,dn(e,t)):n&&(t.text.className=n)}function dn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=un(t);t.background=r.insertBefore(A("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?un(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function pn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=un(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=un(t),a=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(A("div",pe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(A("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);vn(e,t,n)}function mn(e,t,n,r){var i=hn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),dn(e,t),pn(e,t,n,r),vn(e,t,r),t.node}function vn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=un(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=A("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),bn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),an(l,"redraw")}}function bn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function wn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),E(t.display.measure,A("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function xn(e,t){for(var n=ht(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Cn(e){return e.lineSpace.offsetTop}function Sn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function kn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,A("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Tn(e){return z-e.display.nativeBarWidth}function Ln(e){return e.display.scroller.clientWidth-Tn(e)-e.display.barWidth}function Mn(e){return e.display.scroller.clientHeight-Tn(e)-e.display.barHeight}function En(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(he(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function An(e,t,n,r){return Pn(e,On(e,t),n,r)}function _n(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ar(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=he(t),r=_n(e,n);r&&!r.text?r=null:r&&r.changes&&(cn(e,r,n,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=he(t=Ie(t)),r=e.display.externalMeasured=new nn(e.doc,t,n);r.lineN=n;var i=r.built=$t(e,r);return r.text=i.pre,E(e.display.lineMeasure,i.pre),r}(e,t));var i=En(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Pn(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var r=e.options.lineWrapping,i=r&&Ln(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Fn(t.map,n,r),l=o.node,c=o.start,u=o.end,h=o.collapse;if(3==l.nodeType){for(var f=0;f<4;f++){for(;c&&ie(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Nn(T(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ct)return Ct;var t=E(e,A("span","x")),n=t.getBoundingClientRect(),r=T(t,0,1).getBoundingClientRect();return Ct=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var d;c>0&&(h=r="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+tr(e.display),top:p.top,bottom:p.bottom}:Dn}for(var g=i.top-t.rect.top,m=i.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,x=y[b],C={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:x};i.left||i.right||(C.bogus=!0);e.options.singleCursorHeightPerLine||(C.rtop=g,C.rbottom=m);return C}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Dn={left:0,right:0,top:0,bottom:0};function Fn(e,t,n){for(var r,i,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(i=0,o=1,s="left"):t<l?o=(i=t-a)+1:(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-a)-1,t>=l&&(s="right")),null!=i){if(r=e[c+2],a==l&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],s="left";if("right"==n&&i==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:l}}function Nn(e,t){var n=Dn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Hn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Wn(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Hn(e.display.view[t])}function Bn(e){Wn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function In(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zn(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=wn(e.widgets[n]));return t}function Xn(e,t,n,r,i){if(!i){var o=Un(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=Ge(t);if("local"==r?s+=Cn(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:zn());var l=a.left+("window"==r?0:In());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function jn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=In(),i-=zn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function Gn(e,t,n,r,i){return r||(r=ae(e.doc,t.line)),Xn(e,r,An(e,r,t.ch,i),n)}function Vn(e,t,n,r,i,o){function s(t,s){var a=Pn(e,i,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Xn(e,r,a,n)}r=r||ae(e.doc,t.line),i||(i=On(e,r));var a=Ze(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=1==a[t].level;return s(n?e-1:e,r!=n)}var h=qe(a,l,c),f=Ye,d=u(l,h,"before"==c);return null!=f&&(d.other=u(l,f,"before"!=c)),d}function Kn(e,t){var n=0;t=Ce(e.doc,t),e.options.lineWrapping||(n=tr(e.display)*t.ch);var r=ae(e.doc,t.line),i=Ge(r)+Cn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(e,t,n,r,i){var o=ge(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function qn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Yn(r.first,0,null,!0,-1);var i=fe(r,n),o=r.first+r.size-1;if(i>o)return Yn(r.first+r.size-1,ae(r,o).text.length,null,!0,1);t<0&&(t=0);for(var s=ae(r,i);;){var a=Jn(e,s,i,t,n),l=We(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;i=he(s=c.to.line)}}function $n(e,t,n,r){r-=Un(t);var i=t.text.length,o=se(function(t){return Pn(e,n,t-1).bottom<=r},i,0);return{begin:o,end:i=se(function(t){return Pn(e,n,t).top>r},o,i)}}function Zn(e,t,n,r){return n||(n=On(e,t)),$n(e,t,n,Xn(e,t,Pn(e,n,r),"line").top)}function Qn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Jn(e,t,n,r,i){i-=Ge(t);var o=On(e,t),s=Un(t),a=0,l=t.text.length,c=!0,u=Ze(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?function(e,t,n,r,i,o,s){for(var a=$n(e,t,r,s),l=a.begin,c=a.end,u=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=c||d.to<=l)){var p=1!=d.level,g=Pn(e,r,p?Math.min(c,d.to)-1:Math.max(l,d.from)).right,m=g<o?o-g+1e9:g-o;(!u||h>m)&&(u=d,h=m)}}u||(u=i[i.length-1]);u.from<l&&(u={from:l,to:u.to,level:u.level});u.to>c&&(u={from:u.from,to:c,level:u.level});return u}:function(e,t,n,r,i,o,s){var a=se(function(a){var l=i[a],c=1!=l.level;return Qn(Vn(e,ge(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,s,!0)},0,i.length-1),l=i[a];if(a>0){var c=1!=l.level,u=Vn(e,ge(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Qn(u,o,s,!0)&&u.top>s&&(l=i[a-1])}return l})(e,t,n,o,u,r,i);a=(c=1!=h.level)?h.from:h.to-1,l=c?h.to:h.from-1}var f,d,p=null,g=null,m=se(function(t){var n=Pn(e,o,t);return n.top+=s,n.bottom+=s,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=t,g=n),!0)},a,l),v=!1;if(g){var y=r-g.left<g.right-r,b=y==c;m=p+(b?0:1),d=b?"after":"before",f=y?g.left:g.right}else{c||m!=l&&m!=a||m++,d=0==m?"after":m==t.text.length?"before":Pn(e,o,m-(c?1:0)).bottom+s<=i==c?"after":"before";var w=Vn(e,ge(n,m,d),"line",t,o);f=w.left,v=i<w.top||i>=w.bottom}return Yn(n,m=oe(t.text,m,1),d,v,r-f)}function er(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=A("pre");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(A("br"));Rn.appendChild(document.createTextNode("x"))}E(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),M(e.measure),n||1}function tr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx"),n=A("pre",[t]);E(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function nr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[e.options.gutters[s]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[s]]=o.clientWidth;return{fixedPos:rr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ir(e){var t=er(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/tr(e.display)-3);return function(i){if(Xe(e.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function or(e){var t=e.doc,n=ir(e);t.iter(function(e){var t=n(e);t!=e.height&&ue(e,t)})}function sr(e,t,n,r){var i=e.display;if(!n&&"true"==ht(t).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c=qn(e,o,s);if(r&&1==c.xRel&&(l=ae(e.doc,c.line).text).length==c.ch){var u=W(l,l.length,e.options.tabSize)-l.length;c=ge(c.line,Math.max(0,Math.round((o-kn(e.display).left)/tr(e.display))-u))}return c}function ar(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function lr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function cr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&ur(e,a.head,i),l||fr(e,a,o)}}return r}function ur(e,t,n){var r=Vn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(A("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function hr(e,t){return e.top-t.top||e.left-t.left}function fr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),s=kn(e.display),a=s.left,l=Math.max(r.sizerWidth,Ln(e)-r.sizer.offsetLeft)-s.right;function c(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function u(t,n,r){var o,s,u=ae(i,t),h=u.text.length;function f(n,r){return Gn(e,ge(t,n),"div",u,r)}var d=Ze(u,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(d,n||0,null==r?h:r,function(t,i,p,g){var m=f(t,"ltr"==p?"left":"right"),v=f(i-1,"ltr"==p?"right":"left");if("ltr"==p){var y=null==n&&0==t?a:m.left,b=null==r&&i==h?l:v.right;v.top-m.top<=3?c(y,v.top,b-y,v.bottom):(c(y,m.top,null,m.bottom),m.bottom<v.top&&c(a,m.bottom,null,v.top),c(a,v.top,v.right,v.bottom))}else if(t<i){var w=null==n&&0==t?l:m.right,x=null==r&&i==h?a:v.left;if(v.top-m.top<=3)c(x,v.top,w-x,v.bottom);else{var C=a;if(g){var S=Zn(e,u,null,t).end;C=f(S-(/\s/.test(u.text.charAt(S-1))?2:1),"left").left}c(C,m.top,w-C,m.bottom),m.bottom<v.top&&c(a,m.bottom,null,v.top);var k=null;d.length,k=f(Zn(e,u,null,i).begin,"right").right-x,c(x,v.top,k,v.bottom)}}(!o||hr(m,o)<0)&&(o=m),hr(v,o)<0&&(o=v),(!s||hr(m,s)<0)&&(s=m),hr(v,s)<0&&(s=v)}),{start:o,end:s}}var h=t.from(),f=t.to();if(h.line==f.line)u(h.line,h.ch,f.ch);else{var d=ae(i,h.line),p=ae(i,f.line),g=Ie(d)==Ie(p),m=u(h.line,h.ch,g?d.text.length+1:null).end,v=u(f.line,g?0:null,f.ch).start;g&&(m.top<v.top-2?(c(m.right,m.top,null,m.bottom),c(a,v.top,v.left,v.bottom)):c(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&c(a,m.bottom,null,v.top)}n.appendChild(o)}function dr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function pr(e){e.state.focused||(e.display.input.focus(),mr(e))}function gr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vr(e))},100)}function mr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(nt(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),dr(e))}function vr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(nt(e,"blur",e,t),e.state.focused=!1,L(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(s&&a<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-n,n=l}else{var c=i.node.getBoundingClientRect();o=c.bottom-c.top}var u=i.line.height-o;if(o<2&&(o=er(t)),(u>.005||u<-.005)&&(ue(i.line,o),br(i.line),i.rest))for(var h=0;h<i.rest.length;h++)br(i.rest[h])}}}function br(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function wr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Cn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=fe(t,r),s=fe(t,i);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=fe(t,Ge(ae(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=fe(t,Ge(ae(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function xr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=rr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Cr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=pe(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(A("div",[A("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ai(e),!0}return!1}function Sr(e,t){var n=e.display,r=er(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Mn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Sn(n),l=t.top<r,c=t.bottom>a-r;if(t.top<i)s.scrollTop=l?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?a:t.bottom)-o);u!=i&&(s.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=Ln(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+h-3&&(s.scrollLeft=t.right+(d?0:10)-f),s}function kr(e,t){null!=t&&(Mr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Tr(e){Mr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Lr(e,t,n){null==t&&null==n||Mr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Mr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Er(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Er(e,t,n,r){var i=Sr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Lr(e,i.scrollLeft,i.scrollTop)}function Ar(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||si(e,{top:t}),_r(e,t,!0),n&&si(e),ti(e,100))}function _r(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Or(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,xr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Pr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Sn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Tn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Rr=function(e,t,n){this.cm=n;var r=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Je(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Je(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Rr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rr.prototype.zeroWidthHack=function(){var e=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Rr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Rr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Dr=function(){};function Fr(e,t){t||(t=Pr(e));var n=e.display.barWidth,r=e.display.barHeight;Nr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&yr(e),Nr(e,Pr(e)),n=e.display.barWidth,r=e.display.barHeight}function Nr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Dr.prototype.update=function(){return{bottom:0,right:0}},Dr.prototype.setScrollLeft=function(){},Dr.prototype.setScrollTop=function(){},Dr.prototype.clear=function(){};var Hr={native:Rr,null:Dr};function Wr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&L(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Je(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Or(e,t):Ar(e,t)},e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Br=0;function Ir(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Br},t=e.curOp,on?on.ops.push(t):t.ownsGroup=on={ops:[t],delayedCallbacks:[]}}function zr(e){!function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{on=null,t(n)}}(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Ur(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);var i;for(var o=0;o<t.length;o++)Xr(t[o]);for(var s=0;s<t.length;s++)jr(t[s]);for(var a=0;a<t.length;a++)Gr(t[a])}(e)})}function Ur(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Tn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Tn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ke(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ri(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Xr(e){var t=e.cm,n=t.display;e.updatedDisplay&&yr(t),e.barMeasure=Pr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=An(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Tn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ln(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function jr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==P();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Fr(t,e.barMeasure),e.updatedDisplay&&li(t,e.barMeasure),e.selectionChanged&&dr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&pr(e.cm)}function Gr(e){var t=e.cm,n=t.display,r=t.doc;(e.updatedDisplay&&oi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&_r(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Or(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!rt(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=A("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Cn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Tn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Vn(e,t),l=n&&n!=t?Vn(e,n):a,c=Sr(e,i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r}),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Ar(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(Or(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return i}(t,Ce(r,e.scrollToPos.from),Ce(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||nt(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&nt(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&nt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Vr(e,t){if(e.curOp)return t();Ir(e);try{return t()}finally{zr(e)}}function Kr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ir(e);try{return t.apply(e,arguments)}finally{zr(e)}}}function Yr(e){return function(){if(this.curOp)return e.apply(this,arguments);Ir(this);try{return e.apply(this,arguments)}finally{zr(this)}}}function qr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ir(t);try{return e.apply(this,arguments)}finally{zr(t)}}}function $r(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&ze(e.doc,t)<i.viewTo&&Qr(e);else if(n<=i.viewFrom)Te&&Ue(e.doc,n+r)>i.viewFrom?Qr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Qr(e);else if(t<=i.viewFrom){var o=Jr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Qr(e)}else if(n>=i.viewTo){var s=Jr(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):Qr(e)}else{var a=Jr(e,t,t,-1),l=Jr(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(rn(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):Qr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Zr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ar(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==I(s,n)&&s.push(n)}}}function Qr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Jr(e,t,n,r){var i,o=ar(e,t),s=e.display.view;if(!Te||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;ze(e.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ei(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(ni,e))}function ni(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ht(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?At(t.mode,r.state):null,l=Ft(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),f=0;!h&&f<s.length;++f)h=s[f]!=o.styles[f];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Wt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ti(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Vr(e,function(){for(var t=0;t<i.length;t++)Zr(e,i[t],"text")})}}var ri=function(e,t,n){var r=e.display;this.viewport=t,this.visible=wr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ln(e),this.force=n,this.dims=nr(e),this.events=[]};function ii(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Qr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ei(e))return!1;Cr(e)&&(Qr(e),t.dims=nr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Te&&(o=ze(e.doc,o),s=Ue(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=rn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=rn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ar(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(rn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ar(e,n)))),r.viewTo=n}(e,o,s),n.viewOffset=Ge(ae(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ei(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=P();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&O(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var f=c[h];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;s!=f.node;)s=a(s);var d=i&&null!=t&&t<=u&&f.lineNumber;f.changes&&(I(f.changes,"gutter")>-1&&(d=!1),cn(e,f,u,n)),d&&(M(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(pe(e.options,u)))),s=f.node.nextSibling}else{var p=mn(e,f,u,n);o.insertBefore(p,s)}u+=f.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=P()&&(e.activeElt.focus(),e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),M(n.cursorDiv),M(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ti(e,400)),n.updateLineNumbers=null,!0}function oi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ln(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Sn(e.display)-Mn(e),n.top)}),t.visible=wr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);r=!1){yr(e);var i=Pr(e);lr(e),Fr(e,i),li(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function si(e,t){var n=new ri(e,t);if(ii(e,n)){yr(e),oi(e,n);var r=Pr(e);lr(e),Fr(e,r),li(e,r),n.finish()}}function ai(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function li(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Tn(e)+"px"}function ci(e){var t=e.display.gutters,n=e.options.gutters;M(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(A("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ai(e)}function ui(e){var t=I(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ri.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var e=0;e<this.events.length;e++)nt.apply(null,this.events[e])};var hi=0,fi=null;function di(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function pi(e){var t=di(e);return t.x*=fi,t.y*=fi,t}function gi(e,t){var r=di(t),i=r.x,o=r.y,s=e.display,a=s.scroller,c=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(i&&c||o&&u){if(o&&y&&l)e:for(var f=t.target,d=s.view;f!=a;f=f.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==f){e.display.currentWheelTarget=f;break e}if(i&&!n&&!h&&null!=fi)return o&&u&&Ar(e,Math.max(0,a.scrollTop+o*fi)),Or(e,Math.max(0,a.scrollLeft+i*fi)),(!o||o&&u)&&at(t),void(s.wheelStartX=null);if(o&&null!=fi){var g=o*fi,m=e.doc.scrollTop,v=m+s.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),si(e,{top:m,bottom:v})}hi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout(function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(fi=(fi*hi+n)/(hi+1),++hi)}},200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?fi=-.53:n?fi=15:u?fi=-.7:f&&(fi=-1/3);var mi=function(e,t){this.ranges=e,this.primIndex=t};mi.prototype.primary=function(){return this.ranges[this.primIndex]},mi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ve(n.anchor,r.anchor)||!ve(n.head,r.head))return!1}return!0},mi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new vi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new mi(e,this.primIndex)},mi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},mi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(me(t,r.from())>=0&&me(e,r.to())<=0)return n}return-1};var vi=function(e,t){this.anchor=e,this.head=t};function yi(e,t){var n=e[t];e.sort(function(e,t){return me(e.from(),t.from())}),t=I(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(me(o.to(),i.from())>=0){var s=we(o.from(),i.from()),a=be(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new vi(l?a:s,l?s:a))}}return new mi(e,t)}function bi(e,t){return new mi([new vi(e,t||e)],0)}function wi(e){return e.text?ge(e.from.line+e.text.length-1,q(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function xi(e,t){if(me(e,t.from)<0)return e;if(me(e,t.to)<=0)return wi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=wi(t).ch-t.to.ch),ge(n,r)}function Ci(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new vi(xi(i.anchor,t),xi(i.head,t)))}return yi(n,e.sel.primIndex)}function Si(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function ki(e){e.doc.mode=Lt(e.options,e.doc.modeOption),Ti(e)}function Ti(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&$r(e)}function Li(e,t){return 0==t.from.ch&&0==t.to.ch&&""==q(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mi(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Oe(e),Pe(e,n);var i=r?r(e):1;i!=e.height&&ue(e,i)}(e,n,i,r),an(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(c[o],i(o),r));return n}var a=t.from,l=t.to,c=t.text,u=ae(e,a.line),h=ae(e,l.line),f=q(c),d=i(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(Li(e,t)){var g=s(0,c.length-1);o(h,h.text,d),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,a.ch)+f+u.text.slice(l.ch),d);else{var m=s(1,c.length-1);m.push(new Gt(f+u.text.slice(l.ch),d,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(h,f+h.text.slice(l.ch),d);var v=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}an(e,"change",e,t)}function Ei(e,t,n){!function e(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Ai(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,or(e),ki(e),_i(e),e.options.lineWrapping||Ke(e),e.options.mode=t.modeOption,$r(e)}function _i(e){("rtl"==e.doc.direction?R:L)(e.display.lineDiv,"CodeMirror-rtl")}function Oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Pi(e,t){var n={from:ye(t.from),to:wi(t),text:le(e,t.from,t.to)};return Hi(e,n,t.from.line,t.to.line+1),Ei(e,function(e){return Hi(e,n,t.from.line,t.to.line+1)},!0),n}function Ri(e){for(;e.length;){if(!q(e).ranges)break;e.pop()}}function Di(e,t,n,r){var i=e.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ri(e.done),q(e.done)):e.done.length&&!q(e.done).ranges?q(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),q(e.done)):void 0}(i,i.lastOp==r)))s=q(o.changes),0==me(t.from,t.to)&&0==me(t.from,s.to)?s.to=wi(t):o.changes.push(Pi(e,t));else{var l=q(i.done);for(l&&l.ranges||Ni(e.sel,i.done),o={changes:[Pi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||nt(e,"historyAdded")}function Fi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,q(i.done),t))?i.done[i.done.length-1]=t:Ni(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}function Ni(e,t){var n=q(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Wi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Bi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Wi(n[i]));return r}(e,t),r=Ae(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[i]=s)}return n}function Ii(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?mi.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&I(t,Number(u[1]))>-1&&(q(a)[h]=c[h],delete c[h])}}}return r}function zi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=me(t,i)<0;o!=me(n,i)<0?(i=t,t=n):o!=me(t,n)<0&&(t=n)}return new vi(i,t)}return new vi(n||t,t)}function Ui(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Ki(e,new mi([zi(e.sel.primary(),t,n,i)],0),r)}function Xi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=zi(e.sel.ranges[o],t[o],null,i);Ki(e,yi(r,e.sel.primIndex),n)}function ji(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ki(e,yi(i,e.sel.primIndex),r)}function Gi(e,t,n,r){Ki(e,bi(t,n),r)}function Vi(e,t,n){var r=e.history.done,i=q(r);i&&i.ranges?(r[r.length-1]=t,Yi(e,t,n)):Ki(e,t,n)}function Ki(e,t,n){Yi(e,t,n),Fi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Yi(e,t,n){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new vi(Ce(e,t[n].anchor),Ce(e,t[n].head))},origin:n&&n.origin};return nt(e,"beforeSelectionChange",e,r),e.cm&&nt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?yi(r.ranges,r.ranges.length-1):t}(e,t,n)),qi(e,Zi(e,t,n&&n.bias||(me(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Tr(e.cm)}function qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,it(e.cm)),an(e,"cursorActivity",e))}function $i(e){qi(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Ji(e,s.anchor,a&&a.anchor,n,r),c=Ji(e,s.head,a&&a.head,n,r);(i||l!=s.anchor||c!=s.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new vi(l,c))}return i?yi(i,t.primIndex):t}function Qi(e,t,n,r,i){var o=ae(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(i&&(nt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=eo(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=me(c,n))&&(r<0?u<0:u>0))return Qi(e,c,t,r,i)}var h=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(h=eo(e,h,r,h.line==t.line?o:null)),h?Qi(e,h,t,r,i):null}}return t}function Ji(e,t,n,r,i){var o=r||1,s=Qi(e,t,n,o,i)||!i&&Qi(e,t,n,o,!0)||Qi(e,t,n,-o,i)||!i&&Qi(e,t,n,-o,!0);return s||(e.cantEdit=!0,ge(e.first,0))}function eo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Ce(e,ge(t.line-1)):null:n>0&&t.ch==(r||ae(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function to(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),X)}function no(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=Ce(e,t)),n&&(r.to=Ce(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),nt(e,"beforeChange",e,r),e.cm&&nt(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ro(e,t,n){if(e.cm){if(!e.cm.curOp)return Kr(e.cm,ro)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))||(t=no(e,t,!0))){var r=ke&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=I(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),l=0;l<i.length;++l){var c=i[l];if(!(me(c.to,a.from)<0||me(c.from,a.to)>0)){var u=[l,1],h=me(c.from,a.from),f=me(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(f>0||!s.inclusiveRight&&!f)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)io(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else io(e,t)}}function io(e,t){if(1!=t.text.length||""!=t.text[0]||0!=me(t.from,t.to)){var n=Ci(e,t);Di(e,t,n,e.cm?e.cm.curOp.id:NaN),ao(e,t,n,Ae(e,t));var r=[];Ei(e,function(e,n){n||-1!=I(r,e.history)||(ho(e.history,t),r.push(e.history)),ao(e,t,null,Ae(e,t))})}}function oo(e,t,n){if(!e.cm||!e.cm.state.suppressEdits||n){for(var r,i=e.history,o=e.sel,s="undo"==t?i.done:i.undone,a="undo"==t?i.undone:i.done,l=0;l<s.length&&(r=s[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=s.length){for(i.lastOrigin=i.lastSelOrigin=null;(r=s.pop()).ranges;){if(Ni(r,a),n&&!r.equals(e.sel))return void Ki(e,r,{clearRedo:!1});o=r}var c=[];Ni(o,a),a.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,u&&!no(e,i,!1))return s.length=0,{};c.push(Pi(e,i));var o=n?Ci(e,i):q(s);ao(e,i,o,Bi(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:wi(i)});var a=[];Ei(e,function(e,t){t||-1!=I(a,e.history)||(ho(e.history,i),a.push(e.history)),ao(e,i,null,Bi(e,i))})},f=r.changes.length-1;f>=0;--f){var d=h(f);if(d)return d.v}}}}function so(e,t){if(0!=t&&(e.first+=t,e.sel=new mi($(e.sel.ranges,function(e){return new vi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){$r(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Zr(e.cm,r,"gutter")}}function ao(e,t,n,r){if(e.cm&&!e.cm.curOp)return Kr(e.cm,ao)(e,t,n,r);if(t.to.line<e.first)so(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);so(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[q(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,ae(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),n||(n=Ci(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=he(Ie(ae(r,o.line))),r.iter(l,s.line+1,function(e){if(e==i.maxLine)return a=!0,!0}));r.sel.contains(t.from,t.to)>-1&&it(e);Mi(r,t,n,ir(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=Ve(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=ae(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}})(r,o.line),ti(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?$r(e):o.line!=s.line||1!=t.text.length||Li(e.doc,t)?$r(e,o.line,s.line+1,c):Zr(e,o.line,"text");var u=ot(e,"changes"),h=ot(e,"change");if(h||u){var f={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&an(e,"change",e,f),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,r):Mi(e,t,r),Yi(e,n,X)}}function lo(e,t,n,r,i){var o;(r||(r=n),me(r,n)<0)&&(n=(o=[r,n])[0],r=o[1]);"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:n,to:r,text:t,origin:i})}function co(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)co(o.ranges[a].anchor,t,n,r),co(o.ranges[a].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}}function ho(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;uo(e.done,n,r,i),uo(e.undone,n,r,i)}function fo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=ae(e,xe(e,t)):i=he(t),null==i?null:(r(o,i)&&e.cm&&Zr(e.cm,i,n),o)}function po(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function go(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}vi.prototype.from=function(){return we(this.anchor,this.head)},vi.prototype.to=function(){return be(this.anchor,this.head)},vi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Vt(i),an(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},go.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;if(r.removeInner(e,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof po))){var a=[];this.collapse(a),this.children=[new po(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var l=new po(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new go(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=I(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new go(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var mo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function vo(e,t,n){Ge(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&kr(e,n)}mo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=he(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=wn(this);ue(n,Math.max(0,n.height-o)),e&&(Vr(e,function(){vo(e,n,-o),Zr(e,r,"widget")}),an(e,"lineWidgetCleared",e,this,r))}},mo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=wn(this)-t;i&&(ue(r,r.height+i),n&&Vr(n,function(){n.curOp.forceUpdate=!0,vo(n,r,i),an(n,"lineWidgetChanged",n,e,he(r))}))},st(mo);var yo=0,bo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function wo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=H(r)).shared=!1;var o=[wo(e,t,n,r,i)],s=o[0],a=r.widgetNode;return Ei(e,function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(wo(e,Ce(e,t),Ce(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=q(o)}),new xo(o,s)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Kr(e.cm,wo)(e,t,n,r,i);var o=new bo(e,i),s=me(t,n);if(r&&H(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=_("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Be(e,t.line,t,n,o)||t.line!=n.line&&Be(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&Di(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Ie(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&ue(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Le(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Xe(e,t)&&ue(t,0)}),o.clearOnEnter&&Je(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(ke=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)$r(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Zr(c,u,"text");o.atomic&&$i(c.doc),an(c,"markerAdded",c,o)}return o}bo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ir(e),ot(this,"clear")){var n=this.find();n&&an(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Me(s.markedSpans,this);e&&!this.collapsed?Zr(e,he(s),"text"):e&&(null!=a.to&&(i=he(s)),null!=a.from&&(r=he(s))),s.markedSpans=Ee(s.markedSpans,a),null==a.from&&this.collapsed&&!Xe(this.doc,s)&&e&&ue(s,er(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Ie(this.lines[l]),u=Ve(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&$r(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&$i(e.doc)),e&&an(e,"markerCleared",e,this,r,i),t&&zr(e),this.parent&&this.parent.clear()}},bo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=Me(o.markedSpans,this);if(null!=s.from&&(n=ge(t?o:he(o),s.from),-1==e))return n;if(null!=s.to&&(r=ge(t?o:he(o),s.to),1==e))return r}return n&&{from:n,to:r}},bo.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Vr(r,function(){var i=t.line,o=he(t.line),s=_n(r,o);if(s&&(Hn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Xe(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var l=wn(n)-a;l&&ue(i,i.height+l)}an(r,"markerChanged",r,e)})},bo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=I(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bo.prototype.detachLine=function(e){if(this.lines.splice(I(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(bo);var xo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Co(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),function(e){return e.parent})}function So(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ei(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==I(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}xo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();an(this,"clear")}},xo.prototype.find=function(e,t){return this.primary.find(e,t)},st(xo);var ko=0,To=function(e,t,n,r,i){if(!(this instanceof To))return new To(e,t,n,r,i);null==n&&(n=0),go.call(this,[new po([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ge(n,0);this.sel=bi(o),this.history=new Oi(null),this.id=++ko,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Mi(this,{from:o,to:o,text:e}),Ki(this,bi(o),X)};To.prototype=Q(go.prototype,{constructor:To,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ce(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:qr(function(e){var t=ge(this.first,0),n=this.first+this.size-1;ro(this,{from:t,to:ge(n,ae(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Lr(this.cm,0,0),Ki(this,bi(t),X)}),replaceRange:function(e,t,n,r){lo(this,e,t=Ce(this,t),n=n?Ce(this,n):t,r)},getRange:function(e,t,n){var r=le(this,Ce(this,e),Ce(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(de(this,e))return ae(this,e)},getLineNumber:function(e){return he(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=ae(this,e)),Ie(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ce(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qr(function(e,t,n){Gi(this,Ce(this,"number"==typeof e?ge(e,t||0):e),null,n)}),setSelection:qr(function(e,t,n){Gi(this,Ce(this,e),Ce(this,t||e),n)}),extendSelection:qr(function(e,t,n){Ui(this,Ce(this,e),t&&Ce(this,t),n)}),extendSelections:qr(function(e,t){Xi(this,Se(this,e),t)}),extendSelectionsBy:qr(function(e,t){Xi(this,Se(this,$(this.sel.ranges,e)),t)}),setSelections:qr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new vi(Ce(this,e[i].anchor),Ce(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ki(this,yi(r,t),n)}}),addSelection:qr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new vi(Ce(this,e),Ce(this,t||e))),Ki(this,yi(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:qr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),o=i,s=0;s<t.length;s++){var a=t[s],l=Si(a.from,i,o),c=Si(wi(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[s],h=me(u.head,u.anchor)<0;r[s]=new vi(h?c:l,h?l:c)}else r[s]=new vi(l,l)}return new mi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)ro(this,r[l]);a?Vi(this,a):this.cm&&Tr(this.cm)}),undo:qr(function(){oo(this,"undo")}),redo:qr(function(){oo(this,"redo")}),undoSelection:qr(function(){oo(this,"undo",!0)}),redoSelection:qr(function(){oo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ii(this.history.done),undone:Ii(this.history.undone)}},setHistory:function(e){var t=this.history=new Oi(this.history.maxGeneration);t.done=Ii(e.done.slice(0),null,!0),t.undone=Ii(e.undone.slice(0),null,!0)},setGutterMarker:qr(function(e,t,n){return fo(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:qr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&fo(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!de(this,e))return null;if(t=e,!(e=ae(this,e)))return null}else if(null==(t=he(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:qr(function(e,t,n){return fo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(k(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:qr(function(e,t,n){return fo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(k(n));if(!o)return!1;var s=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0})}),addLineWidget:qr(function(e,t,n){return function(e,t,n,r){var i=new mo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),fo(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Xe(e,t)){var r=Ge(t)<e.scrollTop;ue(t,t.height+wn(i)),r&&kr(o,i.height),o.curOp.forceUpdate=!0}return!0}),an(o,"lineWidgetAdded",o,i,"number"==typeof t?t:he(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return wo(this,Ce(this,e),Ce(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return wo(this,e=Ce(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=ae(this,(e=Ce(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Ce(this,e),t=Ce(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),Ce(this,ge(n,t))},indexFromPos:function(e){var t=(e=Ce(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new To(ce(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new To(ce(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),s=e.clipPos(i.to);if(me(o,s)){var a=wo(e,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,Co(this)),r},unlinkDoc:function(e){if(e instanceof xs&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),So(Co(this));break}}if(e.history==this.history){var n=[e.id];Ei(e,function(e){return n.push(e.id)},!0),e.history=new Oi(null),e.history.done=Ii(this.history.done,n),e.history.undone=Ii(this.history.undone,n)}},iterLinkedDocs:function(e){Ei(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qr(function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Vr(t=this.cm,function(){_i(t),$r(t)}))})}),To.prototype.eachLine=To.prototype.iter;var Lo=0;function Mo(e){var t=this;if(Eo(t),!rt(t,e)&&!xn(t.display,e)){at(e),s&&(Lo=+new Date);var n=sr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=I(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=Kr(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++a==i){var l={from:n=Ce(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};ro(t.doc,l),Vi(t.doc,bi(n,wi(l)))}}),s.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Yi(t.doc,bi(n,n)),h)for(var f=0;f<h.length;++f)lo(t.doc,"",h[f].anchor,h[f].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Eo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ao(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var _o=!1;function Oo(){var e;_o||(Je(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ao(Po)},100))}),Je(window,"blur",function(){return Ao(vr)}),_o=!0)}function Po(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}for(var Ro={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Do=0;Do<10;Do++)Ro[Do+48]=Ro[Do+96]=String(Do);for(var Fo=65;Fo<=90;Fo++)Ro[Fo]=String.fromCharCode(Fo);for(var No=1;No<=12;No++)Ro[No+111]=Ro[No+63235]="F"+No;var Ho={};function Wo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Bo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=$(n.split(" "),Wo),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function Io(e,t,n,r){var i=(t=jo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Io(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=Io(e,t.fallthrough[o],n,r);if(s)return s}}}function zo(e){var t="string"==typeof e?e:Ro[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Uo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(C?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(C?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Xo(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ro[e.keyCode];return null!=n&&!e.altGraphKey&&Uo(n,e,t)}function jo(e){return"string"==typeof e?Ho[e]:e}function Go(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&me(o.from,q(r).to)<=0;){var s=r.pop();if(me(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Vr(e,function(){for(var t=r.length-1;t>=0;t--)lo(e.doc,"",r[t].from,r[t].to,"+delete");Tr(e)})}function Vo(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Ko(e,t,n){var r=Vo(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Yo(e,t,n,r,i){if(e){var o=Ze(n,t.doc.direction);if(o){var s,a=i<0?q(o):o[0],l=i<0==(1==a.level)?"after":"before";if(a.level>0){var c=On(t,n);s=i<0?n.text.length-1:0;var u=Pn(t,c,s).top;s=se(function(e){return Pn(t,c,e).top==u},i<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Vo(n,s,1))}else s=i<0?a.to:a.from;return new ge(r,s,l)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=y?Ho.macDefault:Ho.pcDefault;var qo={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),X)},killLine:function(e){return Go(e,function(t){if(t.empty()){var n=ae(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Go(e,function(t){return{from:ge(t.from().line,0),to:Ce(e.doc,ge(t.to().line+1,0))}})},delLineLeft:function(e){return Go(e,function(e){return{from:ge(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return $o(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Zo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=ae(e.doc,t),r=function(e){for(var t;t=We(e);)e=t.find(1,!0).line;return e}(n);r!=n&&(t=he(r));return Yo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},G)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},G)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Zo(e,t.head):r},G)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=W(e.getLine(o.line),o.ch,r);t.push(Y(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Vr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=ae(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ge(i.line,i.ch-1)),i.ch>0)i=new ge(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ge(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=ae(e.doc,i.line-1).text;s&&(i=new ge(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),ge(i.line-1,s.length-1),i,"+transpose"))}n.push(new vi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Vr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Tr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function $o(e,t){var n=ae(e.doc,t),r=Ie(n);return r!=n&&(t=he(r)),Yo(!0,e,r,t,1)}function Zo(e,t){var n=$o(e,t.line),r=ae(e.doc,n.line),i=Ze(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return ge(n.line,s?0:o,n.sticky)}return n}function Qo(e,t,n){if("string"==typeof t&&!(t=qo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=U}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Jo=new B;function es(e,t,n,r){var i=e.state.keySeq;if(i){if(zo(t))return"handled";Jo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Io(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Io(t,e.options.extraKeys,n,e)||Io(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&an(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(at(n),dr(e)),i&&!o&&/\'$/.test(t)?(at(n),!0):!!o}function ts(e,t){var n=Xo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?es(e,"Shift-"+n,t,function(t){return Qo(e,t,!0)})||es(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Qo(e,t)}):es(e,n,t,function(t){return Qo(e,t)}))}var ns=null;function rs(e){var t=this;if(t.curOp.focus=P(),!rt(t,e)){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ts(t,e);h&&(ns=r?n:null,!r&&88==n&&!xt&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(L(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),Je(document,"keyup",n),Je(document,"mouseover",n)}(t)}}function is(e){16==e.keyCode&&(this.doc.sel.shift=!1),rt(this,e)}function os(e){var t=this;if(!(xn(t.display,e)||rt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==ns)return ns=null,void at(e);if(!h||e.which&&!(e.which<10)||!ts(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return es(e,"'"+n+"'",t,function(t){return Qo(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var ss,as,ls=function(e,t,n){this.time=e,this.pos=t,this.button=n};function cs(e){var t=this,n=t.display;if(!(rt(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,xn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!fs(t,e)){var r=sr(t,e),i=ft(e),o=r?function(e,t){var n=+new Date;return as&&as.compare(n,e,t)?(ss=as=null,"triple"):ss&&ss.compare(n,e,t)?(as=new ls(n,e,t),ss=null,"double"):(ss=new ls(n,e,t),as=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o);return es(e,Uo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=qo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=U}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){s?setTimeout(N(pr,e),0):e.curOp.focus=P();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey);null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey));return i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&gt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(me((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(me(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=Kr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,tt(document,"mouseup",c),tt(document,"mousemove",u),tt(i.scroller,"dragstart",h),tt(i.scroller,"drop",c),o||(at(t),r.addNew||Ui(e.doc,n,null,null,r.extend),l||s&&9==a?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};l&&(i.scroller.draggable=!0);e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();Je(document,"mouseup",c),Je(document,"mousemove",u),Je(i.scroller,"dragstart",h),Je(i.scroller,"drop",c),gr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;at(t);var s,a,l=o.sel,c=l.ranges;r.addNew&&!r.extend?(a=o.sel.contains(n),s=a>-1?c[a]:new vi(n,n)):(s=o.sel.primary(),a=o.sel.primIndex);if("rectangle"==r.unit)r.addNew||(s=new vi(n,n)),n=sr(e,t,!0,!0),a=-1;else{var u=us(e,n,r.unit);s=r.extend?zi(s,u.anchor,u.head,r.extend):u}r.addNew?-1==a?(a=c.length,Ki(o,yi(c.concat([s]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==r.unit&&!r.extend?(Ki(o,yi(c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):ji(o,a,s,j):(a=0,Ki(o,new mi([s],0),j),l=o.sel);var h=n;function f(t){if(0!=me(h,t))if(h=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=W(ae(o,n.line).text,n.ch,c),f=W(ae(o,t.line).text,t.ch,c),d=Math.min(u,f),p=Math.max(u,f),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=ae(o,g).text,y=V(v,d,c);d==p?i.push(new vi(ge(g,y),ge(g,y))):v.length>y&&i.push(new vi(ge(g,y),ge(g,V(v,p,c))))}i.length||i.push(new vi(n,n)),Ki(o,yi(l.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=s,x=us(e,t,r.unit),C=w.anchor;me(x.anchor,C)>0?(b=x.head,C=we(w.from(),x.anchor)):(b=x.anchor,C=be(w.to(),x.head));var S=l.ranges.slice(0);S[a]=function(e,t){var n=t.anchor,r=t.head,i=ae(e.doc,n.line);if(0==me(n,r)&&n.sticky==r.sticky)return t;var o=Ze(i);if(!o)return t;var s=qe(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=qe(o,r.ch,r.sticky),h=u-s||(r.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?h<0:h>0}var f=o[c+(l?-1:0)],d=l==(1==f.level),p=d?f.from:f.to,g=d?"after":"before";return n.ch==p&&n.sticky==g?t:new vi(new ge(n.line,p,g),r)}(e,new vi(Ce(o,C),b)),Ki(o,yi(S,a),j)}}var d=i.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,at(t),i.input.focus(),tt(document,"mousemove",m),tt(document,"mouseup",v),o.history.lastSelOrigin=null}var m=Kr(e,function(t){ft(t)?function t(n){var s=++p;var a=sr(e,n,!0,"rectangle"==r.unit);if(!a)return;if(0!=me(a,h)){e.curOp.focus=P(),f(a);var l=wr(i,o);(a.line>=l.to||a.line<l.from)&&setTimeout(Kr(e,function(){p==s&&t(n)}),150)}else{var c=n.clientY<d.top?-20:n.clientY>d.bottom?20:0;c&&setTimeout(Kr(e,function(){p==s&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):g(t)}),v=Kr(e,g);e.state.selectingText=v,Je(document,"mousemove",m),Je(document,"mouseup",v)}(e,r,t,o)}(t,r,o,e):ht(e)==n.scroller&&at(e):2==i?(r&&Ui(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(S?ds(t,e):gr(t)))}}function us(e,t,n){if("char"==n)return new vi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new vi(ge(t.line,0),Ce(e.doc,ge(t.line+1,0)));var r=n(e,t);return new vi(r.from,r.to)}function hs(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&at(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ot(e,n))return ct(t);o-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return nt(e,n,e,fe(e.doc,o),e.options.gutters[l],t),ct(t)}}function fs(e,t){return hs(e,t,"gutterClick",!0)}function ds(e,t){xn(e.display,t)||function(e,t){if(!ot(e,"gutterContextMenu"))return!1;return hs(e,t,"gutterContextMenu",!1)}(e,t)||rt(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function ps(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bn(e)}ls.prototype.compare=function(e,t,n){return this.time+400>e&&0==me(t,this.pos)&&n==this.button};var gs={toString:function(){return"CodeMirror.Init"}},ms={},vs={};function ys(e){ci(e),$r(e),xr(e)}function bs(e,t,n){if(!t!=!(n&&n!=gs)){var r=e.display.dragFunctions,i=t?Je:tt;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function ws(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(L(e.display.wrapper,"CodeMirror-wrap"),Ke(e)),or(e),$r(e),Bn(e),setTimeout(function(){return Fr(e)},100)}function xs(e,t){var r=this;if(!(this instanceof xs))return new xs(e,t);this.options=t=t?H(t):{},H(ms,t,!1),ui(t);var i=t.value;"string"==typeof i&&(i=new To(i,t.mode,null,t.lineSeparator,t.direction)),this.doc=i;var o=new xs.inputStyles[t.inputStyle](this),c=this.display=new function(e,t,r){var i=this;this.input=r,i.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=_("div",null,"CodeMirror-code"),i.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=A("div",null,"CodeMirror-cursors"),i.measure=A("div",null,"CodeMirror-measure"),i.lineMeasure=A("div",null,"CodeMirror-measure"),i.lineSpace=_("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=_("div",[i.lineSpace],"CodeMirror-lines");i.mover=A("div",[o],null,"position: relative"),i.sizer=A("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=A("div",null,null,"position: absolute; height: "+z+"px; width: 1px;"),i.gutters=A("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=A("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=A("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),s&&a<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}(e,i,o);for(var u in c.wrapper.CodeMirror=this,ci(this),ps(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Wr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},t.autofocus&&!v&&c.input.focus(),s&&a<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;Je(t.scroller,"mousedown",Kr(e,cs)),Je(t.scroller,"dblclick",s&&a<11?Kr(e,function(t){if(!rt(e,t)){var n=sr(e,t);if(n&&!fs(e,t)&&!xn(e.display,t)){at(t);var r=e.findWordAt(n);Ui(e.doc,r.anchor,r.head)}}}):function(t){return rt(e,t)||at(t)});S||Je(t.scroller,"contextmenu",function(t){return ds(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}Je(t.scroller,"touchstart",function(i){if(!rt(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!fs(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),Je(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Je(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!xn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!r.prev||o(r,r.prev)?new vi(a,a):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(a):new vi(ge(a.line,0),Ce(e.doc,ge(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),at(n)}i()}),Je(t.scroller,"touchcancel",i),Je(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Ar(e,t.scroller.scrollTop),Or(e,t.scroller.scrollLeft,!0),nt(e,"scroll",e))}),Je(t.scroller,"mousewheel",function(t){return gi(e,t)}),Je(t.scroller,"DOMMouseScroll",function(t){return gi(e,t)}),Je(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){rt(e,t)||ut(t)},over:function(t){rt(e,t)||(!function(e,t){var n=sr(e,t);if(n){var r=document.createDocumentFragment();ur(e,n,r),e.display.dragCursor||(e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,r)}}(e,t),ut(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Lo<100))ut(t);else if(!rt(e,t)&&!xn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var n=A("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:Kr(e,Mo),leave:function(t){rt(e,t)||Eo(e)}};var l=t.input.getField();Je(l,"keyup",function(t){return is.call(e,t)}),Je(l,"keydown",Kr(e,rs)),Je(l,"keypress",Kr(e,os)),Je(l,"focus",function(t){return mr(e,t)}),Je(l,"blur",function(t){return vr(e,t)})}(this),Oo(),Ir(this),this.curOp.forceUpdate=!0,Ai(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(N(mr,this),20):vr(this),vs)vs.hasOwnProperty(u)&&vs[u](r,t[u],gs);Cr(this),t.finishInit&&t.finishInit(this);for(var d=0;d<Cs.length;++d)Cs[d](r);zr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(c.lineDiv).textRendering&&(c.lineDiv.style.textRendering="auto")}xs.defaults=ms,xs.optionHandlers=vs;var Cs=[];function Ss(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Ht(e,t).state:n="prev");var s=e.options.tabSize,a=ae(o,t),l=W(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(i,a.text.slice(u.length),a.text))==U||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?W(ae(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/s);d;--d)f+=s,h+="\t";if(f<c&&(h+=Y(c-f)),h!=u)return lo(o,h,ge(t,0),ge(t,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<u.length){var m=ge(t,u.length);ji(o,p,new vi(m,m));break}}}xs.defineInitHook=function(e){return Cs.push(e)};var ks=null;function Ts(e){ks=e}function Ls(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var s,a=e.state.pasteIncoming||"paste"==i,l=bt(t),c=null;if(a&&r.ranges.length>1)if(ks&&ks.text.join("\n")==t){if(r.ranges.length%ks.text.length==0){c=[];for(var u=0;u<ks.text.length;u++)c.push(o.splitLines(ks.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=$(l,function(e){return[e]}));for(var h=r.ranges.length-1;h>=0;h--){var f=r.ranges[h],d=f.from(),p=f.to();f.empty()&&(n&&n>0?d=ge(d.line,d.ch-n):e.state.overwrite&&!a?p=ge(p.line,Math.min(ae(o,p.line).text.length,p.ch+q(l).length)):ks&&ks.lineWise&&ks.text.join("\n")==t&&(d=p=ge(d.line,0))),s=e.curOp.updateInput;var g={from:d,to:p,text:c?c[h%c.length]:l,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,g),an(e,"inputRead",e,g)}t&&!a&&Es(e,t),Tr(e),e.curOp.updateInput=s,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Ms(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Vr(t,function(){return Ls(t,n,0,null,"paste")}),!0}function Es(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Ss(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(ae(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=Ss(e,i.head.line,"smart"));s&&an(e,"electricInput",e,i.head.line)}}}function As(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function _s(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Os(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),_s(e),t}function Ps(e,t,n,r,i){var o=t,s=n,a=ae(e,t.line);function l(r){var o,s;if(null==(o=i?function(e,t,n,r){var i=Ze(t,e.doc.direction);if(!i)return Ko(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=qe(i,n.ch,n.sticky),s=i[o];if("ltr"==e.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Ko(t,n,r);var a,l=function(e,n){return Vo(t,e instanceof ge?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||On(e,t),Zn(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var h=1==s.level==r<0,f=l(n,h?1:-1);if(null!=f&&(h?f<=s.to&&f<=u.end:f>=s.from&&f>=u.begin)){var d=h?"before":"after";return new ge(n.line,f,d)}}var p=function(e,t,r){for(var o=function(e,t){return t?new ge(n.line,l(e,1),"before"):new ge(n.line,e,"after")};e>=0&&e<i.length;e+=t){var s=i[e],a=t>0==(1!=s.level),c=a?r.begin:l(r.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),r.begin<=c&&c<r.end)return o(c,a)}},g=p(o+r,r,u);if(g)return g;var m=r>0?u.end:l(u.begin,-1);return null==m||r>0&&m==t.text.length||!(g=p(r>0?0:i.length-1,r,c(m)))?null:g}(e.cm,a,t,n):Ko(a,t,n))){if(r||(s=t.line+n)<e.first||s>=e.first+e.size||(t=new ge(s,t.ch,t.sticky),!(a=ae(e,s))))return!1;t=Yo(i,e.cm,a,t.line,n)}else t=o;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||l(!f);f=!1){var d=a.text.charAt(t.ch)||"\n",p=te(d,h)?"w":u&&"\n"==d?"n":!u||/\s/.test(d)?null:"p";if(!u||f||p||(p="s"),c&&c!=p){n<0&&(n=1,l(),t.sticky="after");break}if(p&&(c=p),n>0&&!l(!f))break}var g=Ji(e,t,o,s,!0);return ve(o,g)&&(g.hitSide=!0),g}function Rs(e,t,n,r){var i,o,s=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*er(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=qn(e,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Ds=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fs(e,t){var n=_n(e,t.line);if(!n||n.hidden)return null;var r=ae(e.doc,t.line),i=En(n,r,t.line),o=Ze(r,e.doc.direction),s="left";o&&(s=qe(o,t.ch)%2?"right":"left");var a=Fn(i.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Ns(e,t){return t&&(e.bad=!0),e}function Hs(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Ns(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Ws(o,t,n)}}function Ws(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!O(r,t))return Ns(ge(he(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?q(e.rest):e.line;return Ns(ge(he(o),o.text.length),i)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=he(i<0?e.line:e.rest[i]),h=o[s]+r;return(r<0||a!=t)&&(h=o[s+(r?1:0)]),ge(u,h)}}}var h=u(s,a,n);if(h)return Ns(h,i);for(var f=a.nextSibling,d=s?s.nodeValue.length-n:0;f;f=f.nextSibling){if(h=u(f,f.firstChild,0))return Ns(ge(h.line,h.ch-d),i);d+=f.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(h=u(p,p.firstChild,-1))return Ns(ge(h.line,h.ch+g),i);g+=p.textContent.length}}Ds.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){if(!rt(r,e)){if(r.somethingSelected())Ts({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=As(r);Ts({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,X),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=ks.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var s=Os(),a=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),a.value=ks.text.join("\n");var l=document.activeElement;F(a),setTimeout(function(){r.display.lineSpace.removeChild(s),l.focus(),l==i&&n.showPrimarySelection()},50)}}_s(i,r.options.spellcheck),Je(i,"paste",function(e){rt(r,e)||Ms(e,r)||a<=11&&setTimeout(Kr(r,function(){return t.updateFromDOM()}),20)}),Je(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),Je(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),Je(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Je(i,"touchstart",function(){return n.forceCompositionEnd()}),Je(i,"input",function(){t.composing||t.readFromDOMSoon()}),Je(i,"copy",o),Je(i,"cut",o)},Ds.prototype.prepareSelection=function(){var e=cr(this.cm,!1);return e.focus=this.cm.state.focused,e},Ds.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ds.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=Hs(t,e.anchorNode,e.anchorOffset),a=Hs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=me(we(s,a),i)||0!=me(be(s,a),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Fs(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Fs(t,o);if(!u){var h=l[l.length-1].measure,f=h.maps?h.maps[h.maps.length-1]:h.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(c&&u){var d,p=e.rangeCount&&e.getRangeAt(0);try{d=T(c.node,c.offset,u.offset,u.node)}catch(e){}d&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ds.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ds.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},Ds.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ds.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Ds.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ds.prototype.blur=function(){this.div.blur()},Ds.prototype.getField=function(){return this.div},Ds.prototype.supportsTouch=function(){return!0},Ds.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Vr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Ds.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ds.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(m&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Hs(t,e.anchorNode,e.anchorOffset),r=Hs(t,e.focusNode,e.focusOffset);n&&r&&Vr(t,function(){Ki(t.doc,bi(n,r),X),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ds.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=ge(s.line-1,ae(r.doc,s.line-1).length)),a.ch==ae(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=ge(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(e=ar(r,s.line))?(t=he(i.view[0].line),n=i.view[0].node):(t=he(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=ar(r,a.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=he(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var o="",s=!1,a=e.doc.lineSeparator();function l(){s&&(o+=a,s=!1)}function c(e){e&&(l(),o+=e)}function u(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return void c(n||t.textContent.replace(/\u200b/g,""));var o,h=t.getAttribute("cm-marker");if(h){var f=e.findMarks(ge(r,0),ge(i+1,0),(g=+h,function(e){return e.id==g}));return void(f.length&&(o=f[0].find(0))&&c(le(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var d=/^(pre|div|p)$/i.test(t.nodeName);d&&l();for(var p=0;p<t.childNodes.length;p++)u(t.childNodes[p]);d&&(s=!0)}else 3==t.nodeType&&c(t.nodeValue);var g}for(;u(t),t!=n;)t=t.nextSibling;return o}(r,n,c,t,l)),f=le(r.doc,ge(t,0),ge(l,ae(r.doc,l).text.length));h.length>1&&f.length>1;)if(q(h)==q(f))h.pop(),f.pop(),l--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var d=0,p=0,g=h[0],m=f[0],v=Math.min(g.length,m.length);d<v&&g.charCodeAt(d)==m.charCodeAt(d);)++d;for(var y=q(h),b=q(f),w=Math.min(y.length-(1==h.length?d:0),b.length-(1==f.length?d:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==f.length&&t==s.line)for(;d&&d>s.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var x=ge(t,d),C=ge(l,f.length?q(f).length-p:0);return h.length>1||h[0]||me(x,C)?(lo(r.doc,h,x,C,"+input"),!0):void 0},Ds.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ds.prototype.reset=function(){this.forceCompositionEnd()},Ds.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ds.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Ds.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Vr(this.cm,function(){return $r(e.cm)})},Ds.prototype.setUneditable=function(e){e.contentEditable="false"},Ds.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||Kr(this.cm,Ls)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ds.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ds.prototype.onContextMenu=function(){},Ds.prototype.resetPosition=function(){},Ds.prototype.needsContentAttribute=!0;var Bs=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};Bs.prototype.init=function(e){var t=this,n=this,r=this.cm,i=this.wrapper=Os(),o=this.textarea=i.firstChild;function l(e){if(!rt(r,e)){if(r.somethingSelected())Ts({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=As(r);Ts({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,X):(n.prevInput="",o.value=t.text.join("\n"),F(o))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(i,e.wrapper.firstChild),g&&(o.style.width="0px"),Je(o,"input",function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Je(o,"paste",function(e){rt(r,e)||Ms(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),Je(o,"cut",l),Je(o,"copy",l),Je(e.scroller,"paste",function(t){xn(e,t)||rt(r,t)||(r.state.pasteIncoming=!0,n.focus())}),Je(e.lineSpace,"selectstart",function(t){xn(e,t)||at(t)}),Je(o,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Je(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Bs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=cr(e);if(e.options.moveInputWithCursor){var i=Vn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Bs.prototype.showSelection=function(e){var t=this.cm.display;E(t.cursorDiv,e.cursors),E(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Bs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&F(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Bs.prototype.getField=function(){return this.textarea},Bs.prototype.supportsTouch=function(){return!1},Bs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||P()!=this.textarea))try{this.textarea.focus()}catch(e){}},Bs.prototype.blur=function(){this.textarea.blur()},Bs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Bs.prototype.receivedFocus=function(){this.slowPoll()},Bs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Bs.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Bs.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||wt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Vr(t,function(){Ls(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Bs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Bs.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Bs.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea,o=sr(n,e),c=r.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Kr(n,Ki)(n.doc,bi(o),X);var u=i.style.cssText,f=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var d,p=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(d=window.scrollY),r.input.focus(),l&&window.scrollTo(null,d),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&m(),S){ut(e);var g=function(){tt(window,"mouseup",g),setTimeout(v,20)};Je(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=f,i.style.cssText=u,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart){(!s||s&&a<9)&&m();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Kr(n,to)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Bs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Bs.prototype.setUneditable=function(){},Bs.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=gs&&i(e,t,n)}:i)}e.defineOption=n,e.Init=gs,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,ki(e)},!0),n("indentUnit",2,ki,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ti(e),Bn(e),$r(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(ge(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(e.doc,t,n[i],ge(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=gs&&e.refresh()}),n("specialCharPlaceholder",Zt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ps(e),ys(e)},!0),n("keyMap","default",function(e,t,n){var r=jo(t),i=n!=gs&&jo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ws,!0),n("gutters",[],function(e){ui(e.options),ys(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?rr(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Fr(e)},!0),n("scrollbarStyle","native",function(e){Wr(e),Fr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){ui(e.options),ys(e)},!0),n("firstLineNumber",1,ys,!0),n("lineNumberFormatter",function(e){return e},ys,!0),n("showCursorWhenSelecting",!1,lr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("readOnly",!1,function(e,t){"nocursor"==t&&(vr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,bs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,lr,!0),n("singleCursorHeightPerLine",!0,lr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ti,!0),n("addModeClass",!1,Ti,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ti,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0)}(xs),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Kr(this,t[e])(this,n,i),nt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](jo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Yr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,$r(this)}),removeOverlay:Yr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void $r(this)}}),indentLine:Yr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),de(this.doc,e)&&Ss(this,e,t,n)}),indentSelection:Yr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ss(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Tr(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)Ss(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&ji(this.doc,r,new vi(o,c[r].to()),X)}}}),getTokenAt:function(e,t){return Ut(this,e,t)},getLineTokens:function(e,t){return Ut(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=Ce(this.doc,e);var t,n=Nt(this,ae(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}r=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==I(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return Ht(this,(e=xe(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Vn(this,null==e?n.head:"object"==typeof e?Ce(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,Ce(this.doc,e),t||"page")},coordsChar:function(e,t){return qn(this,(e=jn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=jn(this,{top:e,left:0},t||"page").top,fe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=ae(this.doc,e)}else r=e;return Xn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ge(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,s,a,l=this.display,c=(e=Vn(this,Ce(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(l.wrapper.clientHeight,this.doc.height),f=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(o=this,s={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(a=Sr(o,s)).scrollTop&&Ar(o,a.scrollTop),null!=a.scrollLeft&&Or(o,a.scrollLeft))},triggerOnKeyDown:Yr(rs),triggerOnKeyPress:Yr(os),triggerOnKeyUp:is,triggerOnMouseDown:Yr(cs),execCommand:function(e){if(qo.hasOwnProperty(e))return qo[e].call(null,this)},triggerElectric:Yr(function(e){Es(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=Ce(this.doc,e),s=0;s<t&&!(o=Ps(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:Yr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Ps(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},G)}),deleteH:Yr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Go(this,function(n){var i=Ps(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var s=Ce(this.doc,e),a=0;a<t;++a){var l=Vn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Rs(this,l,i,n)).hitSide)break}return s},moveV:Yr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(s){if(o)return e<0?s.from():s.to();var a=Vn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var l=Rs(n,a,e,t);return"page"==t&&s==r.sel.primary()&&kr(n,Gn(n,l,"div").top-a.top),l},G),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]}),findWordAt:function(e){var t=ae(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),s=te(o,i)?function(e){return te(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};n>0&&s(t.charAt(n-1));)--n;for(;r<t.length&&s(t.charAt(r));)++r}return new vi(ge(e.line,n),ge(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):L(this.display.cursorDiv,"CodeMirror-overwrite"),nt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Yr(function(e,t){Lr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Tn(this)-this.display.barHeight,width:e.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:Mn(this),clientWidth:Ln(this)}},scrollIntoView:Yr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Mr(e),e.curOp.scrollToPos=t}(this,e):Er(this,e.from,e.to,e.margin)}),setSize:Yr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Wn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,nt(this,"refresh",this)}),operation:function(e){return Vr(this,e)},startOperation:function(){return Ir(this)},endOperation:function(){return zr(this)},refresh:Yr(function(){var e=this.display.cachedTextHeight;$r(this),this.curOp.forceUpdate=!0,Bn(this),Lr(this,this.doc.scrollLeft,this.doc.scrollTop),ai(this),(null==e||Math.abs(e-er(this.display))>.5)&&or(this),nt(this,"refresh",this)}),swapDoc:Yr(function(e){var t=this.doc;return t.cm=null,Ai(this,e),Bn(this),this.display.input.reset(),Lr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,an(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(xs);var Is,zs="iter insert remove copy getEditor constructor".split(" ");for(var Us in To.prototype)To.prototype.hasOwnProperty(Us)&&I(zs,Us)<0&&(xs.prototype[Us]=function(e){return function(){return e.apply(this.doc,arguments)}}(To.prototype[Us]));return st(To),xs.inputStyles={textarea:Bs,contenteditable:Ds},xs.defineMode=function(e){xs.defaults.mode||"null"==e||(xs.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),St[e]=t}.apply(this,arguments)},xs.defineMIME=function(e,t){kt[e]=t},xs.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),xs.defineMIME("text/plain","null"),xs.defineExtension=function(e,t){xs.prototype[e]=t},xs.defineDocExtension=function(e,t){To.prototype[e]=t},xs.fromTextArea=function(e,t){if((t=t?H(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=P();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=a.getValue()}var i;if(e.form&&(Je(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var a=xs(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a},(Is=xs).off=tt,Is.on=Je,Is.wheelEventPixels=pi,Is.Doc=To,Is.splitLines=bt,Is.countColumn=W,Is.findColumn=V,Is.isWordChar=ee,Is.Pass=U,Is.signal=nt,Is.Line=Gt,Is.changeEnd=wi,Is.scrollbarModel=Hr,Is.Pos=ge,Is.cmpPos=me,Is.modes=St,Is.mimeModes=kt,Is.resolveMode=Tt,Is.getMode=Lt,Is.modeExtensions=Mt,Is.extendMode=Et,Is.copyState=At,Is.startState=Ot,Is.innerMode=_t,Is.commands=qo,Is.keyMap=Ho,Is.keyName=Xo,Is.isModifierKey=zo,Is.lookupKey=Io,Is.normalizeKeyMap=Bo,Is.StringStream=Pt,Is.SharedTextMarker=xo,Is.TextMarker=bo,Is.LineWidget=mo,Is.e_preventDefault=at,Is.e_stopPropagation=lt,Is.e_stop=ut,Is.addClass=R,Is.contains=O,Is.rmClass=L,Is.keyNames=Ro,xs.version="5.30.0",xs},e.exports=r()},function(e,t,n){"use strict";t.b=o,t.c=s;var r=n(12),i=n(36);function o(e,t,n,r){let i;return e.addEventListener(t,i=function(e){n.call(r,e)},!1),i}function s(e,t,n){e.removeEventListener(t,n,!1)}t.a=class{constructor(e,t){n.i(i.a)(this),this.CSS_PREFIX=e,this.bgColor="rgb(46, 48, 51)",this.dimColor="rgb(100, 100, 100)",this.fnColor="rgb(230, 230, 230)",this.selColor="rgb(133, 204, 196)",t=t||{};for(let e in t)this[e]=t[e];this.renderer={frame:null,drawFrame:()=>{this.el&&this.draw()},start:()=>{this.renderer.drawFrame(),this.renderer.frame=window.requestAnimationFrame(this.renderer.start)},stop:()=>{window.cancelAnimationFrame(this.renderer.frame)}},this.isVisible=!1}create(){this.el=document.createElement("div"),this.el.className=this.CSS_PREFIX+"modal ge_picker_modal",this.el.style.backgroundColor=this.bgColor,this.canvas=document.createElement("canvas"),this.canvas.className=this.CSS_PREFIX+"canvas ge_picker_canvas",this.canvas.style.backgroundColor=this.bgColor,this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");let e=n.i(r.a)(this.ctx);this.canvas.width=this.width*e,this.canvas.height=this.height*e,this.ctx.scale(e,e)}draw(){}close(){this.destroyEvents(),s(this.el,"mousedown",this.onMouseDownHandler),this.onMouseDownHandler=null}destroyEvents(){s(this.el,"mousemove",this.onMouseMoveHandler),this.onMouseMoveHandler=null,s(window,"mouseup",this.onMouseUpHandler),this.onMouseUpHandler=null}setValue(e){this.value=e}getValue(){return this.value}showAt(e){let t=e.cursorCoords(!0,"page"),n=t.left,r=t.top;n-=.5*this.width,r+=30,this.presentModal(n,r)}presentModal(e,t){window.setTimeout(()=>{this.onClickOutsideHandler=o(document.body,"click",this.onClickOutside,this),this.onKeyPressHandler=o(window,"keydown",this.onKeyPress,this)},0),this.isVisible=!0,this.el.style.left=e+"px",this.el.style.top=t+"px",this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",document.body.appendChild(this.el),this.onMouseDownHandler=o(this.el,"mousedown",this.onMouseDown,this),this.renderer.drawFrame()}removeModal(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),s(document.body,"click",this.onClickOutsideHandler),this.onClickOutsideHandler=null,s(window,"keydown",this.onKeyPressHandler),this.onKeyPressHandler=null,this.close(),this.isVisible=!1}onKeyPress(e){this.removeModal()}onClickOutside(e){if(e.target===document.body)return;let t=e.target;for(;t!==document.documentElement&&!t.classList.contains(this.CSS_PREFIX+"modal");)t=t.parentNode;t.classList.contains(this.CSS_PREFIX+"modal")||this.removeModal()}onMouseDown(e){e.preventDefault(),this.onMouseMoveHandler=o(this.el,"mousemove",this.onMouseMove,this),this.onMouseUpHandler=o(window,"mouseup",this.onMouseUp,this),this.onMouseMove(e),this.renderer.start()}onMouseMove(e){}onMouseUp(e){this.renderer.stop(),this.destroyEvents()}}},function(e,t,n){(function(e){"use strict";var t,n,r=e.Pos;function i(e){return e.global?e:new RegExp(e.source,function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e)+"g")}function o(e,t,n){t=i(t);for(var o=n.line,s=n.ch,a=e.lastLine();o<=a;o++,s=0){t.lastIndex=s;var l=e.getLine(o),c=t.exec(l);if(c)return{from:r(o,c.index),to:r(o,c.index+c[0].length),match:c}}}function s(e,t){for(var n,r=0;;){t.lastIndex=r;var i=t.exec(e);if(!i)return n;if((r=(n=i).index+(n[0].length||1))==e.length)return n}}function a(e,t,n,r){if(e.length==t.length)return n;for(var i=0,o=n+Math.max(0,e.length-t.length);;){if(i==o)return i;var s=i+o>>1,a=r(e.slice(0,s)).length;if(a==n)return s;a>n?o=s:i=s+1}}function l(e,l,c,u){var h;this.atOccurrence=!1,this.doc=e,c=c?e.clipPos(c):r(0,0),this.pos={from:c,to:c},"object"==typeof u?h=u.caseFold:(h=u,u=null),"string"==typeof l?(null==h&&(h=!1),this.matches=function(i,o){return(i?function(e,i,o,s){if(!i.length)return null;var l=s?t:n,c=l(i).split(/\r|\n\r?/);e:for(var u=o.line,h=o.ch,f=e.firstLine()-1+c.length;u>=f;u--,h=-1){var d=e.getLine(u);h>-1&&(d=d.slice(0,h));var p=l(d);if(1==c.length){var g=p.lastIndexOf(c[0]);if(-1==g)continue e;return{from:r(u,a(d,p,g,l)),to:r(u,a(d,p,g+c[0].length,l))}}var m=c[c.length-1];if(p.slice(0,m.length)==m){var v=1;for(o=u-c.length+1;v<c.length-1;v++)if(l(e.getLine(o+v))!=c[v])continue e;var y=e.getLine(u+1-c.length),b=l(y);if(b.slice(b.length-c[0].length)==c[0])return{from:r(u+1-c.length,a(y,b,y.length-c[0].length,l)),to:r(u,a(d,p,m.length,l))}}}}:function(e,i,o,s){if(!i.length)return null;var l=s?t:n,c=l(i).split(/\r|\n\r?/);e:for(var u=o.line,h=o.ch,f=e.lastLine()+1-c.length;u<=f;u++,h=0){var d=e.getLine(u).slice(h),p=l(d);if(1==c.length){var g=p.indexOf(c[0]);if(-1==g)continue e;return o=a(d,p,g,l)+h,{from:r(u,a(d,p,g,l)+h),to:r(u,a(d,p,g+c[0].length,l)+h)}}var m=p.length-c[0].length;if(p.slice(m)==c[0]){for(var v=1;v<c.length-1;v++)if(l(e.getLine(u+v))!=c[v])continue e;var y=e.getLine(u+c.length-1),b=l(y),w=c[c.length-1];if(y.slice(0,w.length)==w)return{from:r(u,a(d,p,m,l)+h),to:r(u+c.length-1,a(y,b,w.length,l))}}}})(e,l,o,h)}):(l=i(l),u&&!1===u.multiline?this.matches=function(t,n){return(t?function(e,t,n){t=i(t);for(var o=n.line,a=n.ch,l=e.firstLine();o>=l;o--,a=-1){var c=e.getLine(o);a>-1&&(c=c.slice(0,a));var u=s(c,t);if(u)return{from:r(o,u.index),to:r(o,u.index+u[0].length),match:u}}}:o)(e,l,n)}:this.matches=function(t,n){return(t?function(e,t,n){t=i(t);for(var o,a=1,l=n.line,c=e.firstLine();l>=c;){for(var u=0;u<a;u++){var h=e.getLine(l--);o=null==o?h.slice(0,n.ch):h+"\n"+o}a*=2;var f=s(o,t);if(f){var d=o.slice(0,f.index).split("\n"),p=f[0].split("\n"),g=l+d.length,m=d[d.length-1].length;return{from:r(g,m),to:r(g+p.length-1,1==p.length?m+p[0].length:p[p.length-1].length),match:f}}}}:function(e,t,n){if(!function(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}(t))return o(e,t,n);t=i(t);for(var s,a=1,l=n.line,c=e.lastLine();l<=c;){for(var u=0;u<a;u++){var h=e.getLine(l++);s=null==s?h:s+"\n"+h}a*=2,t.lastIndex=n.ch;var f=t.exec(s);if(f){var d=s.slice(0,f.index).split("\n"),p=f[0].split("\n"),g=n.line+d.length-1,m=d[d.length-1].length;return{from:r(g,m),to:r(g+p.length-1,1==p.length?m+p[0].length:p[p.length-1].length),match:f}}}})(e,l,n)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),l.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=r(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(r(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=r(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,r(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=r(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new l(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new l(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var r=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)})})(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){return new r(e,t,n)})};var r=function(){return function(e,t,n){this.file=e;var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onloadend=function(o){try{if(404==r.status)throw"failed to loadResource "+e;t(new i(r.response))}catch(e){n(r.statusText)}},r.onerror=function(e){n(e)},r.send(),this.xhr=r}}(),i=function(){function e(e){this.blobData=e}return e.prototype.arrayBuffer=function(){var e=this;return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsArrayBuffer(e.blobData)})},e.prototype.blob=function(){var e=this;return new Promise(function(t,n){t(e.blobData)})},e.prototype.text=function(){var e=this;return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(e.blobData)})},e.prototype.json=function(){var e=this;return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(JSON.parse(r.result))},r.readAsText(e.blobData)})},e}();t.ResponseWrapper=i},function(e,t,n){(function(e){function t(e,t,n){var r;return(r=e.getWrapperElement().appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,o){o||(o={}),n(this,null);var s=t(this,r,o.bottom),a=!1,l=this;function c(e){if("string"==typeof e)h.value=e;else{if(a)return;a=!0,s.parentNode.removeChild(s),l.focus(),o.onClose&&o.onClose(s)}}var u,h=s.getElementsByTagName("input")[0];return h?(h.focus(),o.value&&(h.value=o.value,!1!==o.selectValueOnOpen&&h.select()),o.onInput&&e.on(h,"input",function(e){o.onInput(e,h.value,c)}),o.onKeyUp&&e.on(h,"keyup",function(e){o.onKeyUp(e,h.value,c)}),e.on(h,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,h.value,c)||((27==t.keyCode||!1!==o.closeOnEnter&&13==t.keyCode)&&(h.blur(),e.e_stop(t),c()),13==t.keyCode&&i(h.value,t))}),!1!==o.closeOnBlur&&e.on(h,"blur",c)):(u=s.getElementsByTagName("button")[0])&&(e.on(u,"click",function(){c(),l.focus()}),!1!==o.closeOnBlur&&e.on(u,"blur",c),u.focus()),c}),e.defineExtension("openConfirm",function(r,i,o){n(this,null);var s=t(this,r,o&&o.bottom),a=s.getElementsByTagName("button"),l=!1,c=this,u=1;function h(){l||(l=!0,s.parentNode.removeChild(s),c.focus())}a[0].focus();for(var f=0;f<a.length;++f){var d=a[f];!function(t){e.on(d,"click",function(n){e.e_preventDefault(n),h(),t&&t(c)})}(i[f]),e.on(d,"blur",function(){--u,setTimeout(function(){u<=0&&h()},200)}),e.on(d,"focus",function(){++u})}}),e.defineExtension("openNotification",function(r,i){n(this,c);var o,s=t(this,r,i&&i.bottom),a=!1,l=i&&void 0!==i.duration?i.duration:5e3;function c(){a||(a=!0,clearTimeout(o),s.parentNode.removeChild(s))}return e.on(s,"click",function(t){e.e_preventDefault(t),c()}),l&&(o=setTimeout(c,l)),c})})(n(0))},function(e,t,n){(function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function i(e,t,i){var s=e.getLineHandle(t.line),a=t.ch-1,l=i&&i.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=!l&&a>=0&&r[s.text.charAt(a)]||r[s.text.charAt(++a)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&i.strict&&u>0!=(a==t.ch))return null;var h=e.getTokenTypeAt(n(t.line,a+1)),f=o(e,n(t.line,a+(u>0?1:0)),u,h||null,i);return null==f?null:{from:n(t.line,a),to:f&&f.pos,match:f&&f.ch==c.charAt(0),forward:u>0}}function o(e,t,i,o,s){for(var a=s&&s.maxScanLineLength||1e4,l=s&&s.maxScanLines||1e3,c=[],u=s&&s.bracketRegex?s.bracketRegex:/[(){}[\]]/,h=i>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),f=t.line;f!=h;f+=i){var d=e.getLine(f);if(d){var p=i>0?0:d.length-1,g=i>0?d.length:-1;if(!(d.length>a))for(f==t.line&&(p=t.ch-(i<0?1:0));p!=g;p+=i){var m=d.charAt(p);if(u.test(m)&&(void 0===o||e.getTokenTypeAt(n(f,p+1))==o))if(">"==r[m].charAt(1)==i>0)c.push(m);else{if(!c.length)return{pos:n(f,p),ch:m};c.pop()}}}}return f-i!=(i>0?e.lastLine():e.firstLine())&&null}function s(e,r,o){for(var s=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&i(e,l[c].head,o);if(u&&e.getLine(u.from.line).length<=s){var h=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(u.from,n(u.from.line,u.from.ch+1),{className:h})),u.to&&e.getLine(u.to.line).length<=s&&a.push(e.markText(u.to,n(u.to.line,u.to.ch+1),{className:h}))}}if(a.length){t&&e.state.focused&&e.focus();var f=function(){e.operation(function(){for(var e=0;e<a.length;e++)a[e].clear()})};if(!r)return f;setTimeout(f,800)}}var a=null;function l(e){e.operation(function(){a&&(a(),a=null),a=s(e,!1,e.state.matchBrackets)})}e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&(t.off("cursorActivity",l),a&&(a(),a=null)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",l))}),e.defineExtension("matchBrackets",function(){s(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),i(this,e,t)}),e.defineExtension("scanForBracket",function(e,t,n,r){return o(this,e,t,n,r)})})(n(0))},function(e,t,n){(function(e){"use strict";function t(t,n,i,o){if(i&&i.call){var s=i;i=null}else s=r(t,i,"rangeFinder");"number"==typeof n&&(n=e.Pos(n,0));var a=r(t,i,"minFoldSize");function l(e){var r=s(t,n);if(!r||r.to.line-r.from.line<a)return null;for(var i=t.findMarksAt(r.from),l=0;l<i.length;++l)if(i[l].__isFold&&"fold"!==o){if(!e)return null;r.cleared=!0,i[l].clear()}return r}var c=l(!0);if(r(t,i,"scanUp"))for(;!c&&n.line>t.firstLine();)n=e.Pos(n.line-1,0),c=l(!1);if(c&&!c.cleared&&"unfold"!==o){var u=function(e,t){var n=r(e,t,"widget");if("string"==typeof n){var i=document.createTextNode(n);(n=document.createElement("span")).appendChild(i),n.className="CodeMirror-foldmarker"}else n&&(n=n.cloneNode(!0));return n}(t,i);e.on(u,"mousedown",function(t){h.clear(),e.e_preventDefault(t)});var h=t.markText(c.from,c.to,{replacedWith:u,clearOnEnter:r(t,i,"clearOnEnter"),__isFold:!0});h.on("clear",function(n,r){e.signal(t,"unfold",t,n,r)}),e.signal(t,"fold",t,c.from,c.to)}}e.newFoldFunction=function(e,n){return function(r,i){t(r,i,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,r){t(this,e,n,r)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var i=e[r](t,n);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}});var n={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function r(e,t,r){if(t&&void 0!==t[r])return t[r];var i=e.options.foldOptions;return i&&void 0!==i[r]?i[r]:n[r]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return r(this,e,t)})})(n(0))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),s=n(8),a=function(){return function(e,t,n){this.frameBuffer=e,this.renderBuffer=t,this.texture=n}}();t.RenderTarget=a;var l=function(){return function(){}}();t.Graph=l;var c=function(){function e(e,t,n,r){this.entity=e,this.start=t,this.stop=n,this.useTransitions=r}return e.prototype.setEntity=function(e){this.entityShader=e,this.useTransitions&&(this.transition=new o.DemlolishedTransitionBase(this.entityShader))},e}();t.TimeFragment=c;var u=function(){function e(e,t){this.screenWidth=e,this.screenHeight=t,this.alpha=0}return e.prototype.setScreen=function(e,t){this.screenWidth=e,this.screenWidth=t},r([s.Observe(!0),i("design:type",Number)],e.prototype,"time",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"timeTotal",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"mouseX",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"mouseY",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"screenWidth",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"screenHeight",void 0),r([s.Observe(!0),i("design:type",Number)],e.prototype,"alpha",void 0),e}();t.Uniforms=u;var h=function(){return function(){this.textures=new Array,this.type=0}}();t.Effect=h;var f=function(){return function(e,t,n,r){this.fftSize=e,this.smoothingTimeConstant=t,this.minDecibels=n,this.maxDecibels=r}}();t.AudioAnalyzerSettings=f;var d=function(){return function(){}}();t.AudioSettings=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(32);var r=function(){function e(){}return e.prototype.set=function(e,t,n,r){Reflect.get(e,t,r);return Reflect.set(e,t,n,r)},e.prototype.get=function(e,t,n){return Reflect.get(e,t,n)},e.prototype.observe=function(){},e}();t.DemolishedPropertyHandler=r,t.Observe=function(e){return function(t,n){return Reflect.defineMetadata("isObserved",e,t,n)}};var i=function(){function e(e){this.target=e,this.handler=new r}return e.prototype.getObserver=function(){return new Proxy(this.target,this.handler)},e}();t.DemoishedProperty=i;var o=function(){function e(){}return e.render=function(e,t){var n=this;Object.keys(e).forEach(function(r){var i=e[r];if(Reflect.getMetadata("isObserved",e,r))if("number"==typeof i||"string"==typeof i){var o=document.createElement("div"),s=document.createElement("label");s.textContent=r,o.appendChild(s);var a=document.createElement("input");a.type="text",a.id=r,a.value=i.toString(),a.addEventListener("change",function(t){e[r]=t.target.value}),a.addEventListener("click",function(t){t.target.value=e[r]}),o.appendChild(a),t.appendChild(o)}else"object"==typeof i&&n.render(e[r],t)})},e}();t.DemolishedDialogBuilder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(40);t.default=class extends r.a{constructor(e,t){super("ge_vec2picker_",t),this.width=this.width||200,this.height=this.height||200,this.min=this.min||-1,this.max=this.max||1,this.size=this.size||6,this.range=this.max-this.min,this.overPoint=!1;let n=-1*(this.range/2-this.max);this.setValue(e||[n,n]),this.create()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=2,this.ctx.strokeRect(0,0,this.width,this.height),this.ctx.beginPath(),this.ctx.lineWidth=.25;let e=this.width/20;for(let t=0;t<20;t++)this.ctx.moveTo(t*e,0),this.ctx.lineTo(t*e,this.height),this.ctx.moveTo(0,t*e),this.ctx.lineTo(this.width,t*e);this.ctx.stroke(),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+.5*this.height),this.ctx.lineTo(this.width,.5+.5*this.height),this.ctx.closePath(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(.5+.5*this.width,0),this.ctx.lineTo(.5+.5*this.width,this.height),this.ctx.closePath(),this.ctx.stroke();let t=Math.round((this.value.x-this.min)/this.range*this.width),n=Math.round((1-(this.value.y-this.min)/this.range)*this.height),r=this.size/2;t<r&&(t=r),t>this.width-r&&(t=this.width-r),n<r&&(n=r),n>this.height-r&&(n=this.height-r),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath();let i=this.overPoint?4:2;this.ctx.arc(t,n,i,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore(),this.overPoint=!1}onMouseMove(e){let t=e.offsetX,n=e.offsetY;this.value.x=this.range/this.width*t-(this.range-this.max),this.value.y=-1*(this.range/this.height*n-(this.range-this.max)),this.trigger("changed",this.value),this.overPoint=!0}setValue(e){this.value=new i.a(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);t.default=class{constructor(e){this.colors={},this.set(e)}set(e,t){if("number"==typeof e){t=t||"rgb",this.colors[t]={};for(var i=3;i--;){let n=t[i]||t.charAt(i);this.colors[t][n]=e}}else if("string"==typeof e){let i=e.replace(/(?:#|\)|%)/g,"").split("(");if(i[1]){let e=(i[1]||"").split(/,\s*/);t=t||(i[1]?i[0].substr(0,3):"rgb"),this.set(e,t)}else this.set(n.i(r.a)(e),"rgb")}else if(e)if(Array.isArray(e)){let n="";t=t||"rgb",this.colors[t]=this.colors[t]||{};for(let r=3;r--;){n=t[r]||t.charAt(r);let i=e.length>=3?r:0;this.colors[t][n]=parseFloat(e[i])}4===e.length&&(this.colors.alpha=parseFloat(e[3]))}else if(t)for(let i in e)this.colors[t][i]=n.i(r.b)(e[i]/n.i(r.c)(t)[i][1],0,1)*n.i(r.c)(t)[i][1];if(t){if("rgb"!==t){var o=r.d;this.colors.rgb=o[t+"2rgb"](this.colors[t])}this.convert(t),this.colors.hueRGB=r.d.hue2RGB(this.colors.hsv.h),this.colors.luminance=n.i(r.e)(this.colors.rgb)}}convert(e){let t=r.d,i=n.i(r.c)(),o={hsl:"hsv",cmyk:"cmy",rgb:e};if("alpha"!==e)for(let n in i)if(!i[n][n]&&e!==n&&"XYZ"!==n){let e=o[n]||"rgb";this.colors[n]=t[e+"2"+n](this.colors[e])}}get(e){if("rgb"!==e){var t=r.d;return this.colors[e]=t["rgb2"+e](this.colors.rgb),this.colors[e]}return this.colors.rgb}getString(e){if("HEX"===e)return r.d["rgb2"+e](this.colors.rgb);{let t=this.get(e),n=e,r="";"vec"===e&&(n+=this.colors.alpha?4:3),n+="(";for(let i=0;i<3;i++)r=e[i]||e.charAt(i),n+="vec"===e?t[r].toFixed(3):Math.floor(t[r]),2!==i&&(n+=",");return this.colors.alpha&&(n+=","+this.colors.alpha.toFixed(3)),n+=")"}}uniformType(){return this.colors.alpha?"vec4":"vec3"}uniformValue(){var e=this.get("vec"),t=[e.v,e.e,e.c];return this.colors.alpha&&t.push(this.colors.alpha),t}uniformMethod(e){return this.colors.alpha?"4f":"3f"}}},function(e,t,n){"use strict";t.b=c,t.e=function(e,t){for(var n=t?1:255,r=[e.r/n,e.g/n,e.b/n],i=r.length;i--;)r[i]=r[i]<=.03928?r[i]/12.92:Math.pow((r[i]+.055)/1.055,2.4);return a.r*r[0]+a.g*r[1]+a.b*r[2]},t.a=function(e){let t=document.createElement("div");t.style.backgroundColor=e,document.body.appendChild(t);let n=window.getComputedStyle(t).backgroundColor;"transparent"===n&&(n="rgb(0, 0, 0)");return t.parentNode.removeChild(t),n},t.c=function(e){return e?i[e]:i};var r,i={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,1],s:[0,1],v:[0,255]},hsl:{h:[0,360],s:[0,100],l:[0,100]},cmy:{c:[0,100],m:[0,100],y:[0,100]},cmyk:{c:[0,100],m:[0,100],y:[0,100],k:[0,100]},Lab:{L:[0,100],a:[-128,127],b:[-128,127]},XYZ:{X:[0,100],Y:[0,100],Z:[0,100]},vec:{v:[0,1],e:[0,1],c:[0,1]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},o={X:[.4124564,.3575761,.1804375],Y:[.2126729,.7151522,.072175],Z:[.0193339,.119192,.9503041],R:[3.2404542,-1.5371385,-.4985314],G:[-.969266,1.8760108,.041556],B:[.0556434,-.2040259,1.0572252]},s={X:o.X[0]+o.X[1]+o.X[2],Y:o.Y[0]+o.Y[1]+o.Y[2],Z:o.Z[0]+o.Z[1]+o.Z[2]},a={r:.2126,g:.7152,b:.0722};class l{static vec2rgb(e){return{r:e.v*i.rgb.r[1],g:e.e*i.rgb.g[1],b:e.c*i.rgb.b[1]}}static rgb2vec(e){return{v:e.r/i.rgb.r[1],e:e.g/i.rgb.g[1],c:e.b/i.rgb.b[1]}}static RGB2HEX(e){return((e.r<16?"0":"")+e.r.toString(16)+(e.g<16?"0":"")+e.g.toString(16)+(e.b<16?"0":"")+e.b.toString(16)).toUpperCase()}static HEX2rgb(e){return e=e.split(""),{r:parseInt(e[0]+e[e[3]?1:0],16)/255,g:parseInt(e[e[3]?2:1]+(e[3]||e[1]),16)/255,b:parseInt((e[4]||e[2])+(e[5]||e[2]),16)/255}}static hue2RGB(e){var t=6*e,n=Math.floor(t),r=6===t?0:t-n;return{r:Math.round(255*[1,1-r,0,0,r,1][n]),g:Math.round(255*[r,1,1,1-r,0,0][n]),b:Math.round(255*[0,0,r,1,1,1-r][n])}}static rgb2hsv(e){var t,n,i=e.r,o=e.g,s=e.b,a=0;return o<s&&(o=s+(s=o,0),a=-1),n=s,i<o&&(i=o+(o=i,0),a=-2/6-a,n=Math.min(o,s)),t=i-n,{h:(i?t/i:0)<1e-15?r&&r.hsl&&r.hsl.h||0:t?Math.abs(a+(o-s)/(6*t)):0,s:i?t/i:r&&r.hsv&&r.hsv.s||0,v:i}}static hsv2rgb(e){var t=6*e.h,n=e.s,r=e.v,i=Math.floor(t),o=t-i,s=r*(1-n),a=r*(1-o*n),l=r*(1-(1-o)*n),c=i%6;return{r:[r,a,s,s,l,r][c],g:[l,r,r,a,s,s][c],b:[s,s,l,r,r,a][c]}}static hsv2hsl(e){var t=(2-e.s)*e.v,n=e.s*e.v;return n=e.s?t<1?t?n/t:0:n/(2-t):0,{h:e.h,s:e.v||n?n:r&&r.hsl&&r.hsl.s||0,l:t/2}}static rgb2hsl(e,t){var n=l.rgb2hsv(e);return l.hsv2hsl(t?n:r.hsv=n)}static hsl2rgb(e){var t=6*e.h,n=e.s,r=e.l,i=r<.5?r*(1+n):r+n-n*r,o=r+r-i,s=i?(i-o)/i:0,a=Math.floor(t),l=i*s*(t-a),c=o+l,u=i-l,h=a%6;return{r:[i,u,o,o,c,i][h],g:[c,i,i,u,o,o][h],b:[o,o,c,i,i,u][h]}}static rgb2cmy(e){return{c:1-e.r,m:1-e.g,y:1-e.b}}static cmy2cmyk(e){var t=Math.min(Math.min(e.c,e.m),e.y),n=1-t||1e-20;return{c:(e.c-t)/n,m:(e.m-t)/n,y:(e.y-t)/n,k:t}}static cmyk2cmy(e){var t=e.k;return{c:e.c*(1-t)+t,m:e.m*(1-t)+t,y:e.y*(1-t)+t}}static cmy2rgb(e){return{r:1-e.c,g:1-e.m,b:1-e.y}}static rgb2cmyk(e){var t=l.rgb2cmy(e);return l.cmy2cmyk(t)}static cmyk2rgb(e){var t=l.cmyk2cmy(e);return l.cmy2rgb(t)}static XYZ2rgb(e){var t=o,n=e.X,r=e.Y,i=e.Z,s=n*t.R[0]+r*t.R[1]+i*t.R[2],a=n*t.G[0]+r*t.G[1]+i*t.G[2],l=n*t.B[0]+r*t.B[1]+i*t.B[2],u=1/2.4;return s=s>(t=.0031308)?1.055*Math.pow(s,u)-.055:12.92*s,a=a>t?1.055*Math.pow(a,u)-.055:12.92*a,l=l>t?1.055*Math.pow(l,u)-.055:12.92*l,{r:c(s,0,1),g:c(a,0,1),b:c(l,0,1)}}static rgb2XYZ(e){var t=o,n=e.r,r=e.g,i=e.b,s=.04045;return n=n>s?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>s?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>s?Math.pow((i+.055)/1.055,2.4):i/12.92,{X:n*t.X[0]+r*t.X[1]+i*t.X[2],Y:n*t.Y[0]+r*t.Y[1]+i*t.Y[2],Z:n*t.Z[0]+r*t.Z[1]+i*t.Z[2]}}static XYZ2Lab(e){var t=s,n=e.X/t.X,r=e.Y/t.Y,i=e.Z/t.Z,o=16/116,a=.008856,l=7.787037;return n=n>a?Math.pow(n,1/3):l*n+o,{L:116*(r=r>a?Math.pow(r,1/3):l*r+o)-16,a:500*(n-r),b:200*(r-(i=i>a?Math.pow(i,1/3):l*i+o))}}static Lab2XYZ(e){var t=s,n=(e.L+16)/116,r=e.a/500+n,i=n-e.b/200,o=Math.pow(r,3),a=Math.pow(n,3),l=Math.pow(i,3),c=16/116,u=.008856,h=7.787037;return{X:(o>u?o:(r-c)/h)*t.X,Y:(a>u?a:(n-c)/h)*t.Y,Z:(l>u?l:(i-c)/h)*t.Z}}static rgb2Lab(e){var t=l.rgb2XYZ(e);return l.XYZ2Lab(t)}static Lab2rgb(e){var t=l.Lab2XYZ(e);return l.XYZ2rgb(t)}}function c(e,t,n){return e>n?n:e<t?t:e}t.d=l},function(e,t,n){"use strict";t.a=function(e){let t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}},function(e,t,n){(function(e){"use strict";var t={},n=/[^\s\u00a0]/,r=e.Pos;function i(e){var t=e.search(n);return-1==t?0:t}function o(e,t){var n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",function(e){e||(e=t);for(var n=1/0,i=this.listSelections(),o=null,s=i.length-1;s>=0;s--){var a=i[s].from(),l=i[s].to();a.line>=n||(l.line>=n&&(l=r(n,0)),n=a.line,null==o?this.uncomment(a,l,e)?o="un":(this.lineComment(a,l,e),o="line"):"un"==o?this.uncomment(a,l,e):this.lineComment(a,l,e))}}),e.defineExtension("lineComment",function(e,s,a){a||(a=t);var l=this,c=o(l,e),u=l.getLine(e.line);if(null!=u&&(h=e,f=u,!/\bstring\b/.test(l.getTokenTypeAt(r(h.line,0)))||/^[\'\"\`]/.test(f))){var h,f,d=a.lineComment||c.lineComment;if(d){var p=Math.min(0!=s.ch||s.line==e.line?s.line+1:s.line,l.lastLine()+1),g=null==a.padding?" ":a.padding,m=a.commentBlankLines||e.line==s.line;l.operation(function(){if(a.indent){for(var t=null,o=e.line;o<p;++o){var s=(c=l.getLine(o)).slice(0,i(c));(null==t||t.length>s.length)&&(t=s)}for(o=e.line;o<p;++o){var c=l.getLine(o),u=t.length;(m||n.test(c))&&(c.slice(0,u)!=t&&(u=i(c)),l.replaceRange(t+d+g,r(o,0),r(o,u)))}}else for(o=e.line;o<p;++o)(m||n.test(l.getLine(o)))&&l.replaceRange(d+g,r(o,0))})}else(a.blockCommentStart||c.blockCommentStart)&&(a.fullLines=!0,l.blockComment(e,s,a))}}),e.defineExtension("blockComment",function(e,i,s){s||(s=t);var a=this,l=o(a,e),c=s.blockCommentStart||l.blockCommentStart,u=s.blockCommentEnd||l.blockCommentEnd;if(c&&u){if(!/\bcomment\b/.test(a.getTokenTypeAt(r(e.line,0)))){var h=Math.min(i.line,a.lastLine());h!=e.line&&0==i.ch&&n.test(a.getLine(h))&&--h;var f=null==s.padding?" ":s.padding;e.line>h||a.operation(function(){if(0!=s.fullLines){var t=n.test(a.getLine(h));a.replaceRange(f+u,r(h)),a.replaceRange(c+f,r(e.line,0));var o=s.blockCommentLead||l.blockCommentLead;if(null!=o)for(var d=e.line+1;d<=h;++d)(d!=h||t)&&a.replaceRange(o+f,r(d,0))}else a.replaceRange(u,i),a.replaceRange(c,e)})}}else(s.lineComment||l.lineComment)&&0!=s.fullLines&&a.lineComment(e,i,s)}),e.defineExtension("uncomment",function(e,i,s){s||(s=t);var a,l=this,c=o(l,e),u=Math.min(0!=i.ch||i.line==e.line?i.line:i.line-1,l.lastLine()),h=Math.min(e.line,u),f=s.lineComment||c.lineComment,d=[],p=null==s.padding?" ":s.padding;e:if(f){for(var g=h;g<=u;++g){var m=l.getLine(g),v=m.indexOf(f);if(v>-1&&!/comment/.test(l.getTokenTypeAt(r(g,v+1)))&&(v=-1),-1==v&&n.test(m))break e;if(v>-1&&n.test(m.slice(0,v)))break e;d.push(m)}if(l.operation(function(){for(var e=h;e<=u;++e){var t=d[e-h],n=t.indexOf(f),i=n+f.length;n<0||(t.slice(i,i+p.length)==p&&(i+=p.length),a=!0,l.replaceRange("",r(e,n),r(e,i)))}}),a)return!0}var y=s.blockCommentStart||c.blockCommentStart,b=s.blockCommentEnd||c.blockCommentEnd;if(!y||!b)return!1;var w=s.blockCommentLead||c.blockCommentLead,x=l.getLine(h),C=x.indexOf(y);if(-1==C)return!1;var S=u==h?x:l.getLine(u),k=S.indexOf(b,u==h?C+y.length:0);-1==k&&h!=u&&(S=l.getLine(--u),k=S.indexOf(b));var T=r(h,C+1),L=r(u,k+1);if(-1==k||!/comment/.test(l.getTokenTypeAt(T))||!/comment/.test(l.getTokenTypeAt(L))||l.getRange(T,L,"\n").indexOf(b)>-1)return!1;var M=x.lastIndexOf(y,e.ch),E=-1==M?-1:x.slice(0,e.ch).indexOf(b,M+y.length);if(-1!=M&&-1!=E&&E+b.length!=e.ch)return!1;E=S.indexOf(b,i.ch);var A=S.slice(i.ch).lastIndexOf(y,E-i.ch);return M=-1==E||-1==A?-1:i.ch+A,(-1==E||-1==M||M==i.ch)&&(l.operation(function(){l.replaceRange("",r(u,k-(p&&S.slice(k-p.length,k)==p?p.length:0)),r(u,k+b.length));var e=C+y.length;if(p&&x.slice(e,e+p.length)==p&&(e+=p.length),l.replaceRange("",r(h,C),r(h,e)),w)for(var t=h+1;t<=u;++t){var i=l.getLine(t),o=i.indexOf(w);if(-1!=o&&!n.test(i.slice(0,o))){var s=o+w.length;p&&i.slice(s,s+p.length)==p&&(s+=p.length),l.replaceRange("",r(t,o),r(t,s))}}}),!0)})})(n(0))},function(e,t,n){(function(e){function t(e,t,n,r){this.cm=e,this.node=t,this.options=n,this.height=r,this.cleared=!1}function n(e,t){for(var n=t.nextSibling;n;n=n.nextSibling)if(n==e.getWrapperElement())return!0;return!1}e.defineExtension("addPanel",function(e,r){r=r||{},this.state.panels||function(e){var t=e.getWrapperElement(),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r=parseInt(n.height),i=e.state.panels={setHeight:t.style.height,heightLeft:r,panels:0,wrapper:document.createElement("div")};t.parentNode.insertBefore(i.wrapper,t);var o=e.hasFocus();i.wrapper.appendChild(t),o&&e.focus();e._setSize=e.setSize,null!=r&&(e.setSize=function(t,n){if(null==n)return this._setSize(t,n);if(i.setHeight=n,"number"!=typeof n){var o=/^(\d+\.?\d*)px$/.exec(n);o?n=Number(o[1]):(i.wrapper.style.height=n,n=i.wrapper.offsetHeight,i.wrapper.style.height="")}e._setSize(t,i.heightLeft+=n-r),r=n})}(this);var i=this.state.panels,o=i.wrapper,s=this.getWrapperElement();r.after instanceof t&&!r.after.cleared?o.insertBefore(e,r.before.node.nextSibling):r.before instanceof t&&!r.before.cleared?o.insertBefore(e,r.before.node):r.replace instanceof t&&!r.replace.cleared?(o.insertBefore(e,r.replace.node),r.replace.clear()):"bottom"==r.position?o.appendChild(e):"before-bottom"==r.position?o.insertBefore(e,s.nextSibling):"after-top"==r.position?o.insertBefore(e,s):o.insertBefore(e,o.firstChild);var a=r&&r.height||e.offsetHeight;return this._setSize(null,i.heightLeft-=a),i.panels++,r.stable&&n(this,e)&&this.scrollTo(null,this.getScrollInfo().top+a),new t(this,e,r,a)}),t.prototype.clear=function(){if(!this.cleared){this.cleared=!0;var e=this.cm.state.panels;this.cm._setSize(null,e.heightLeft+=this.height),this.options.stable&&n(this.cm,this.node)&&this.cm.scrollTo(null,this.cm.getScrollInfo().top-this.height),e.wrapper.removeChild(this.node),0==--e.panels&&function(e){var t=e.state.panels;e.state.panels=null;var n=e.getWrapperElement();t.wrapper.parentNode.replaceChild(n,t.wrapper),n.style.height=t.setHeight,e.setSize=e._setSize,e.setSize()}(this.cm)}},t.prototype.changed=function(e){var t=null==e?this.node.offsetHeight:e,n=this.cm.state.panels;this.cm._setSize(null,n.heightLeft-=t-this.height),this.height=t}})(n(0))},function(e,t,n){(function(e){"use strict";function t(t){t.state.rulerDiv.textContent="";var n=t.getOption("rulers"),r=t.defaultCharWidth(),i=t.charCoords(e.Pos(t.firstLine(),0),"div").left;t.state.rulerDiv.style.minHeight=t.display.scroller.offsetHeight+30+"px";for(var o=0;o<n.length;o++){var s=document.createElement("div");s.className="CodeMirror-ruler";var a,l=n[o];"number"==typeof l?a=l:(a=l.column,l.className&&(s.className+=" "+l.className),l.color&&(s.style.borderColor=l.color),l.lineStyle&&(s.style.borderLeftStyle=l.lineStyle),l.width&&(s.style.borderLeftWidth=l.width)),s.style.left=i+a*r+"px",t.state.rulerDiv.appendChild(s)}}e.defineOption("rulers",!1,function(e,n){e.state.rulerDiv&&(e.state.rulerDiv.parentElement.removeChild(e.state.rulerDiv),e.state.rulerDiv=null,e.off("refresh",t)),n&&n.length&&(e.state.rulerDiv=e.display.lineSpace.parentElement.insertBefore(document.createElement("div"),e.display.lineSpace),e.state.rulerDiv.className="CodeMirror-rulers",t(e),e.on("refresh",t))})})(n(0))},function(e,t,n){(function(e){var t={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},n=e.Pos;function r(e,n){return"pairs"==n&&"string"==typeof e?e:"object"==typeof e&&null!=e[n]?e[n]:t[n]}e.defineOption("autoCloseBrackets",!1,function(t,n,s){s&&s!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),n&&(o(r(n,"pairs")),t.state.closeBrackets=n,t.addKeyMap(i))});var i={Backspace:function(t){var i=a(t);if(!i||t.getOption("disableInput"))return e.Pass;for(var o=r(i,"pairs"),s=t.listSelections(),l=0;l<s.length;l++){if(!s[l].empty())return e.Pass;var u=c(t,s[l].head);if(!u||o.indexOf(u)%2!=0)return e.Pass}for(var l=s.length-1;l>=0;l--){var h=s[l].head;t.replaceRange("",n(h.line,h.ch-1),n(h.line,h.ch+1),"+delete")}},Enter:function(t){var n=a(t),i=n&&r(n,"explode");if(!i||t.getOption("disableInput"))return e.Pass;for(var o=t.listSelections(),s=0;s<o.length;s++){if(!o[s].empty())return e.Pass;var l=c(t,o[s].head);if(!l||i.indexOf(l)%2!=0)return e.Pass}t.operation(function(){t.replaceSelection("\n\n",null),t.execCommand("goCharLeft"),o=t.listSelections();for(var e=0;e<o.length;e++){var n=o[e].head.line;t.indentLine(n,null,!0),t.indentLine(n+1,null,!0)}})}};function o(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r="'"+n+"'";i[r]||(i[r]=s(n))}}function s(t){return function(i){return function(t,i){var o=a(t);if(!o||t.getOption("disableInput"))return e.Pass;var s=r(o,"pairs"),c=s.indexOf(i);if(-1==c)return e.Pass;for(var f,d=r(o,"triples"),p=s.charAt(c+1)==i,g=t.listSelections(),m=c%2==0,v=0;v<g.length;v++){var y,b=g[v],w=b.head,x=t.getRange(w,n(w.line,w.ch+1));if(m&&!b.empty())y="surround";else if(!p&&m||x!=i)if(p&&w.ch>1&&d.indexOf(i)>=0&&t.getRange(n(w.line,w.ch-2),w)==i+i&&(w.ch<=2||t.getRange(n(w.line,w.ch-3),n(w.line,w.ch-2))!=i))y="addFour";else if(p){if(e.isWordChar(x)||!u(t,w,i))return e.Pass;y="both"}else{if(!m||t.getLine(w.line).length!=w.ch&&!l(x,s)&&!/\s/.test(x))return e.Pass;y="both"}else y=p&&h(t,w)?"both":d.indexOf(i)>=0&&t.getRange(w,n(w.line,w.ch+3))==i+i+i?"skipThree":"skip";if(f){if(f!=y)return e.Pass}else f=y}var C=c%2?s.charAt(c-1):i,S=c%2?i:s.charAt(c+1);t.operation(function(){if("skip"==f)t.execCommand("goCharRight");else if("skipThree"==f)for(var r=0;r<3;r++)t.execCommand("goCharRight");else if("surround"==f){for(var i=t.getSelections(),r=0;r<i.length;r++)i[r]=C+i[r]+S;t.replaceSelections(i,"around"),i=t.listSelections().slice();for(var r=0;r<i.length;r++)i[r]=(o=i[r],void 0,s=e.cmpPos(o.anchor,o.head)>0,{anchor:new n(o.anchor.line,o.anchor.ch+(s?-1:1)),head:new n(o.head.line,o.head.ch+(s?1:-1))});t.setSelections(i)}else"both"==f?(t.replaceSelection(C+S,null),t.triggerElectric(C+S),t.execCommand("goCharLeft")):"addFour"==f&&(t.replaceSelection(C+C+C+C,"before"),t.execCommand("goCharRight"));var o,s})}(i,t)}}function a(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function l(e,t){var n=t.lastIndexOf(e);return n>-1&&n%2==1}function c(e,t){var r=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return 2==r.length?r:null}function u(t,n,r){var i=t.getLine(n.line),o=t.getTokenAt(n);if(/\bstring2?\b/.test(o.type)||h(t,n))return!1;var s=new e.StringStream(i.slice(0,n.ch)+r+i.slice(n.ch),4);for(s.pos=s.start=o.start;;){var a=t.getMode().token(s,o.state);if(s.pos>=n.ch+1)return/\bstring2?\b/.test(a);s.start=s.pos}}function h(e,t){var r=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(r.type)&&r.start==t.ch}o(t.pairs+"`")})(n(0))},function(e,t,n){(function(e){"use strict";e.defineOption("foldGutter",!1,function(t,n,r){r&&r!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",s),t.off("change",a),t.off("viewportChange",l),t.off("fold",c),t.off("unfold",c),t.off("swapDoc",a)),n&&(t.state.foldGutter=new function(e){this.options=e,this.from=this.to=0}(function(e){!0===e&&(e={});null==e.gutter&&(e.gutter="CodeMirror-foldgutter");null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open");null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded");return e}(n)),o(t),t.on("gutterClick",s),t.on("change",a),t.on("viewportChange",l),t.on("fold",c),t.on("unfold",c),t.on("swapDoc",a))});var t=e.Pos;function n(e,n){for(var r=e.findMarks(t(n,0),t(n+1,0)),i=0;i<r.length;++i)if(r[i].__isFold&&r[i].find().from.line==n)return r[i]}function r(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function i(e,i,o){var s=e.state.foldGutter.options,a=i,l=e.foldOption(s,"minFoldSize"),c=e.foldOption(s,"rangeFinder");e.eachLine(i,o,function(i){var o=null;if(n(e,a))o=r(s.indicatorFolded);else{var u=t(a,0),h=c&&c(e,u);h&&h.to.line-h.from.line>=l&&(o=r(s.indicatorOpen))}e.setGutterMarker(i,s.gutter,o),++a})}function o(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){i(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function s(e,r,i){var o=e.state.foldGutter;if(o){var s=o.options;if(i==s.gutter){var a=n(e,r);a?a.clear():e.foldCode(t(r,0),s.rangeFinder)}}}function a(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){o(e)},n.foldOnChangeTimeSpan||600)}}function l(e){var t=e.state.foldGutter;if(t){var n=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?o(e):e.operation(function(){n.from<t.from&&(i(e,n.from,t.from),t.from=n.from),n.to>t.to&&(i(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}}function c(e,t){var n=e.state.foldGutter;if(n){var r=t.line;r>=n.from&&r<n.to&&i(e,r,r+1)}}})(n(0),n(6))},function(e,t,n){(function(e){"use strict";function t(t,n){var r=t.getLine(n),i=r.search(/\S/);return-1==i||/\bcomment\b/.test(t.getTokenTypeAt(e.Pos(n,i+1)))?-1:e.countColumn(r,null,t.getOption("tabSize"))}e.registerHelper("fold","indent",function(n,r){var i=t(n,r.line);if(!(i<0)){for(var o=null,s=r.line+1,a=n.lastLine();s<=a;++s){var l=t(n,s);if(-1==l);else{if(!(l>i))break;o=s}}return o?{from:e.Pos(r.line,n.getLine(r.line).length),to:e.Pos(o,n.getLine(o).length)}:void 0}})})(n(0))},function(e,t,n){(function(e){var t=e.Pos;function n(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n])}function r(r,i,l,c){var u=r.getCursor(),h=l(r,u);if(!/\b(?:string|comment)\b/.test(h.type)){h.state=e.innerMode(r.getMode(),h.state).state,/^[\w$_]*$/.test(h.string)?h.end>u.ch&&(h.end=u.ch,h.string=h.string.slice(0,u.ch-h.start)):h={start:u.ch,end:u.ch,string:"",state:h.state,type:"."==h.string?"property":null};for(var f=h;"property"==f.type;){if("."!=(f=l(r,t(u.line,f.start))).string)return;if(f=l(r,t(u.line,f.start)),!d)var d=[];d.push(f)}return{list:function(e,t,r,i){var l=[],c=e.string,u=i&&i.globalScope||window;function h(e){0!=e.lastIndexOf(c,0)||function(e,t){if(!Array.prototype.indexOf){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}return-1!=e.indexOf(t)}(l,e)||l.push(e)}function f(e){"string"==typeof e?n(o,h):e instanceof Array?n(s,h):e instanceof Function&&n(a,h),function(e,t){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var n=e;n;n=Object.getPrototypeOf(n))Object.getOwnPropertyNames(n).forEach(t);else for(var r in e)t(r)}(e,h)}if(t&&t.length){var d,p=t.pop();for(p.type&&0===p.type.indexOf("variable")?(i&&i.additionalContext&&(d=i.additionalContext[p.string]),i&&!1===i.useGlobalScope||(d=d||u[p.string])):"string"==p.type?d="":"atom"==p.type?d=1:"function"==p.type&&(null==u.jQuery||"$"!=p.string&&"jQuery"!=p.string||"function"!=typeof u.jQuery?null!=u._&&"_"==p.string&&"function"==typeof u._&&(d=u._()):d=u.jQuery());null!=d&&t.length;)d=d[t.pop().string];null!=d&&f(d)}else{for(var g=e.state.localVars;g;g=g.next)h(g.name);for(var g=e.state.globalVars;g;g=g.next)h(g.name);i&&!1===i.useGlobalScope||f(u),n(r,h)}return l}(h,d,i,c),from:t(u.line,h.start),to:t(u.line,h.end)}}}function i(e,t){var n=e.getTokenAt(t);return t.ch==n.start+1&&"."==n.string.charAt(0)?(n.end=n.start,n.string=".",n.type="property"):/^\.[\w$_]*$/.test(n.string)&&(n.type="property",n.start++,n.string=n.string.replace(/\./,"")),n}e.registerHelper("hint","javascript",function(e,t){return r(e,l,function(e,t){return e.getTokenAt(t)},t)}),e.registerHelper("hint","coffeescript",function(e,t){return r(e,c,i,t)});var o="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),s="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),a="prototype apply call bind".split(" "),l="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),c="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")})(n(0))},function(e,t,n){(function(e){"use strict";var t="CodeMirror-hint",n="CodeMirror-hint-active";function r(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e.showHint(r)},e.defineExtension("showHint",function(t){t=function(e,t,n){var r=e.options.hintOptions,i={};for(var o in u)i[o]=u[o];if(r)for(var o in r)void 0!==r[o]&&(i[o]=r[o]);if(n)for(var o in n)void 0!==n[o]&&(i[o]=n[o]);i.hint.resolve&&(i.hint=i.hint.resolve(e,t));return i}(this,this.getCursor("start"),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var i=0;i<n.length;i++)if(n[i].head.line!=n[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new r(this,t);o.options.hint&&(e.signal(this,"startCompletion",this),o.update(!0))}});var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;function s(e){return"string"==typeof e?e:e.text}function a(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function l(r,i){this.completion=r,this.data=i,this.picked=!1;var o=this,l=r.cm,c=this.hints=document.createElement("ul");c.className="CodeMirror-hints",this.selectedHint=i.selectedHint||0;for(var u=i.list,h=0;h<u.length;++h){var f=c.appendChild(document.createElement("li")),d=u[h],p=t+(h!=this.selectedHint?"":" "+n);null!=d.className&&(p=d.className+" "+p),f.className=p,d.render?d.render(f,i,d):f.appendChild(document.createTextNode(d.displayText||s(d))),f.hintId=h}var g=l.cursorCoords(r.options.alignWithWord?i.from:null),m=g.left,v=g.bottom,y=!0;c.style.left=m+"px",c.style.top=v+"px";var b=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),w=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(r.options.container||document.body).appendChild(c);var x=c.getBoundingClientRect(),C=x.bottom-w,S=c.scrollHeight>c.clientHeight+1,k=l.getScrollInfo();if(C>0){var T=x.bottom-x.top;if(g.top-(g.bottom-x.top)-T>0)c.style.top=(v=g.top-T)+"px",y=!1;else if(T>w){c.style.height=w-5+"px",c.style.top=(v=g.bottom-x.top)+"px";var L=l.getCursor();i.from.ch!=L.ch&&(g=l.cursorCoords(L),c.style.left=(m=g.left)+"px",x=c.getBoundingClientRect())}}var M,E=x.right-b;if(E>0&&(x.right-x.left>b&&(c.style.width=b-5+"px",E-=x.right-x.left-b),c.style.left=(m=g.left-E)+"px"),S)for(var A=c.firstChild;A;A=A.nextSibling)A.style.paddingRight=l.display.nativeBarWidth+"px";(l.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},r=e.options.customKeys,i=r?{}:n;function o(e,r){var o;o="string"!=typeof r?function(e){return r(e,t)}:n.hasOwnProperty(r)?n[r]:r,i[e]=o}if(r)for(var s in r)r.hasOwnProperty(s)&&o(s,r[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&o(s,a[s]);return i}(r,{moveFocus:function(e,t){o.changeActive(o.selectedHint+e,t)},setFocus:function(e){o.changeActive(e)},menuSize:function(){return o.screenAmount()},length:u.length,close:function(){r.close()},pick:function(){o.pick()},data:i})),r.options.closeOnUnfocus)&&(l.on("blur",this.onBlur=function(){M=setTimeout(function(){r.close()},100)}),l.on("focus",this.onFocus=function(){clearTimeout(M)}));return l.on("scroll",this.onScroll=function(){var e=l.getScrollInfo(),t=l.getWrapperElement().getBoundingClientRect(),n=v+k.top-e.top,i=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(y||(i+=c.offsetHeight),i<=t.top||i>=t.bottom)return r.close();c.style.top=n+"px",c.style.left=m+k.left-e.left+"px"}),e.on(c,"dblclick",function(e){var t=a(c,e.target||e.srcElement);t&&null!=t.hintId&&(o.changeActive(t.hintId),o.pick())}),e.on(c,"click",function(e){var t=a(c,e.target||e.srcElement);t&&null!=t.hintId&&(o.changeActive(t.hintId),r.options.completeOnSingleClick&&o.pick())}),e.on(c,"mousedown",function(){setTimeout(function(){l.focus()},20)}),e.signal(i,"select",u[this.selectedHint],c.childNodes[this.selectedHint]),!0}function c(e,t,n,r){if(e.async)e(t,r,n);else{var i=e(t,n);i&&i.then?i.then(r):r(i)}}r.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n];r.hint?r.hint(this.cm,t,r):this.cm.replaceRange(s(r),r.from||t.from,r.to||t.to,"complete"),e.signal(t,"pick",r),this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=i(function(){n.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;c(this.options.hint,this.cm,this.options,function(r){t.tick==n&&t.finishUpdate(r,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var r,i,o=this.widget&&this.widget.picked||n&&this.options.completeSingle;(this.widget&&this.widget.close(),t&&this.data&&(r=this.data,i=t,e.cmpPos(i.from,r.from)>0&&r.to.ch-r.from.ch!=i.to.ch-i.from.ch))||(this.data=t,t&&t.list.length&&(o&&1==t.list.length?this.pick(t,0):(this.widget=new l(this,t),e.signal(t,"shown"))))}},l.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i.className=i.className.replace(" "+n,""),(i=this.hints.childNodes[this.selectedHint=t]).className+=" "+n,i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:function(t,n){var r,i=t.getHelpers(n,"hint");if(i.length){var o=function(e,t,n){var r=function(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}(e,i);!function i(o){if(o==r.length)return t(null);c(r[o],e,n,function(e){e&&e.list.length>0?t(e):i(o+1)})}(0)};return o.async=!0,o.supportsSelection=!0,o}return(r=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:r})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",function(t,n){var r=t.getCursor(),i=t.getTokenAt(r),o=e.Pos(r.line,i.end);if(i.string&&/\w/.test(i.string[i.string.length-1]))var s=i.string,a=e.Pos(r.line,i.start);else s="",a=o;for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,s.length)==s&&l.push(u)}if(l.length)return{list:l,from:a,to:o}}),e.commands.autocomplete=e.showHint;var u={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)})(n(0))},function(e,t,n){(function(e){"use strict";function t(e){return e.state.search||(e.state.search=new function(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null})}function n(e){return"string"==typeof e&&e==e.toLowerCase()}function r(e,t,r){return e.getSearchCursor(t,r,{caseFold:n(t),multiline:!0})}function i(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r,selectValueOnOpen:!0}):i(prompt(n,r))}function o(e){return e.replace(/\\(.)/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":t})}function s(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=o(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}var a='<span class="CodeMirror-search-label">Search:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function l(e,t,r){t.queryText=r,t.query=s(r),e.removeOverlay(t.overlay,n(t.query)),t.overlay=function(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}(t.query,n(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,n(t.query)))}function c(n,r,o,s){var c=t(n);if(c.query)return u(n,r);var f=n.getSelection()||c.lastQuery;if(f instanceof RegExp&&"x^"==f.source&&(f=null),o&&n.openDialog){var d=null,p=function(t,r){e.e_stop(r),t&&(t!=c.queryText&&(l(n,c,t),c.posFrom=c.posTo=n.getCursor()),d&&(d.style.opacity=1),u(n,r.shiftKey,function(e,t){var r;t.line<3&&document.querySelector&&(r=n.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>n.cursorCoords(t,"window").top&&((d=r).style.opacity=.4)}))};!function(e,t,n,r,i){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){h(e)},onKeyDown:i})}(n,a,f,p,function(r,i){var o=e.keyName(r),s=n.getOption("extraKeys"),a=s&&s[o]||e.keyMap[n.getOption("keyMap")][o];"findNext"==a||"findPrev"==a||"findPersistentNext"==a||"findPersistentPrev"==a?(e.e_stop(r),l(n,t(n),i),n.execCommand(a)):"find"!=a&&"findPersistent"!=a||(e.e_stop(r),p(i,r))}),s&&f&&(l(n,c,f),u(n,r))}else i(n,a,"Search for:",f,function(e){e&&!c.query&&n.operation(function(){l(n,c,e),c.posFrom=c.posTo=n.getCursor(),u(n,r)})})}function u(n,i,o){n.operation(function(){var s=t(n),a=r(n,s.query,i?s.posFrom:s.posTo);(a.find(i)||(a=r(n,s.query,i?e.Pos(n.lastLine()):e.Pos(n.firstLine(),0))).find(i))&&(n.setSelection(a.from(),a.to()),n.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),o&&o(a.from(),a.to()))})}function h(e){e.operation(function(){var n=t(e);n.lastQuery=n.query,n.query&&(n.query=n.queryText=null,e.removeOverlay(n.overlay),n.annotate&&(n.annotate.clear(),n.annotate=null))})}var f=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',d='<span class="CodeMirror-search-label">With:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',p='<span class="CodeMirror-search-label">Replace?</span> <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>';function g(e,t,n){e.operation(function(){for(var i=r(e,t);i.findNext();)if("string"!=typeof t){var o=e.getRange(i.from(),i.to()).match(t);i.replace(n.replace(/\$(\d)/g,function(e,t){return o[t]}))}else i.replace(n)})}function m(e,n){if(!e.getOption("readOnly")){var a=e.getSelection()||t(e).lastQuery,l='<span class="CodeMirror-search-label">'+(n?"Replace all:":"Replace:")+"</span>";i(e,l+f,l,a,function(t){t&&(t=s(t),i(e,d,"Replace with:","",function(i){if(i=o(i),n)g(e,t,i);else{h(e);var s=r(e,t,e.getCursor("from")),a=function(){var n,o=s.from();!(n=s.findNext())&&(s=r(e,t),!(n=s.findNext())||o&&s.from().line==o.line&&s.from().ch==o.ch)||(e.setSelection(s.from(),s.to()),e.scrollIntoView({from:s.from(),to:s.to()}),function(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}(e,p,"Replace?",[function(){l(n)},a,function(){g(e,t,i)}]))},l=function(e){s.replace("string"==typeof t?i:i.replace(/\$(\d)/g,function(t,n){return e[n]})),a()};a()}}))})}}e.commands.find=function(e){h(e),c(e)},e.commands.findPersistent=function(e){h(e),c(e,!1,!0)},e.commands.findPersistentNext=function(e){c(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){c(e,!0,!0,!0)},e.commands.findNext=c,e.commands.findPrev=function(e){c(e,!0)},e.commands.clearSearch=h,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}})(n(0),n(2),n(4))},function(e,t,n){(function(e){"use strict";var t=e.Pos;function n(e,t,n){for(var r=n.paragraphStart||e.getHelper(t,"paragraphStart"),i=t.line,o=e.firstLine();i>o;--i){var s=e.getLine(i);if(r&&r.test(s))break;if(!/\S/.test(s)){++i;break}}for(var a=n.paragraphEnd||e.getHelper(t,"paragraphEnd"),l=t.line+1,c=e.lastLine();l<=c;++l){s=e.getLine(l);if(a&&a.test(s)){++l;break}if(!/\S/.test(s))break}return{from:i,to:l}}function r(e,t,n,r){for(var i=t;i<e.length&&" "==e.charAt(i);)i++;for(;i>0&&!n.test(e.slice(i-1,i+1));--i);for(var o=!0;;o=!1){var s=i;if(r)for(;" "==e.charAt(s-1);)--s;if(0!=s||!o)return{from:s,to:i};i=t}}function i(n,i,o,s){i=n.clipPos(i),o=n.clipPos(o);var a=s.column||80,l=s.wrapOn||/\s\S|-[^\.\d]/,c=!1!==s.killTrailingSpace,u=[],h="",f=i.line,d=n.getRange(i,o,!1);if(!d.length)return null;for(var p=d[0].match(/^[ \t]*/)[0],g=0;g<d.length;++g){var m=d[g],v=h.length,y=0;h&&m&&!l.test(h.charAt(h.length-1)+m.charAt(0))&&(h+=" ",y=1);var b="";if(g&&(b=m.match(/^\s*/)[0],m=m.slice(b.length)),h+=m,g){var w=h.length>a&&p==b&&r(h,a,l,c);w&&w.from==v&&w.to==v+y?(h=p+m,++f):u.push({text:[y?" ":""],from:t(f,v),to:t(f+1,b.length)})}for(;h.length>a;){var x=r(h,a,l,c);u.push({text:["",p],from:t(f,x.from),to:t(f,x.to)}),h=p+h.slice(x.to),++f}}return u.length&&n.operation(function(){for(var t=0;t<u.length;++t){var r=u[t];(r.text||e.cmpPos(r.from,r.to))&&n.replaceRange(r.text,r.from,r.to)}}),u.length?{from:u[0].from,to:e.changeEnd(u[u.length-1])}:null}e.defineExtension("wrapParagraph",function(e,r){r=r||{},e||(e=this.getCursor());var o=n(this,e,r);return i(this,t(o.from,0),t(o.to-1),r)}),e.commands.wrapLines=function(e){e.operation(function(){for(var r=e.listSelections(),o=e.lastLine()+1,s=r.length-1;s>=0;s--){var a,l=r[s];if(l.empty()){var c=n(e,l.head,{});a={from:t(c.from,0),to:t(c.to-1)}}else a={from:l.from(),to:l.to()};a.to.line>=o||(o=a.from.line,i(e,a.from,a.to,{}))}})},e.defineExtension("wrapRange",function(e,t,n){return i(this,e,t,n||{})}),e.defineExtension("wrapParagraphsInRange",function(e,r,o){o=o||{};for(var s=this,a=[],l=e.line;l<=r.line;){var c=n(s,t(l,0),o);a.push(c),l=c.to}var u=!1;return a.length&&s.operation(function(){for(var e=a.length-1;e>=0;--e)u=u||i(s,t(a[e].from,0),t(a[e].to-1),o)}),u})})(n(0))},function(e,t,n){(function(e){"use strict";var t=e.keyMap.sublime={fallthrough:"default"},n=e.commands,r=e.Pos,i=e.keyMap.default==e.keyMap.macDefault,o=i?"Cmd-":"Ctrl-";function s(t,n){t.extendSelectionsBy(function(i){return t.display.shift||t.doc.extend||i.empty()?function(t,n,i){if(i<0&&0==n.ch)return t.clipPos(r(n.line-1));var o=t.getLine(n.line);if(i>0&&n.ch>=o.length)return t.clipPos(r(n.line+1,0));for(var s,a="start",l=n.ch,c=i<0?0:o.length,u=0;l!=c;l+=i,u++){var h=o.charAt(i<0?l-1:l),f="_"!=h&&e.isWordChar(h)?"w":"o";if("w"==f&&h.toUpperCase()==h&&(f="W"),"start"==a)"o"!=f&&(a="in",s=f);else if("in"==a&&s!=f){if("w"==s&&"W"==f&&i<0&&l--,"W"==s&&"w"==f&&i>0){s="w";continue}break}}return r(n.line,l)}(t.doc,i.head,n):n<0?i.from():i.to()})}var a=i?"Ctrl-":"Alt-";n[t[a+"Left"]="goSubwordLeft"]=function(e){s(e,-1)},n[t[a+"Right"]="goSubwordRight"]=function(e){s(e,1)},i&&(t["Cmd-Left"]="goLineStartSmart");var l=i?"Ctrl-Alt-":"Ctrl-";function c(t,n){if(t.isReadOnly())return e.Pass;t.operation(function(){for(var e=t.listSelections().length,i=[],o=-1,s=0;s<e;s++){var a=t.listSelections()[s].head;if(!(a.line<=o)){var l=r(a.line+(n?0:1),0);t.replaceRange("\n",l,null,"+insertLine"),t.indentLine(l.line,null,!0),i.push({head:l,anchor:l}),o=a.line+1}}t.setSelections(i)}),t.execCommand("indentAuto")}function u(t,n){for(var i=n.ch,o=i,s=t.getLine(n.line);i&&e.isWordChar(s.charAt(i-1));)--i;for(;o<s.length&&e.isWordChar(s.charAt(o));)++o;return{from:r(n.line,i),to:r(n.line,o),word:s.slice(i,o)}}function h(e,t){for(var n=e.listSelections(),r=[],i=0;i<n.length;i++){var o=n[i],s={anchor:e.findPosV(o.anchor,t,"line"),head:e.findPosV(o.head,t,"line")};r.push(o),r.push(s)}e.setSelections(r)}n[t[l+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},n[t[l+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},n[t["Shift-"+o+"L"]="splitSelectionByLine"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)for(var o=t[i].from(),s=t[i].to(),a=o.line;a<=s.line;++a)s.line>o.line&&a==s.line&&0==s.ch||n.push({anchor:a==o.line?o:r(a,0),head:a==s.line?s:r(a)});e.setSelections(n,0)},t["Shift-Tab"]="indentLess",n[t.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},n[t[o+"L"]="selectLine"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var o=t[i];n.push({anchor:r(o.from().line,0),head:r(o.to().line+1,0)})}e.setSelections(n)},t["Shift-Ctrl-K"]="deleteLine",n[t[o+"Enter"]="insertLineAfter"]=function(e){return c(e,!1)},n[t["Shift-"+o+"Enter"]="insertLineBefore"]=function(e){return c(e,!0)},n[t[o+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"),i=t.getCursor("to"),o=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(n,i)){var s=u(t,n);if(!s.word)return;t.setSelection(s.from,s.to),o=!0}else{var a=t.getRange(n,i),l=o?new RegExp("\\b"+a+"\\b"):a,c=t.getSearchCursor(l,i),h=c.findNext();if(h||(h=(c=t.getSearchCursor(l,r(t.firstLine(),0))).findNext()),!h||function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].from()==t&&e[r].to()==n)return!0;return!1}(t.listSelections(),c.from(),c.to()))return e.Pass;t.addSelection(c.from(),c.to())}o&&(t.state.sublimeFindFullWord=t.doc.sel)};var f=i?"Shift-Cmd":"Alt-Ctrl";n[t[f+"Up"]="addCursorToPrevLine"]=function(e){h(e,-1)},n[t[f+"Down"]="addCursorToNextLine"]=function(e){h(e,1)};var d="(){}[]";function p(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var o=t[i].head,s=e.scanForBracket(o,-1);if(!s)return!1;for(;;){var a=e.scanForBracket(o,1);if(!a)return!1;if(a.ch==d.charAt(d.indexOf(s.ch)+1)){n.push({anchor:r(s.pos.line,s.pos.ch+1),head:a.pos});break}o=r(a.pos.line,a.pos.ch+1)}}return e.setSelections(n),!0}n[t["Shift-"+o+"Space"]="selectScope"]=function(e){p(e)||e.execCommand("selectAll")},n[t["Shift-"+o+"M"]="selectBetweenBrackets"]=function(t){if(!p(t))return e.Pass},n[t[o+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var i=t.scanForBracket(n.head,1);if(i&&0!=e.cmpPos(i.pos,n.head))return i.pos;var o=t.scanForBracket(n.head,-1);return o&&r(o.pos.line,o.pos.ch+1)||n.head})};var g=i?"Cmd-Ctrl-":"Shift-Ctrl-";function m(t,n){if(t.isReadOnly())return e.Pass;for(var i,o=t.listSelections(),s=[],a=0;a<o.length;a++){var l=o[a];if(!l.empty()){for(var c=l.from().line,u=l.to().line;a<o.length-1&&o[a+1].from().line==u;)u=o[++a].to().line;o[a].to().ch||u--,s.push(c,u)}}s.length?i=!0:s.push(t.firstLine(),t.lastLine()),t.operation(function(){for(var e=[],o=0;o<s.length;o+=2){var a=s[o],l=s[o+1],c=r(a,0),u=r(l),h=t.getRange(c,u,!1);n?h.sort():h.sort(function(e,t){var n=e.toUpperCase(),r=t.toUpperCase();return n!=r&&(e=n,t=r),e<t?-1:e==t?0:1}),t.replaceRange(h,c,u),i&&e.push({anchor:c,head:r(l+1,0)})}i&&t.setSelections(e,0)})}n[t[g+"Up"]="swapLineUp"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),i=[],o=t.firstLine()-1,s=[],a=0;a<n.length;a++){var l=n[a],c=l.from().line-1,u=l.to().line;s.push({anchor:r(l.anchor.line-1,l.anchor.ch),head:r(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--u,c>o?i.push(c,u):i.length&&(i[i.length-1]=u),o=u}t.operation(function(){for(var e=0;e<i.length;e+=2){var n=i[e],o=i[e+1],a=t.getLine(n);t.replaceRange("",r(n,0),r(n+1,0),"+swapLine"),o>t.lastLine()?t.replaceRange("\n"+a,r(t.lastLine()),null,"+swapLine"):t.replaceRange(a+"\n",r(o,0),null,"+swapLine")}t.setSelections(s),t.scrollIntoView()})},n[t[g+"Down"]="swapLineDown"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),i=[],o=t.lastLine()+1,s=n.length-1;s>=0;s--){var a=n[s],l=a.to().line+1,c=a.from().line;0!=a.to().ch||a.empty()||l--,l<o?i.push(l,c):i.length&&(i[i.length-1]=c),o=c}t.operation(function(){for(var e=i.length-2;e>=0;e-=2){var n=i[e],o=i[e+1],s=t.getLine(n);n==t.lastLine()?t.replaceRange("",r(n-1),r(n),"+swapLine"):t.replaceRange("",r(n,0),r(n+1,0),"+swapLine"),t.replaceRange(s+"\n",r(o,0),null,"+swapLine")}t.scrollIntoView()})},n[t[o+"/"]="toggleCommentIndented"]=function(e){e.toggleComment({indent:!0})},n[t[o+"J"]="joinLines"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){for(var o=t[i],s=o.from(),a=s.line,l=o.to().line;i<t.length-1&&t[i+1].from().line==l;)l=t[++i].to().line;n.push({start:a,end:l,anchor:!o.empty()&&s})}e.operation(function(){for(var t=0,i=[],o=0;o<n.length;o++){for(var s,a=n[o],l=a.anchor&&r(a.anchor.line-t,a.anchor.ch),c=a.start;c<=a.end;c++){var u=c-t;c==a.end&&(s=r(u,e.getLine(u).length+1)),u<e.lastLine()&&(e.replaceRange(" ",r(u),r(u+1,/^\s*/.exec(e.getLine(u+1))[0].length)),++t)}i.push({anchor:l||s,head:s})}e.setSelections(i,0)})},n[t["Shift-"+o+"D"]="duplicateLine"]=function(e){e.operation(function(){for(var t=e.listSelections().length,n=0;n<t;n++){var i=e.listSelections()[n];i.empty()?e.replaceRange(e.getLine(i.head.line)+"\n",r(i.head.line,0)):e.replaceRange(e.getRange(i.from(),i.to()),i.from())}e.scrollIntoView()})},i||(t[o+"T"]="transposeChars"),n[t.F9="sortLines"]=function(e){m(e,!0)},n[t[o+"F9"]="sortLinesInsensitive"]=function(e){m(e,!1)},n[t.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),r=n.find();if(r)return t.push(n),e.setSelection(r.from,r.to)}},n[t["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},n[t[o+"F2"]="toggleBookmark"]=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),r=0;r<t.length;r++){for(var i=t[r].from(),o=t[r].to(),s=e.findMarks(i,o),a=0;a<s.length;a++)if(s[a].sublimeBookmark){s[a].clear();for(var l=0;l<n.length;l++)n[l]==s[a]&&n.splice(l--,1);break}a==s.length&&n.push(e.markText(i,o,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},n[t["Shift-"+o+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},n[t["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var r=0;r<t.length;r++){var i=t[r].find();i?n.push({anchor:i.from,head:i.to}):t.splice(r--,0)}n.length&&e.setSelections(n,0)},t["Alt-Q"]="wrapLines";var v=o+"K ";function y(t,n){t.operation(function(){for(var r=t.listSelections(),i=[],o=[],s=0;s<r.length;s++){(l=r[s]).empty()?(i.push(s),o.push("")):o.push(n(t.getRange(l.from(),l.to())))}t.replaceSelections(o,"around","case");var a;for(s=i.length-1;s>=0;s--){var l=r[i[s]];if(!(a&&e.cmpPos(l.head,a)>0)){var c=u(t,l.head);a=c.from,t.replaceRange(n(c.word),c.from,c.to)}}})}t[v+o+"Backspace"]="delLineLeft",n[t.Backspace="smartBackspace"]=function(t){if(t.somethingSelected())return e.Pass;t.operation(function(){for(var n=t.listSelections(),i=t.getOption("indentUnit"),o=n.length-1;o>=0;o--){var s=n[o].head,a=t.getRange({line:s.line,ch:0},s),l=e.countColumn(a,null,t.getOption("tabSize")),c=t.findPosH(s,-1,"char",!1);if(a&&!/\S/.test(a)&&l%i==0){var u=new r(s.line,e.findColumn(a,l-i,i));u.ch!=s.ch&&(c=u)}t.replaceRange("",c,s,"+delete")}})},n[t[v+o+"K"]="delLineRight"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,r(t[n].to().line),"+delete");e.scrollIntoView()})},n[t[v+o+"U"]="upcaseAtCursor"]=function(e){y(e,function(e){return e.toUpperCase()})},n[t[v+o+"L"]="downcaseAtCursor"]=function(e){y(e,function(e){return e.toLowerCase()})},n[t[v+o+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},n[t[v+o+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},n[t[v+o+"W"]="deleteToSublimeMark"]=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var r=t.getCursor(),i=n;if(e.cmpPos(r,i)>0){var o=i;i=r,r=o}t.state.sublimeKilled=t.getRange(r,i),t.replaceRange("",r,i)}},n[t[v+o+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},n[t[v+o+"Y"]="sublimeYank"]=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},t[v+o+"G"]="clearBookmarks",n[t[v+o+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)};var b=i?"Ctrl-Shift-":"Ctrl-Alt-";function w(t){var n=t.getCursor("from"),r=t.getCursor("to");if(0==e.cmpPos(n,r)){var i=u(t,n);if(!i.word)return;n=i.from,r=i.to}return{from:n,to:r,query:t.getRange(n,r),word:i}}function x(e,t){var n=w(e);if(n){var i=n.query,o=e.getSearchCursor(i,t?n.to:n.from);(t?o.findNext():o.findPrevious())?e.setSelection(o.from(),o.to()):(o=e.getSearchCursor(i,t?r(e.firstLine(),0):e.clipPos(r(e.lastLine()))),(t?o.findNext():o.findPrevious())?e.setSelection(o.from(),o.to()):n.word&&e.setSelection(n.from,n.to))}}n[t[b+"Up"]="selectLinesUpward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n];i.head.line>e.firstLine()&&e.addSelection(r(i.head.line-1,i.head.ch))}})},n[t[b+"Down"]="selectLinesDownward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n];i.head.line<e.lastLine()&&e.addSelection(r(i.head.line+1,i.head.ch))}})},n[t[o+"F3"]="findUnder"]=function(e){x(e,!0)},n[t["Shift-"+o+"F3"]="findUnderPrevious"]=function(e){x(e,!1)},n[t["Alt-F3"]="findAllUnder"]=function(e){var t=w(e);if(t){for(var n=e.getSearchCursor(t.query),r=[],i=-1;n.findNext();)r.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&i++;e.setSelections(r,i)}},t["Shift-"+o+"["]="fold",t["Shift-"+o+"]"]="unfold",t[v+o+"0"]=t[v+o+"J"]="unfoldAll",t[o+"I"]="findIncremental",t["Shift-"+o+"I"]="findIncrementalReverse",t[o+"H"]="replace",t.F3="findNext",t["Shift-F3"]="findPrev",e.normalizeKeyMap(t)})(n(0),n(2),n(5))},function(e,t,n){(function(e){"use strict";function t(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.info=r,this.align=i,this.prev=o}function n(e,n,r,i){var o=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=r&&(o=e.context.indented),e.context=new t(o,n,r,i,null,e.context)}function r(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function i(e,t,n){return"variable"==t.prevToken||"type"==t.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,n))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function o(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function s(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function a(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}e.defineMode("clike",function(s,l){var c,u,h=s.indentUnit,f=l.statementIndentUnit||h,d=l.dontAlignCalls,p=l.keywords||{},g=l.types||{},m=l.builtin||{},v=l.blockKeywords||{},y=l.defKeywords||{},b=l.atoms||{},w=l.hooks||{},x=l.multiLineStrings,C=!1!==l.indentStatements,S=!1!==l.indentSwitch,k=l.namespaceSeparator,T=l.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,L=l.numberStart||/[\d\.]/,M=l.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,E=l.isOperatorChar||/[+\-*&%=<>!?|\/]/,A=l.isIdentifierChar||/[\w\$_\xa1-\uffff]/;function _(e,t){var n,r=e.next();if(w[r]){var i=w[r](e,t);if(!1!==i)return i}if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){for(var r,i=!1,o=!1;null!=(r=e.next());){if(r==n&&!i){o=!0;break}i=!i&&"\\"==r}return(o||!i&&!x)&&(t.tokenize=null),"string"}),t.tokenize(e,t);if(T.test(r))return c=r,null;if(L.test(r)){if(e.backUp(1),e.match(M))return"number";e.next()}if("/"==r){if(e.eat("*"))return t.tokenize=O,O(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(E.test(r)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(E););return"operator"}if(e.eatWhile(A),k)for(;e.match(k);)e.eatWhile(A);var o=e.current();return a(p,o)?(a(v,o)&&(c="newstatement"),a(y,o)&&(u=!0),"keyword"):a(g,o)?"type":a(m,o)?(a(v,o)&&(c="newstatement"),"builtin"):a(b,o)?"atom":"variable"}function O(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function P(e,t){l.typeFirstDefinitions&&e.eol()&&o(t.context)&&(t.typeAtEndOfLine=i(e,t,e.pos))}return{startState:function(e){return{tokenize:null,context:new t((e||0)-h,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var s=t.context;if(e.sol()&&(null==s.align&&(s.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return P(e,t),null;c=u=null;var a=(t.tokenize||_)(e,t);if("comment"==a||"meta"==a)return a;if(null==s.align&&(s.align=!0),";"==c||":"==c||","==c&&e.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==t.context.type;)r(t);else if("{"==c)n(t,e.column(),"}");else if("["==c)n(t,e.column(),"]");else if("("==c)n(t,e.column(),")");else if("}"==c){for(;"statement"==s.type;)s=r(t);for("}"==s.type&&(s=r(t));"statement"==s.type;)s=r(t)}else c==s.type?r(t):C&&(("}"==s.type||"top"==s.type)&&";"!=c||"statement"==s.type&&"newstatement"==c)&&n(t,e.column(),"statement",e.current());if("variable"==a&&("def"==t.prevToken||l.typeFirstDefinitions&&i(e,t,e.start)&&o(t.context)&&e.match(/^\s*\(/,!1))&&(a="def"),w.token){var h=w.token(e,t,a);void 0!==h&&(a=h)}return"def"==a&&!1===l.styleDefs&&(a="variable"),t.startOfLine=!1,t.prevToken=u?"def":a||c,P(e,t),a},indent:function(t,n){if(t.tokenize!=_&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var r=t.context,i=n&&n.charAt(0);if("statement"==r.type&&"}"==i&&(r=r.prev),l.dontIndentStatements)for(;"statement"==r.type&&l.dontIndentStatements.test(r.info);)r=r.prev;if(w.indent){var o=w.indent(t,r,n);if("number"==typeof o)return o}var s=i==r.type,a=r.prev&&"switch"==r.prev.info;if(l.allmanIndentation&&/[{(]/.test(i)){for(;"top"!=r.type&&"}"!=r.type;)r=r.prev;return r.indented}return"statement"==r.type?r.indented+("{"==i?0:f):!r.align||d&&")"==r.type?")"!=r.type||s?r.indented+(s?0:h)+(s||!a||/^(?:case|default)\b/.test(n)?0:h):r.indented+f:r.column+(s?0:1)},electricInput:S?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var l="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",c="int long char short double float unsigned signed void size_t ptrdiff_t";function u(e,t){if(!t.startOfLine)return!1;for(var n,r=null;n=e.peek();){if("\\"==n&&e.match(/^.$/)){r=u;break}if("/"==n&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=r,"meta"}function h(e,t){return"type"==t.prevToken&&"type"}function f(e){return e.eatWhile(/[\w\.']/),"number"}function d(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return!!n&&(t.cpp11RawStringDelim=n[1],t.tokenize=g,g(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function p(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function g(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return e.match(new RegExp(".*?\\)"+n+'"'))?t.tokenize=null:e.skipToEnd(),"string"}function m(t,n){"string"==typeof t&&(t=[t]);var r=[];function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}i(n.keywords),i(n.types),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}function v(e,t){for(var n=!1;!e.eol();){if(!n&&e.match('"""')){t.tokenize=null;break}n="\\"==e.next()&&!n}return"string"}m(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:s(l),types:s(c+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:s("case do else for if switch while struct"),defKeywords:s("struct"),typeFirstDefinitions:!0,atoms:s("null true false"),hooks:{"#":u,"*":h},modeProps:{fold:["brace","include"]}}),m(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:s(l+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:s(c+" bool wchar_t"),blockKeywords:s("catch class do else finally for if struct switch try while"),defKeywords:s("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:s("true false null"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":u,"*":h,u:d,U:d,L:d,R:d,0:f,1:f,2:f,3:f,4:f,5:f,6:f,7:f,8:f,9:f,token:function(e,t,n){if("variable"==n&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&(r=e.current(),(i=/(\w+)::~?(\w+)$/.exec(r))&&i[1]==i[2]))return"def";var r,i}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),m("text/x-java",{name:"clike",keywords:s("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:s("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:s("catch class do else finally for if switch try while"),defKeywords:s("class interface package enum @interface"),typeFirstDefinitions:!0,atoms:s("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),m("text/x-csharp",{name:"clike",keywords:s("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:s("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:s("catch class do else finally for foreach if struct switch try while"),defKeywords:s("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=p,p(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),m("text/x-scala",{name:"clike",keywords:s("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:s("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:s("catch class enum do else finally for forSome if match switch try while"),defKeywords:s("class enum def object package trait type val var"),atoms:s("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=v,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,n){var r=n.context;return!("}"!=r.type||!r.align||!e.eat(">"))&&(n.context=new t(r.indented,r.column,r.type,r.info,null,r.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),m("text/x-kotlin",{name:"clike",keywords:s("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend"),types:s("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:s("catch class do else finally for if where try while enum"),defKeywords:s("class val var object package interface fun"),atoms:s("true false null this"),hooks:{'"':function(e,t){var n;return t.tokenize=(n=e.match('""'),function(e,t){for(var r,i=!1,o=!1;!e.eol();){if(!n&&!i&&e.match('"')){o=!0;break}if(n&&e.match('"""')){o=!0;break}r=e.next(),!i&&"$"==r&&e.match("{")&&e.skipTo("}"),i=!i&&"\\"==r&&!n}return!o&&n||(t.tokenize=null),"string"}),t.tokenize(e,t)}},modeProps:{closeBrackets:{triples:'"'}}}),m(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:s("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:s("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:s("for while do if else struct"),builtin:s("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:s("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":u},modeProps:{fold:["brace","include"]}}),m("text/x-nesc",{name:"clike",keywords:s(l+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:s(c),blockKeywords:s("case do else for if switch while struct"),atoms:s("null true false"),hooks:{"#":u},modeProps:{fold:["brace","include"]}}),m("text/x-objectivec",{name:"clike",keywords:s(l+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:s(c),atoms:s("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":u,indent:function(e,t,n){if("statement"==t.type&&/^@\w/.test(n))return t.indented}},modeProps:{fold:"brace"}}),m("text/x-squirrel",{name:"clike",keywords:s("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:s(c),blockKeywords:s("case catch class else for foreach if switch try while"),defKeywords:s("function local class"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"#":u},modeProps:{fold:["brace","include"]}});var y=null;m("text/x-ceylon",{name:"clike",keywords:s("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:s("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:s("class dynamic function interface module object package value"),builtin:s("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:s("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=function e(t){return function(n,r){for(var i,o=!1,s=!1;!n.eol();){if(!o&&n.match('"')&&("single"==t||n.match('""'))){s=!0;break}if(!o&&n.match("``")){y=e(t),s=!0;break}i=n.next(),o="single"==t&&!o&&"\\"==i}return s&&(r.tokenize=null),"string"}}(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!y||!e.match("`"))&&(t.tokenize=y,y=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,n){if(("variable"==n||"type"==n)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})(n(0))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(34),s=n(7),a=n(3),l=n(8);!function(e){var t=function(){function e(e,t,n,r){var i=this;this.canvas=e,this.parent=t,this.timelineFile=n,this.audio=r,this.width=1,this.height=1,this.centerX=0,this.centerY=0,this.resolution=1,this.gl=this.getRendringContext();var a=new l.DemoishedProperty(new s.Uniforms(this.canvas.width,this.canvas.height));this.uniforms=a.getObserver(),this.uniforms.time=0,this.uniforms.timeTotal=0,this.uniforms.mouseX=.5,this.uniforms.mouseY=.5,this.entitiesCache=new Array,this.timeFragments=new Array,this.fftTexture=this.gl.createTexture(),this.webGLbuffer=this.gl.createBuffer(),this.addEventListeners(),this.loadGraph(this.timelineFile).then(function(e){var t=e.audioSettings;e.timeline.forEach(function(e){var t=new s.TimeFragment(e.entity,e.start,e.stop,e.useTransitions);i.timeFragments.push(t)}),i.timeFragments.sort(function(e,t){return e.start-t.start}),i.audio.createAudio(t).then(function(t){e.effects.forEach(function(t){Promise.all(t.textures.map(function(e){return new Promise(function(t,n){var r=new Image;r.src=e.src,r.onload=function(){console.log("Texture loaded"),t(r)},r.onerror=function(e){return t(e)}}).then(function(t){return new o.EntityTexture(t,e.uniform,e.width,e.height,0)})})).then(function(n){i.addEntity(t.name,n),i.entitiesCache.length===e.effects.length&&i.onReady(e)})}),i.resizeCanvas(i.parent)})})}return e.prototype.onFrame=function(e){},e.prototype.onNext=function(e){},e.prototype.onStart=function(){},e.prototype.onStop=function(){},e.prototype.onReady=function(e){},e.prototype.getRendringContext=function(){var e,t={preserveDrawingBuffer:!0};return(e=this.canvas.getContext("webgl2",t)||this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)).getExtension("OES_standard_derivatives"),e.getExtension("OES_texture_float"),e.getExtension("OES_texture_half_float"),e.getExtension("OES_texture_half_float_linear"),e.getExtension("WEBGL_draw_buffers"),e.getExtension("WEBGL_depth_texture"),e.getExtension("EXT_shader_texture_lod"),e.getExtension("EXT_texture_filter_anisotropic"),this.webGLbuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.webGLbuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),e},e.prototype.loadGraph=function(e){return a.default(e).then(function(e){return e.json()}).then(function(e){return e})},e.prototype.addEventListeners=function(){var e=this;document.addEventListener("mousemove",function(t){e.uniforms.mouseX=t.clientX/window.innerWidth,e.uniforms.mouseY=1-t.clientY/window.innerHeight})},e.prototype.addEntity=function(e,t){var n=new o.ShaderEntity(this.gl,e,this.canvas.width,this.canvas.height,t);return this.entitiesCache.push(n),this.timeFragments.filter(function(t){return t.entity===e}).forEach(function(e){e.setEntity(n)}),n},e.prototype.tryFindTimeFragment=function(e){return this.timeFragments.find(function(t){return e<t.stop&&e>=t.start})},e.prototype.resetClock=function(e){this.uniforms.timeTotal=e,this.animationFrameCount=0,this.animationOffsetTime=e,this.animationStartTime=performance.now(),this.audio.currentTime=e/1e3%60},e.prototype.start=function(e){this.uniforms.timeTotal=e,this.animationFrameCount=0,this.animationOffsetTime=e,this.currentTimeFragment=this.tryFindTimeFragment(e),this.animationStartTime=performance.now(),this.animate(e),this.audio.currentTime=e/1e3%60,this.audio.play(),this.isPaused||this.onStart()},e.prototype.stop=function(){return this.audio.stop(),cancelAnimationFrame(this.animationFrameId),this.onStop(),this.animationFrameId},e.prototype.mute=function(){this.isSoundMuted=!this.isSoundMuted,this.audio.mute(this.isSoundMuted)},e.prototype.pause=function(){return this.isPaused?(this.isPaused=!1,this.resume(this.uniforms.time)):(this.isPaused=!0,this.stop()),this.uniforms.time},e.prototype.resume=function(e){this.start(e)},e.prototype.updateTextureData=function(e,t,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,t,0,r.RGBA,r.UNSIGNED_BYTE,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)},e.prototype.animate=function(e){var t=this,n=e-this.animationStartTime;this.animationFrameId=requestAnimationFrame(function(e){t.animate(e)}),this.audio?this.updateTextureData(this.fftTexture,this.audio.textureSize,this.audio.getFrequenceData()):this.updateTextureData(this.fftTexture,this.audio.textureSize,new Uint8Array(1024)),this.currentTimeFragment&&(n>=this.currentTimeFragment.stop&&(this.currentTimeFragment=this.tryFindTimeFragment(e)),this.currentTimeFragment?this.renderEntities(this.currentTimeFragment.entityShader,n):this.start(0)),this.onFrame({frame:this.animationFrameCount,ms:n,min:Math.floor(n/6e4)%60,sec:Math.floor(n/1e3%60)})},e.prototype.surfaceCorners=function(){this.gl&&(this.width=this.height*this.uniforms.screenWidth/this.uniforms.screenHeight,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.webGLbuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([this.centerX-this.width,this.centerY-this.height,this.centerX+this.width,this.centerY-this.height,this.centerX-this.width,this.centerY+this.height,this.centerX+this.width,this.centerY-this.height,this.centerX+this.width,this.centerY+this.height,this.centerX-this.width,this.centerY+this.height]),this.gl.STATIC_DRAW))},e.prototype.setViewPort=function(e,t){this.gl.viewport(0,0,e,t)},e.prototype.resizeCanvas=function(e,t){t&&(this.resolution=t);var n=e.clientWidth/this.resolution,r=e.clientHeight/this.resolution;console.log(n,r),this.canvas.width=n,this.canvas.height=r,this.canvas.style.width=e.clientWidth+"px",this.canvas.style.height=e.clientHeight+"px",this.uniforms.screenWidth=n,this.uniforms.screenHeight=r,this.surfaceCorners(),this.setViewPort(this.canvas.width,this.canvas.height)},e.prototype.updateUniforms=function(){throw"Not yet implemented"},e.prototype.renderEntities=function(e,t){var n=this.gl;this.uniforms.time=t,this.uniforms.timeTotal=performance.now()-this.animationStartTime,n.useProgram(e.currentProgram),n.uniform1f(e.uniformsCache.get("timeTotal"),this.uniforms.timeTotal/1e3),n.uniform1f(e.uniformsCache.get("time"),this.uniforms.time/1e3),n.uniform1i(e.uniformsCache.get("frame"),this.animationFrameCount),n.uniform2f(e.uniformsCache.get("mouse"),this.uniforms.mouseX,this.uniforms.mouseY),n.uniform2f(e.uniformsCache.get("resolution"),this.uniforms.screenWidth,this.uniforms.screenHeight),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(e.positionAttribute,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.webGLbuffer),n.vertexAttribPointer(e.vertexPosition,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,e.backTarget.texture),n.uniform1i(n.getUniformLocation(e.currentProgram,"backbuffer"),1),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.fftTexture),n.uniform1i(n.getUniformLocation(e.currentProgram,"fft"),0);e.assets.forEach(function(t,r){n.activeTexture(n.TEXTURE0+(2+r)),n.bindTexture(n.TEXTURE_2D,t.texture),n.uniform1i(n.getUniformLocation(e.currentProgram,t.name),2+r)}),n.bindFramebuffer(n.FRAMEBUFFER,e.target.frameBuffer),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,6),e.swapBuffers(),this.animationFrameCount++},r([l.Observe(!0),i("design:type",s.Uniforms)],e.prototype,"uniforms",void 0),e}();e.Rendering=t}(t.Demolished||(t.Demolished={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.name=e,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height}return e.prototype.update=function(e){},e}();t.BaseEntity2D=r;var i=function(){function e(e){this.canvas=e,this.entities=new Array,this.ctx=e.getContext("2d"),this.animationStartTime=0,this.resizeCanvas()}return e.prototype.clear=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},e.prototype.animate=function(e){var t=this;this.animationStartTime;this.animationFrameId=requestAnimationFrame(function(e){t.animate(e)}),this.renderEntities(e)},e.prototype.addEntity=function(e){this.entities.push(e)},e.prototype.resizeCanvas=function(){var e=window.innerWidth/2,t=window.innerHeight/2;this.canvas.width=e,this.canvas.height=t,this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px"},e.prototype.renderEntities=function(e){this.clear(),this.entities.forEach(function(t){t.update(e)})},e.prototype.start=function(e){this.animate(e)},e}();t.Demolished2D=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=function(){return function(){}}();t.DemolishedSoundBase=s;var a=function(e){function t(){return e.call(this)||this}return i(t,e),Object.defineProperty(t.prototype,"textureSize",{get:function(){return 16},enumerable:!0,configurable:!0}),t.prototype.play=function(){this.sid.play()},t.prototype.stop=function(){this.sid.pause()},t.prototype.mute=function(e){throw"not implemented"},t.prototype.getFrequenceData=function(){return this.sid.getFreqByteData()},Object.defineProperty(t.prototype,"duration",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.sid._currentPlaytime},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.createAudio=function(e){var t=function(){},n=window.ScriptNodePlayer,r=this;return new Promise(function(i,o){n.createInstance(new SIDBackendAdapter,"",[],!0,t,function(){r.sid=this,i(!0)},t,t),n.getInstance().loadMusicFromURL(e.audioFile,{basePath:""},t,t)})},t}(s);t.DemolishedSIDMusic=a;var l=function(e){function t(){return e.call(this)||this}return i(t,e),Object.defineProperty(t.prototype,"textureSize",{get:function(){return 32},enumerable:!0,configurable:!0}),t.prototype.getFrequenceData=function(){var e=this.audioAnalyser.frequencyBinCount,t=new Uint8Array(e);return this.audioAnalyser.getByteFrequencyData(t),t},t.prototype.play=function(){this.audio.play()},t.prototype.stop=function(){this.audio.pause()},t.prototype.mute=function(e){this.audio.muted=e},Object.defineProperty(t.prototype,"duration",{get:function(){return this.audio.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.audio.currentTime},set:function(e){this.audio.currentTime=e},enumerable:!0,configurable:!0}),t.prototype.createAudio=function(e){var t=this;return new Promise(function(n,r){o.default(e.audioFile).then(function(r){return r.arrayBuffer().then(function(r){var i=new AudioContext;i.decodeAudioData(r,function(r){var o=new OfflineAudioContext(1,r.length,r.sampleRate),s=o.createBufferSource();s.buffer=r,s.connect(o.destination);var a=o.createBiquadFilter();a.type="highpass",a.Q.value=2,a.frequency.value=2e3,s.connect(a),a.connect(o.destination),s.start(0);var l=i.createBufferSource();l.buffer=r,l.connect(i.destination),o.startRendering().then(function(r){var i=new AudioContext,o=new Audio;o.preload="auto",o.src=e.audioFile,o.crossOrigin="anonymous";var s,a;s=i.createMediaElementSource(o),(a=i.createAnalyser()).smoothingTimeConstant=e.audioAnalyzerSettings.smoothingTimeConstant,a.fftSize=e.audioAnalyzerSettings.fftSize,t.audio=o,s.connect(a),a.connect(i.destination),t.audioAnalyser=a,n(!0),i.createBufferSource().buffer=r})})})})})},t}(s);t.DemolishedStreamingMusic=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.$=function(e,t){return t?t.querySelector(e):document.querySelector(e)},e.$$=function(e,t){for(var n=new Array,r=t?t.querySelectorAll(e):document.querySelectorAll(e),i=0;i<r.length;i++)n.push(r.item(i));return n},e.getExponentOfTwo=function(e,t){var n=1;do{n*=2}while(n<e);return n>t&&(n=t),n},e.convertBuffer=function(e){for(var t=new DataView(e),n=new Float32Array(4194304),r=n.length,i=0;i<r;++i)n[i]=t.getFloat32(i*Float32Array.BYTES_PER_ELEMENT,!0);return n},e.Audio={getPeaksAtThreshold:function(e,t,n){for(var r=new Array,i=e.length,o=0;o<i;)e[o]>n&&(r.push(o),o+=t/5),o++;return r}},e.Array={add:function(e,t){return e+t},sum:function(t){return t.reduce(e.Array.add,0)},average:function(t){return void 0===t[0]?NaN:e.Array.sum(t)/t.length},delta:function(e){var t=e[0];return e.slice(1).reduce(function(e,t){var n=e[0],r=e[1];return[n.concat([t-r]),t]},[[],t])[0]}},e}();t.Utils=r;var i=function(){return function(e,t){this.line=e,this.error=t}}();t.ShaderError=i;var o=function(){function e(){this.lastCompile=performance.now(),this.isCompiling=!1,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("webgl")}return e.prototype.onError=function(e){throw"Not implememnted"},e.prototype.onSuccess=function(e){throw"Not implemented"},e.prototype.toErrorLines=function(e){for(var t=0,n=0,r=0,o=new Array;t>=0&&!((t=e.indexOf("ERROR: 0:",t))<0);)if(t+=9,(n=e.indexOf(":",t))>t&&(r=parseInt(e.substring(t,n)),!isNaN(r)&&r>0)){t=n+1;var s=(n=e.indexOf("ERROR: 0:",t))>t?e.substring(t,n):e.substring(t);o.push(new i(r,s))}return o},e.prototype.canCompile=function(){return-(this.lastCompile-performance.now())>500&&!this.isCompiling},e.prototype.compile=function(e){this.isCompiling=!0;var t=this.gl,n=this.createShader(e,t.FRAGMENT_SHADER);n.length>0?(this.isCompiling=!1,this.lastCompile=performance.now(),this.onError(n)):(this.isCompiling=!1,this.lastCompile=performance.now(),this.onSuccess(e))},e.prototype.createShader=function(e,t){var n=this.gl,r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?new Array:this.toErrorLines(n.getShaderInfoLog(r))},e}();t.ShaderCompiler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(38),o=n(9),s=n(9),a=n(10),l=function(){function e(e){var t=this;this.editor=e,this.wrapper=e.getWrapperElement();var n=window.getComputedStyle(this.wrapper,null),l=new a.default(""!==n.background?n.background:n.backgroundColor),c=new a.default(n.color);this.properties={bgColor:l.getString("rgb"),fnColor:c.getString("rgb"),dimColor:"rgb(127, 127, 127)",selColor:"rgb(40, 168, 107)",link_button:!0},this.wrapper.addEventListener("contextmenu",function(e){e.preventDefault();var n=t.editor.getCursor(!0);t.editor.getTokenAt(n)}),this.wrapper.addEventListener("mouseup",function(e){if(!t.editor.somethingSelected()){var n=t.editor.getCursor(!0),a=t.getMatch(n);t.editor.getTokenAt(n);if(a){if(t.activeModal&&t.activeModal.isVisible)return void t.activeModal.removeModal();"color"===a.type&&(t.activeModal=new r.default(a.string,t.properties),t.activeModal.showAt(t.editor),t.activeModal.on("changed",function(e){var r=e.getString("vec"),i={line:n.line,ch:a.start},o={line:n.line,ch:a.end};a.end=a.start+r.length,t.editor.replaceRange(r,i,o)}),t.activeModal.on("link_button",function(e){t.activeModal=new s.default(e.getString("vec"),t.properties),t.activeModal.showAt(t.editor),t.activeModal.on("changed",function(e){var r=e.getString("vec3"),i={line:n.line,ch:a.start},o={line:n.line,ch:a.end};a.end=a.start+r.length,t.editor.replaceRange(r,i,o)})})),"vec3"===a.type?(t.activeModal=new s.default(a.string,t.properties),t.activeModal.showAt(t.editor),t.activeModal.on("changed",function(e){var r=e.getString("vec3"),i={line:n.line,ch:a.start},o={line:n.line,ch:a.end};a.end=a.start+r.length,t.editor.replaceRange(r,i,o)})):"vec2"===a.type?(t.activeModal=new o.default(a.string,t.properties),t.activeModal.showAt(t.editor),t.activeModal.on("changed",function(e){var r=e.getString(),i={line:n.line,ch:a.start},o={line:n.line,ch:a.end};a.end=a.start+r.length,t.editor.replaceRange(r,i,o)})):"number"===a.type&&(t.activeModal=new i.default(a.string,t.properties),t.activeModal.showAt(t.editor),t.activeModal.on("changed",function(e){var r=e.getString(),i={line:n.line,ch:a.start},o={line:n.line,ch:a.end};a.end=a.start+r.length,t.editor.replaceRange(r,i,o)}))}}})}return e.prototype.getMatch=function(e){var t,n=["color","vec3","vec2","number"];for(var r in n)if(t=this.getTypeMatch(e,n[r]))return t},e.prototype.getTypeMatch=function(e,t){if(t){var n;switch(t.toLowerCase()){case"color":n=/vec[3|4]\([\d|.|,\s]*\)/g;break;case"vec3":n=/vec3\([-|\d|.|,\s]*\)/g;break;case"vec2":n=/vec2\([-|\d|.|,\s]*\)/g;break;case"number":n=/[-]?\d+\.\d+|\d+\.|\.\d+/g;break;default:return void console.error("invalid match selection")}var r=this.editor.getLine(e.line),i=n.execAll(r);if(i)for(var o=0;o<i.length;o++){var s=i[o][0],a=s.length,l=i[o].index,c=i[o].index+a;if(e.ch>=l&&e.ch<=c)return{type:t,start:l,end:c,string:s}}}},e}();t.DemoishedEditorHelper=l},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),s=n(0);n(21),n(2),n(13),n(4),n(5),n(16),n(22),n(6),n(17),n(18),n(20),n(19),n(15),n(14),n(24),n(23);var a=n(28),l=n(27),c=n(29),u=n(26),h=function(e){function t(t){var n=e.call(this,"spectrumAnalyzer",t)||this;return n.ctx=t,n.active=!0,n.bars=60,n.ctx.fillStyle="#ffffff",n.ctx.strokeStyle="#ffffff",n.frequencData=new Uint8Array(8192),n}return i(t,e),t.prototype.update=function(e){for(var t=0,n=Math.floor(8192/this.bars),r=0;r<this.bars;r+=1){t=0;for(var i=0;i<n;i+=1)t+=this.frequencData[r*n+i];var o=t/n,s=this.ctx.canvas.width/this.bars,a=o/256*this.height;this.ctx.fillRect(r*s+20,this.ctx.canvas.height,s-2,-a)}},t}(u.BaseEntity2D);t.SpectrumAnalyzer=h;var f=function(){function e(){var e=this,t=new u.Demolished2D(a.Utils.$("#canvas-spectrum"));this.spectrum=new h(t.ctx),t.addEntity(this.spectrum),t.start(0),this.shaderCompiler=new a.ShaderCompiler,this.music=new l.DemolishedStreamingMusic,this.engine=new o.Demolished.Rendering(a.Utils.$("#webgl"),a.Utils.$("#shader-view"),"entities/graph.json",this.music);var n=a.Utils.$(".time"),r=a.Utils.$("#toogle-playback"),i=a.Utils.$("#toggle-sound"),f=a.Utils.$("#btn-fullscreen"),d=a.Utils.$(".immediate"),p=a.Utils.$("#current-time"),g=a.Utils.$("#shader-resolution");n.addEventListener("click",function(){e.engine.uniforms.time=0,e.engine.resetClock(0)}),a.Utils.$("#btn-showconsole").addEventListener("click",function(){a.Utils.$(".immediate").classList.toggle("hide")}),f.addEventListener("click",function(){a.Utils.$("#webgl").webkitRequestFullscreen()}),g.addEventListener("change",function(t){e.engine.resizeCanvas(a.Utils.$("#shader-view"),parseInt(g.value))}),document.addEventListener("webkitfullscreenchange",function(t){var n=document.webkitFullscreenElement;n?(n.classList.add("shader-fullscreen"),e.engine.resizeCanvas(document.body)):((n=a.Utils.$("#shader-view")).classList.remove("shader-fullscreen"),e.engine.resizeCanvas(n))}),r.addEventListener("click",function(){r.classList.toggle("fa-play"),r.classList.toggle("fa-pause"),e.engine.pause()}),i.addEventListener("click",function(){i.classList.toggle("fa-volume-up"),i.classList.toggle("fa-volume-off"),e.engine.mute()}),this.engine.onFrame=function(t){e.spectrum.frequencData=e.music.getFrequenceData(),p.style.width=(parseInt(t.ms)/386400*100).toString()+"%",n.textContent=t.min+":"+t.sec+":"+(t.ms/10).toString().match(/^-?\d+(?:\.\d{0,-1})?/)[0]},this.engine.onReady=function(){e.onReady(),window.setTimeout(function(){e.engine.start(0)},2e3)},this.engine.onNext=function(e){},this.engine.onStop=function(){},this.engine.onStart=function(){var t=e.engine.currentTimeFragment.entityShader.fragmetShader;a.Utils.$("#fragment").textContent=t;performance.now();var n=s.fromTextArea(a.Utils.$("#fragment"),{gutters:["note-gutter","CodeMirror-linenumbers"],viewportMargin:1/0,lineNumbers:!0,matchBrackets:!0,mode:"x-shader/x-fragment",keyMap:"sublime",autoCloseBrackets:!0,showCursorWhenSelecting:!0,theme:"monokai",indentUnit:4,lineWrapping:!0,autofocus:!0});e.helpers=new c.DemoishedEditorHelper(n),e.shaderCompiler.onError=function(e){e.forEach(function(e){var t=document.createElement("abbr");t.classList.add("error-info"),t.title=e.error,n.setGutterMarker(e.line-1,"note-gutter",t);var r=document.createElement("p"),i=document.createElement("mark"),o=document.createElement("span");o.textContent=e.error,i.textContent=e.line.toString(),r.appendChild(i),r.appendChild(o),d.appendChild(r)})},e.shaderCompiler.onSuccess=function(t){a.Utils.$$(".error-info").forEach(function(e){e.classList.remove("error-info")}),e.engine.currentTimeFragment.entityShader.reCompile(t)},n.on("change",function(t){var n=t.getValue();if(0!=n.length||e.shaderCompiler.canCompile()){e.engine.currentTimeFragment.entityShader.vertexShader;e.shaderCompiler.compile(n)}})},window.onerror=function(){e.engine.stop()}}return e.getIntance=function(){return new e},e.prototype.onReady=function(){a.Utils.$(".loader").classList.add("hide")},e}();t.DemolishedEd=f,document.addEventListener("DOMContentLoaded",function(){f.getIntance()})},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,h=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e,t){var n;!function(n){!function(r){var i="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(n);function s(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===i.Reflect?i.Reflect=n:o=s(i.Reflect,o),function(t){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,i=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,l=!s&&!a,c={create:s?function(){return R(Object.create(null))}:a?function(){return R({__proto__:null})}:function(){return R({})},has:l?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),h="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,d=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(h||"function"!=typeof WeakMap?function(){var e=16,t=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){var n=o(e,!0);return n[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+a()}while(c.has(t,e));return t[e]=!0,e}function o(e,t){if(!n.call(e,r)){if(!t)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var t=function(e){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e);return s(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function g(e,t,n){var r=p.get(e);if(x(r)){if(!n)return;r=new f,p.set(e,r)}var i=r.get(t);if(x(i)){if(!n)return;i=new f,r.set(t,i)}return i}function m(e,t,n){var r=g(t,n,!1);return!x(r)&&!!r.has(e)}function v(e,t,n){var r=g(t,n,!1);if(!x(r))return r.get(e)}function y(e,t,n,r){var i=g(n,r,!0);i.set(e,t)}function b(e,t){var n=[],r=g(e,t,!1);if(x(r))return n;for(var i=r.keys(),s=function(e){var t=A(e,o);if(!M(t))throw new TypeError;var n=t.call(e);if(!S(n))throw new TypeError;return n}(i),a=0;;){var l=_(s);if(!l)return n.length=a,n;var c=l.value;try{n[a]=c}catch(e){try{O(s)}finally{throw e}}a++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function x(e){return void 0===e}function C(e){return null===e}function S(e){return"object"==typeof e?null!==e:"function"==typeof e}function k(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=A(e,i);if(void 0!==r){var o=r.call(e,n);if(S(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(M(n)){var r=n.call(e);if(!S(r))return r}var i=e.valueOf;if(M(i)){var r=i.call(e);if(!S(r))return r}}else{var i=e.valueOf;if(M(i)){var r=i.call(e);if(!S(r))return r}var o=e.toString;if(M(o)){var r=o.call(e);if(!S(r))return r}}throw new TypeError}(e,"default"===n?"number":n)}function T(e){var t=k(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function L(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function M(e){return"function"==typeof e}function E(e){return"function"==typeof e}function A(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!M(n))throw new TypeError;return n}}function _(e){var t=e.next();return!t.done&&t}function O(e){var t=e.return;t&&t.call(e)}function P(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i?t:i===e?t:i}function R(e){return e.__=void 0,delete e.__,e}t("decorate",function(e,t,n,r){if(x(n)){if(!L(e))throw new TypeError;if(!E(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!x(i)&&!C(i)){if(!E(i))throw new TypeError;t=i}}return t}(e,t)}if(!L(e))throw new TypeError;if(!S(t))throw new TypeError;if(!S(r)&&!x(r)&&!C(r))throw new TypeError;return C(r)&&(r=void 0),n=T(n),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=e[i],s=o(t,n,r);if(!x(s)&&!C(s)){if(!S(s))throw new TypeError;r=s}}return r}(e,t,n,r)}),t("metadata",function(e,t){return function(n,r){if(!S(n))throw new TypeError;if(!x(r)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;y(e,t,n,r)}}),t("defineMetadata",function(e,t,n,r){if(!S(n))throw new TypeError;x(r)||(r=T(r));return y(e,t,n,r)}),t("hasMetadata",function(e,t,n){if(!S(t))throw new TypeError;x(n)||(n=T(n));return function e(t,n,r){var i=m(t,n,r);if(i)return!0;var o=P(n);if(!C(o))return e(t,o,r);return!1}(e,t,n)}),t("hasOwnMetadata",function(e,t,n){if(!S(t))throw new TypeError;x(n)||(n=T(n));return m(e,t,n)}),t("getMetadata",function(e,t,n){if(!S(t))throw new TypeError;x(n)||(n=T(n));return function e(t,n,r){var i=m(t,n,r);if(i)return v(t,n,r);var o=P(n);if(!C(o))return e(t,o,r);return}(e,t,n)}),t("getOwnMetadata",function(e,t,n){if(!S(t))throw new TypeError;x(n)||(n=T(n));return v(e,t,n)}),t("getMetadataKeys",function(e,t){if(!S(e))throw new TypeError;x(t)||(t=T(t));return function e(t,n){var r=b(t,n);var i=P(t);if(null===i)return r;var o=e(i,n);if(o.length<=0)return r;if(r.length<=0)return o;var s=new d;var a=[];for(var l=0,c=r;l<c.length;l++){var u=c[l],h=s.has(u);h||(s.add(u),a.push(u))}for(var f=0,p=o;f<p.length;f++){var u=p[f],h=s.has(u);h||(s.add(u),a.push(u))}return a}(e,t)}),t("getOwnMetadataKeys",function(e,t){if(!S(e))throw new TypeError;x(t)||(t=T(t));return b(e,t)}),t("deleteMetadata",function(e,t,n){if(!S(t))throw new TypeError;x(n)||(n=T(n));var r=g(t,n,!1);if(x(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||(p.delete(t),!0)})}(o)}()}(n||(n={}))}).call(t,n(31),n(33))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=n(3),a=function(){return function(e,t,n,r,i){this.image=e,this.name=t,this.width=n,this.height=r,this.assetType=i}}();t.EntityTexture=a;var l=function(){function e(e){this.gl=e}return e.prototype.cacheUniformLocation=function(e){this.uniformsCache.set(e,this.gl.getUniformLocation(this.currentProgram,e))},e}();t.EntityBase=l;var c=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.gl=t,s.name=n,s.x=r,s.y=i,s.assets=o,s.uniformsCache=new Map,s.loadShaders().then(function(){s.initShader(),s.target=s.createRenderTarget(s.x,s.y),s.backTarget=s.createRenderTarget(s.x,s.y)}),s}return i(t,e),t.prototype.render=function(){throw"Not yet implemented"},t.prototype.createRenderTarget=function(e,t){var n=this.gl,r=new o.RenderTarget(n.createFramebuffer(),n.createRenderbuffer(),n.createTexture());return n.bindTexture(n.TEXTURE_2D,r.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindFramebuffer(n.FRAMEBUFFER,r.frameBuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r.texture,0),n.bindRenderbuffer(n.RENDERBUFFER,r.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r.renderBuffer),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r},t.prototype.loadShaders=function(){var e=this,t=new Array;return t.push("entities/"+this.name+"/fragment.glsl"),t.push("entities/"+this.name+"/vertex.glsl"),Promise.all(t.map(function(e){return s.default(e).then(function(e){return e.text()})})).then(function(t){return e.fragmetShader=t[0],e.vertexShader=t[1],!0}).catch(function(t){return e.onError(t),!1})},t.prototype.reCompile=function(e,t){t&&(this.vertexShader=t),this.fragmetShader=e,this.initShader()},t.prototype.onError=function(e){console.error(e)},t.prototype.createTextureFromData=function(e,t,n){var r=this.gl,i=r.createTexture();return r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null),i},t.prototype.initShader=function(){var e=this,t=this.gl;this.buffer=t.createBuffer(),this.currentProgram=t.createProgram();var n=this.createShader(t,this.vertexShader,t.VERTEX_SHADER),r=this.createShader(t,this.fragmetShader,t.FRAGMENT_SHADER);if(t.attachShader(this.currentProgram,n),t.attachShader(this.currentProgram,r),t.linkProgram(this.currentProgram),!t.getProgramParameter(this.currentProgram,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.currentProgram);t.getProgramParameter(this.currentProgram,t.VALIDATE_STATUS);this.onError(i)}this.cacheUniformLocation("fft"),this.cacheUniformLocation("time"),this.cacheUniformLocation("frame"),this.cacheUniformLocation("timeTotal"),this.cacheUniformLocation("mouse"),this.cacheUniformLocation("resolution"),this.cacheUniformLocation("backbuffer"),this.positionAttribute=0,t.enableVertexAttribArray(this.positionAttribute),this.vertexPosition=t.getAttribLocation(this.currentProgram,"position"),t.enableVertexAttribArray(this.vertexPosition),this.assets.forEach(function(t){t.texture=e.createTextureFromData(t.width,t.height,t.image)}),t.useProgram(this.currentProgram)},t.prototype.swapBuffers=function(){var e=this.target;this.target=this.backTarget,this.backTarget=e},t.prototype.createShader=function(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),r},t}(l);t.ShaderEntity=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.entity=e}return e.prototype.fadeIn=function(e){return null},e.prototype.fadeOut=function(e){},e}();t.DemlolishedTransitionBase=r},function(e,t,n){"use strict";t.a=function(e){var t=new Set;return Object.assign(e,{on(e,n){let r={};r[e]=n,t.add(r)},off(e,n){if(n){let r={};r[e]=n,t.delete(r)}else for(let n of t)for(let r of Object.keys(n))if(r===e)return void t.delete(n)},offAll(){t.clear()},trigger(e,...n){for(var r of t)"function"==typeof r[e]&&r[e](...n)},listSubscriptions(){for(let e of t)console.log(e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(10),o=n(12),s=n(41);let a,l,c=0;function u(e,t,n,r,i){let o=t[0]||t,s=t[1]||t,a=n[0]||n,l=n[1]||n,c=360,u=Math.PI/180;for(e.save(),e.translate(o-a,s-l),e.scale(a,l),r=c/r||360;c>0;c-=r)e.beginPath(),360!==r&&e.moveTo(1,1),e.arc(1,1,1,(c-r/2-1)*u,(c+r/2+1)*u),i?i(e,c):(e.fillStyle="black",e.fill());e.restore()}t.default=class extends r.a{constructor(e="vec3(1.0,0.0,0.0)",t={}){super("ge_colorpicker_",t),this.width=250,this.height=250,this.disc={width:200,height:200},this.barlum={width:25,height:200},this.setValue(e),this.init()}init(){if(!l){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("canvas"),i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),c=document.createElement("canvas"),u=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div");e.className=this.CSS_PREFIX+"modal ge_picker_modal",e.style.backgroundColor=this.bgColor,t.className=this.CSS_PREFIX+"patch",t.style.backgroundColor=this.bgColor,n.className=this.CSS_PREFIX+"hsv-map",r.className=this.CSS_PREFIX+"disc",r.style.backgroundColor=this.bgColor,i.className=this.CSS_PREFIX+"disc-cover",o.className=this.CSS_PREFIX+"disc-cursor",s.className=this.CSS_PREFIX+"bar-bg",a.className=this.CSS_PREFIX+"bar-white",c.className=this.CSS_PREFIX+"bar-luminance",u.className=this.CSS_PREFIX+"bar-cursors",h.className=this.CSS_PREFIX+"bar-cursor-left",f.className=this.CSS_PREFIX+"bar-cursor-right",n.id="cp-map",u.id="cp-bar",e.appendChild(t),e.appendChild(n),n.appendChild(r),n.appendChild(i),n.appendChild(o),n.appendChild(s),n.appendChild(a),n.appendChild(c),n.appendChild(u),u.appendChild(h),u.appendChild(f),l=e}if(this.el=l.cloneNode(!0),n.i(s.a)(this.el,{move:!0,resize:!1,snap:!1}),this.dom={},this.dom.hsvMap=this.el.querySelector(".ge_colorpicker_hsv-map"),this.dom.hsvMapCover=this.dom.hsvMap.children[1],this.dom.hsvMapCursor=this.dom.hsvMap.children[2],this.dom.hsvBarBGLayer=this.dom.hsvMap.children[3],this.dom.hsvBarWhiteLayer=this.dom.hsvMap.children[4],this.dom.hsvBarCursors=this.dom.hsvMap.children[6],this.dom.hsvLeftCursor=this.dom.hsvBarCursors.children[0],this.dom.hsvRightCursor=this.dom.hsvBarCursors.children[1],this.dom.colorDisc=this.el.querySelector(".ge_colorpicker_disc"),this.dom.luminanceBar=this.el.querySelector(".ge_colorpicker_bar-luminance"),this.link_button){let e=document.createElement("div");e.innerHTML="+",e.className=this.CSS_PREFIX+"link-button",e.style.color=this.fgColor,this.el.appendChild(e),e.addEventListener("click",()=>{this.trigger("link_button",this.value),"function"==typeof this.link_button&&this.link_button(this.value),this.removeModal()})}}draw(){this.el.querySelector(".ge_colorpicker_patch").style.backgroundColor=this.value.getString("rgb");let e=this.value.colors,t=this.dom.colorDisc.offsetHeight/2,n=2*Math.PI,r=Math.cos(n-e.hsv.h*n),i=Math.sin(n-e.hsv.h*n),o=e.hsv.s*(t-5);this.dom.hsvMapCover.style.opacity=1-e.hsv.v/255,this.dom.hsvBarWhiteLayer.style.opacity=1-e.hsv.s,this.dom.hsvBarBGLayer.style.backgroundColor="rgb("+e.hueRGB.r+","+e.hueRGB.g+","+e.hueRGB.b+")",this.dom.hsvMapCursor.style.cssText="left: "+(r*o+t)+"px;top: "+(i*o+t)+"px;border-color: "+(e.luminance>.22?"#333;":"#ddd"),e.luminance>.22?this.dom.hsvBarCursors.classList.add("ge_colorpicker_dark"):this.dom.hsvBarCursors.classList.remove("ge_colorpicker_dark"),this.dom.hsvLeftCursor&&(this.dom.hsvLeftCursor.style.top=this.dom.hsvRightCursor.style.top=(1-e.hsv.v/255)*t*2+"px")}presentModal(e,t){super.presentModal(e,t),this.onHsvDownHandler=n.i(r.b)(this.dom.hsvMap,"mousedown",this.onHsvDown,this);let i=this.dom.colorDisc;if(i.getContext){let e=i.getContext("2d"),t=n.i(o.a)(e),r=this.disc.width/t,s=this.disc.height/t;this.dom.colorDisc.width=r*t,this.dom.colorDisc.height=s*t,e.scale(t,t),u(e,[r/2,s/2],[r/2-1,s/2-1],360,function(e,t){let n=e.createRadialGradient(1,1,1,1,1,0);n.addColorStop(0,"hsl("+(360-t+0)+", 100%, 50%)"),n.addColorStop(1,"#fff"),e.fillStyle=n,e.fill()}),h=e,a=[r/2,s/2],l=[r/2,s/2],c=this.bgColor,r=(r=2/t)||1,l=[(l[0]||l)-r/2,(l[1]||l)-r/2],u(h,a,l,1,function(e,t){e.restore(),e.lineWidth=r,e.strokeStyle=c||"#000",e.stroke()});let h=this.dom.luminanceBar.getContext("2d");this.dom.luminanceBar.width=this.barlum.width,this.dom.luminanceBar.height=this.barlum.height*t,h.scale(t,t);let f=h.createLinearGradient(0,0,0,this.barlum.height/t);f.addColorStop(0,"transparent"),f.addColorStop(1,"black"),h.fillStyle=f,h.fillRect(0,0,30,200)}var s,a,l,c,h;this.draw()}setValue(e){this.value=new i.default(e)}onHsvDown(e){let t=e.target||e.srcElement;e.preventDefault(),a=t.id?t:t.parentNode,c=a.offsetHeight,this.onHsvMoveHandler=n.i(r.b)(this.el,"mousemove",this.onHsvMove,this),this.onHsvUpHandler=n.i(r.b)(window,"mouseup",this.onHsvUp,this),this.onHsvMove(e),this.dom.hsvMap.classList.add("ge_colorpicker_no-cursor"),this.renderer.start()}onHsvMove(e){let t,n,r,i,o;if(e.preventDefault(),e.stopPropagation(),e.target===this.dom.hsvMapCover&&a===this.dom.hsvMap)t=c/2,n=e.offsetX-t,r=e.offsetY-t,i=(360-(180*Math.atan2(r,n)/Math.PI+(r<0?360:0)))/360,o=Math.sqrt(n*n+r*r)/t,this.value.set({h:i,s:o},"hsv");else if(e.target===this.dom.hsvBarCursors&&a===this.dom.hsvBarCursors){let t=(c-e.offsetY)/c;t=255*Math.max(0,Math.min(1,t)),this.value.set({v:t},"hsv")}this.trigger("changed",this.value)}onHsvUp(e){this.renderer.stop(),this.dom.hsvMap.classList.remove("ge_colorpicker_no-cursor"),this.destroyEvents()}destroyEvents(){n.i(r.c)(this.el,"mousemove",this.onHsvMoveHandler),this.onHsvMoveHandler=null,n.i(r.c)(window,"mouseup",this.onHsvUpHandler),this.onHsvUpHandler=null}close(){this.destroyEvents(),n.i(r.c)(this.dom.hsvMap,"mousedown",this.onHsvDownHandler),this.onHsvDownHandler=null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(39);t.default=class extends r.a{constructor(e,t){super("ge_floatpicker_",t),this.width=this.width||250,this.height=this.height||40,this.prevOffset=0,this.scale=2,this.setValue(e||1),this.create()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+.5*this.height),this.ctx.lineTo(0+this.width,.5+.5*this.height),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle=this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(.5*this.width,0),this.ctx.lineTo(.5*this.width,this.height),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath(),this.ctx.moveTo(.5*this.width,5),this.ctx.lineTo(.48*this.width,0),this.ctx.lineTo(.52*this.width,0),this.ctx.closePath(),this.ctx.fill();let e=this.width/40,t=this.offsetX;Math.abs(this.offsetX-.5*this.width)>.5*this.width&&(t=(this.offsetX-.5*this.width)%(.5*this.width)+this.width),this.ctx.strokeStyle=this.dimColor,this.ctx.beginPath();for(let n=0;n<120;n++){let r=n%20==0?.35*this.height:n%10==0?.2*this.height:.1*this.height;this.ctx.moveTo(n*e-t,.5*this.height-r),this.ctx.lineTo(n*e-t,.5*this.height+r)}this.ctx.stroke();let n=Math.round((this.value-this.min)/this.range*this.width);this.ctx.strokeStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.offsetX+n,.5*this.height),this.ctx.lineTo(this.offsetX+n,this.height),this.ctx.closePath(),this.ctx.stroke(),this.overPoint=!1}onMouseDown(e){this.prevOffset=e.offsetX,super.onMouseDown(e)}onMouseMove(e){let t=e.offsetX,n=t-this.prevOffset,r=this.offsetX-n,o=this.width/this.scale;this.setValue(r/o),this.prevOffset=t;var s=new i.a(this.getValue());this.trigger("changed",s),this.overPoint=!0}setValue(e){"string"==typeof e?this.value=parseFloat(e):"number"==typeof e&&(this.value=e);let t=this.width/this.scale;this.offsetX=this.value*t}}},function(e,t,n){"use strict";t.a=class{constructor(e){this.value=e}getString(){return this.value.toFixed(3)}uniformType(){return"float"}uniformValue(){return[this.value]}uniformMethod(){return"1f"}}},function(e,t,n){"use strict";class r{constructor(e,t){this.value=[0,0],this.dim=2,this.set(e,t)}set(e,t){if("number"==typeof e)t=t||"vec2",this.set([e],t);else if("string"==typeof e){let n=e.replace(/(?:#|\)|\]|%)/g,"").split("("),r=(n[1]||n[0].replace(/(\[)/g,"")).split(/,\s*/);t=t||(n[1]?n[0].substr(0,4):"vec"+r.length);let i=[];for(let e in r)i.push(parseFloat(r[e]));this.set(i,t)}else if(e)if(Array.isArray(e)){this.value=[],this.value.length=0,this.dim=t?Number(t.substr(3,4)):e.length;let n=1===e.length?e[0]:0;for(let t=0;t<this.dim;t++)this.value.push(e[t]||n)}else e.dim&&(this.value=e.value,this.dim=e.dim)}set x(e){this.value[0]=e}set y(e){this.value[1]=e}set z(e){if(this.dim<3){for(;this.dim<3;)this.value.push(0);this.dim=3}this.value[2]=e}set w(e){if(this.dim<4){for(;this.dim<4;)this.value.push(0);this.dim=4}this.value[3]=e}get x(){return this.value[0]||0}get y(){return this.value[1]||0}get z(){return this.value[2]||0}get w(){return this.value[3]||0}getString(e){e=e||"vec"+this.dim;let t=this.dim,n="",r=e+"(",i=")";"array"===e?(r="[",i="]",t=this.dim):t=Number(e.substr(3,4)),n=r;for(let e=0;e<t;e++)n+=this.value[e].toFixed(3),e!==t-1&&(n+=",");return n+i}uniformType(){return"vec"+this.dim}uniformValue(){var e=[];for(let t=0;t<this.dim;t++)e.push(this.value[t]);return e}uniformMethod(){return this.dim+"f"}add(e){if("number"==typeof e)for(let t=0;t<this.dim;t++)this.value[t]=this.value[t]+e;else{let t=new r(e),n=Math.min(this.dim,t.dim);for(let e=0;e<n;e++)this.value[e]=this.value[e]+t.value[e]}}sub(e){if("number"==typeof e)for(let t=0;t<this.dim;t++)this.value[t]=this.value[t]-e;else{let t=new r(e),n=Math.min(this.dim,t.dim);for(let e=0;e<n;e++)this.value[e]=this.value[e]-t.value[e]}}mult(e){if("number"==typeof e)for(let t=0;t<this.dim;t++)this.value[t]=this.value[t]*e;else{let t=new r(e),n=Math.min(this.dim,t.dim);for(let e=0;e<n;e++)this.value[e]=this.value[e]*t.value[e]}}div(e){if("number"==typeof e)for(let t=0;t<this.dim;t++)this.value[t]=this.value[t]/e;else{let t=new r(e),n=Math.min(this.dim,t.dim);for(let e=0;e<n;e++)this.value[e]=this.value[e]/t.value[e]}}normalize(){let e=this.getLength();this.div(e)}getAdd(e){var t=new r(this);return t.add(e),t}getSub(e){var t=new r(this);return t.sub(e),t}getMult(e){var t=new r(this);return t.mult(e),t}getDiv(e){var t=new r(this);return t.div(e),t}getLengthSq(){return 2===this.dim?this.value[0]*this.value[0]+this.value[1]*this.value[1]:this.value[0]*this.value[0]+this.value[1]*this.value[1]+this.value[2]*this.value[2]}getLength(){return Math.sqrt(this.getLengthSq())}}t.a=r},function(e,t,n){"use strict";t.a=function(e,t){n.i(r.a)(e),(t=t||{}).resize=void 0!==t.resize&&t.resize,t.move=void 0!==t.move&&t.move,t.snap=void 0!==t.snap&&t.snap;var a,l,c,u,h,f,d,p,g,m,v,y=100,b=100,w=null,x=!1,C=document.createElement("div");C.className="ghostdom",t.snap&&e.parentElement.appendChild(C);function S(){s(C,p.left,p.top,p.width,p.height),C.style.opacity=0}function k(e){L(e);var n=t.resize&&(a||l||u||c);w={x:g,y:m,cx:e.clientX,cy:e.clientY,w:p.width,h:p.height,isResizing:n,isMoving:!n&&T(),onTopEdge:u,onLeftEdge:c,onRightEdge:a,onBottomEdge:l}}function T(){return t.move&&g>0&&g<p.width&&m>0&&m<p.height}function L(t){p=e.getBoundingClientRect(),g=t.clientX-p.left,m=t.clientY-p.top,u=m<o,c=g<o,a=g>=p.width-o,l=m>=p.height-o,h=window.innerWidth-o,f=window.innerHeight-o}function M(e){L(e),v=e,x=!0}function E(n){if(L(n),w&&w.isResizing&&e.trigger("resize",{finish:!0,el:e}),t.snap&&w&&w.isMoving){var r={width:p.width,height:p.height};p.top<i||p.left<i||p.right>window.innerWidth-i||p.bottom>window.innerHeight-i?(s(e,0,0,window.innerWidth,window.innerHeight),d=r):p.top<o?(s(e,0,0,window.innerWidth,window.innerHeight/2),d=r):p.left<o?(s(e,0,0,window.innerWidth/2,window.innerHeight),d=r):p.right>h?(s(e,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),d=r):p.bottom>f?(s(e,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),d=r):d=null,S(),e.trigger("move",{finish:!0,el:e}),e.trigger("resize",{finish:!0,el:e})}w=null}return e.addEventListener("mousedown",function(e){k(e),v.preventDefault()}),document.addEventListener("mousemove",M),document.addEventListener("mouseup",E),e.addEventListener("touchstart",function(e){k(e.touches[0]),v.preventDefault()}),document.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation(),M(e.touches[0])}),document.addEventListener("touchend",function(e){0===e.touches.length&&E(v.changedTouches[0])}),function n(){if(requestAnimationFrame(n),x){if(x=!1,w&&w.isResizing){if(w.onRightEdge&&(e.style.width=Math.max(g,y)+"px"),w.onBottomEdge&&(e.style.height=Math.max(m,b)+"px"),w.onLeftEdge){var r=Math.max(w.cx-v.clientX+w.w,y);r>y&&(e.style.width=r+"px",e.style.removeProperty("right"),e.style.left=v.clientX+"px")}if(w.onTopEdge){var k=Math.max(w.cy-v.clientY+w.h,b);k>b&&(e.style.height=k+"px",e.style.removeProperty("bottom"),e.style.top=v.clientY+"px")}return S(),void e.trigger("resize",{finish:!1,el:e})}if(w&&w.isMoving){if(t.snap){if(p.top<i||p.left<i||p.right>window.innerWidth-i||p.bottom>window.innerHeight-i?(s(C,0,0,window.innerWidth,window.innerHeight),C.style.opacity=.2):p.top<o?(s(C,0,0,window.innerWidth,window.innerHeight/2),C.style.opacity=.2):p.left<o?(s(C,0,0,window.innerWidth/2,window.innerHeight),C.style.opacity=.2):p.right>h?(s(C,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),C.style.opacity=.2):p.bottom>f?(s(C,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),C.style.opacity=.2):S(),d)return void s(e,v.clientX-d.width/2,v.clientY-Math.min(w.y,d.height),d.width,d.height);e.style.removeProperty("right"),e.style.removeProperty("bottom"),e.style.top=v.clientY-w.y+"px",e.style.left=v.clientX-w.x+"px"}else{let t=v.clientX-w.x,n=v.clientY-w.y;t<0?t=0:n<0?n=0:t+e.offsetWidth>window.innerWidth?t=window.innerWidth-e.offsetWidth:n+e.offsetHeight>window.innerHeight&&(n=window.innerHeight-e.offsetHeight),e.style.removeProperty("right"),e.style.removeProperty("bottom"),e.style.left=t+"px",e.style.top=n+"px"}e.trigger("move",{finish:!1,el:e})}else t.resize&&(a&&l||c&&u)?e.style.cursor="nwse-resize":t.resize&&(a&&u||l&&c)?e.style.cursor="nesw-resize":t.resize&&(a||c)?e.style.cursor="ew-resize":t.resize&&(l||u)?e.style.cursor="ns-resize":T()?e.style.cursor="move":e.style.cursor="default"}}(),e.snapRight=function(){var t={width:e.width,height:e.height};s(e,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),d=t,e.trigger("move",{finish:!0,el:e}),e.trigger("resize",{finish:!0,el:e})},e};var r=n(42),i=-30,o=10;function s(e,t,n,r,i){e.style.left=t+"px",e.style.top=n+"px",e.style.width=r+"px",e.style.height=i+"px"}},function(e,t,n){"use strict";t.a=function(e){var t=new Set;return Object.assign(e,{on(e,n){let r={};r[e]=n,t.add(r)},off(e,n){if(n){let r={};r[e]=n,t.delete(r)}else for(let n of t)for(let r of Object.keys(n))if(r===e)return void t.delete(n)},offAll(){t.clear()},trigger(e,...n){for(var r of t)"function"==typeof r[e]&&r[e](...n)},listSubscriptions(){for(let e of t)console.log(e)}})}}]);